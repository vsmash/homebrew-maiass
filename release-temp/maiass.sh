#!/usr/bin/env bash
# Packed bundle: decodes embedded payload then evals it.
_decode() {
  base64 -d
}
eval "$(_decode <<'__PAYLOAD__'
IyBHZW5lcmF0ZWQgYnkgc2NyaXB0cy9idW5kbGUtYmFzaC5zaCBvbiAyMDI1LTA4LTE4VDAxOjQzOjQ3WgojIEVudHJ5OiBtYWlhc3Muc2gKIyBOb3RlOiBUaGlzIGlzIGEgYnVuZGxlZCBmaWxlLiBEbyBub3QgZWRpdCBkaXJlY3RseS4KZXhwb3J0IF9fTUFJQVNTX0JVTkRMRUQ9MQoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBNQUlBU1MgKE1vZHVsYXIgQUktQXVnbWVudGVkIFNlbWFudGljIFNjcmliZSkgdjUuOC4xNQojIEludGVsbGlnZW50IEdpdCB3b3JrZmxvdyBhdXRvbWF0aW9uIHNjcmlwdAojIENvcHlyaWdodCAoYykgMjAyNSBWZWx2YXJ5IFB0eSBMdGQKIyBBbGwgcmlnaHRzIHJlc2VydmVkLgojIFRoaXMgZnVuY3Rpb24gaXMgcGFydCBvZiB0aGUgVmVsdmFyeSBiYXNoIHNjcmlwdHMgbGlicmFyeS4KIyBBdXRob3I6IHZzbWFzaCA8NjcwMjUyK3ZzbWFzaEB1c2Vycy5ub3JlcGx5LmdpdGh1Yi5jb20+CiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgUmVzb2x2ZSB0aGlzIHNjcmlwdOKAmXMgcmVhbCBwYXRoIGV2ZW4gaWYgc3ltbGlua2VkClNPVVJDRT0iJHtCQVNIX1NPVVJDRVswXX0iCndoaWxlIFsgLWggIiRTT1VSQ0UiIF07IGRvCiAgRElSPSIkKGNkIC1QICIkKGRpcm5hbWUgIiRTT1VSQ0UiKSIgPi9kZXYvbnVsbCAyPiYxICYmIHB3ZCkiCiAgU09VUkNFPSIkKHJlYWRsaW5rICIkU09VUkNFIikiCiAgW1sgJFNPVVJDRSAhPSAvKiBdXSAmJiBTT1VSQ0U9IiRESVIvJFNPVVJDRSIKZG9uZQpTQ1JJUFRfUEFUSD0iJChjZCAtUCAiJChkaXJuYW1lICIkU09VUkNFIikiID4vZGV2L251bGwgMj4mMSAmJiBwd2QpIgoKIyBEZXRlY3QgbGliZXhlYyBsYXlvdXQ6IGluIGRldiwgbGliIGlzIG5leHQgdG8gdGhlIHNjcmlwdDsgaW4gYnJldywgaXQncyBuZXN0ZWQKaWYgW1sgLWQgIiRTQ1JJUFRfUEFUSC9saWIvY29yZSIgXV07IHRoZW4KICBMSUJFWEVDX0RJUj0iJFNDUklQVF9QQVRIL2xpYiIKZWxzZQogIExJQkVYRUNfRElSPSIkU0NSSVBUX1BBVEgvLi4vbGliZXhlYy9saWIiCmZpClBST0pFQ1RfRElSPSIkKHB3ZCkiCgojIE1ha2UgbWFpbiBzY3JpcHQgcGF0aCBhbmQgdmVyc2lvbiBhdmFpbGFibGUgdG8gYWxsIHNvdXJjZWQgbGlicwpleHBvcnQgTUFJQVNTX01BSU5fU0NSSVBUPSIkU09VUkNFIgojIFByZWZlciBleHBsaWNpdCBlbnYgb3ZlcnJpZGUsIGVsc2UgcGFyc2UgZnJvbSBzY3JpcHQgaGVhZGVyIGNvbW1lbnQsIGVsc2UgMC4wLjAKZXhwb3J0IE1BSUFTU19DTElFTlRfVkVSU0lPTj01LjguMTUKCiMgLS0tIEJlZ2luIGlubGluZWQ6IC9Wb2x1bWVzL2VuaWdtYWRldi9lbmlnbWFkZXYvc3RhdGljL21haWFzcy13aG9sZS9iYXNobWFpYXNzL2xpYi9jb3JlL2xvZ2dlci5zaCAtLS0KaWYgW1sgLXogIiR7X19TUkNfX1ZvbHVtZXNfZW5pZ21hZGV2X2VuaWdtYWRldl9zdGF0aWNfbWFpYXNzX3dob2xlX2Jhc2htYWlhc3NfbGliX2NvcmVfbG9nZ2VyX3NoOi19IiBdXTsgdGhlbiBfX1NSQ19fVm9sdW1lc19lbmlnbWFkZXZfZW5pZ21hZGV2X3N0YXRpY19tYWlhc3Nfd2hvbGVfYmFzaG1haWFzc19saWJfY29yZV9sb2dnZXJfc2g9MQoKc3VwcG9ydHNfdW5pY29kZSgpIHsKICBjYXNlICIkT1NUWVBFIiBpbgogICAgbXN5cyp8Y3lnd2luKnx3aW4zMikKICAgICAgW1sgLW4gIiRXVF9TRVNTSU9OIiB8fCAiJFRFUk1fUFJPR1JBTSIgPT0gInZzY29kZSIgXV0gJiYgcmV0dXJuIDAKICAgICAgcmV0dXJuIDEKICAgICAgOzsKICAgICopCiAgICAgIFtbICIkTEFORyIgPX4gVVRGLTggfHwgIiRMQ19BTEwiID1+IFVURi04IF1dICYmIHJldHVybiAwCiAgICAgIHJldHVybiAxCiAgICAgIDs7CiAgZXNhYwp9CmV4cG9ydCB1bmljb2RlX3N1cHBvcnRlZD1zdXBwb3J0c191bmljb2RlCgpzdXBwb3J0c190cnVlY29sb3IoKSB7IFtbICIke0NPTE9SVEVSTTotfSIgPT0gKnRydWVjb2xvciogfHwgIiR7Q09MT1JURVJNOi19IiA9PSAqMjRiaXQqIF1dOyB9CnN1cHBvcnRzXzI1NmNvbG9yKCkgIHsgbG9jYWwgbjsgbj0kKHRwdXQgY29sb3JzIDI+L2Rldi9udWxsIHx8IGVjaG8gMCk7IFsgIiRuIiAtZ2UgMjU2IF07IH0KCmV4cG9ydCB0d29maXZlc2l4Y29sb3Jfc3VwcG9ydGVkPXN1cHBvcnRzXzI1NmNvbG9yCmV4cG9ydCB0cnVlY29sb3Jfc3VwcG9ydGVkPXN1cHBvcnRzX3RydWVjb2xvcgoKIyBDb2xvciBhbmQgc3R5bGUgZGVmaW5pdGlvbnMKIyBCb2xkIGNvbG9ycyAoZm9yIGVtcGhhc2lzIGFuZCBpbXBvcnRhbnQgbWVzc2FnZXMpCkJDeWFuPSdcMDMzWzE7MzZtJyAgICAgICMgQm9sZCBDeWFuCkJSZWQ9J1wwMzNbMTszMW0nICAgICAgICMgQm9sZCBSZWQKQkdyZWVuPSdcMDMzWzE7MzJtJyAgICAgIyBCb2xkIEdyZWVuCkJCbHVlPSdcMDMzWzE7MzRtJyAgICAgICMgQm9sZCBCbHVlCkJZZWxsb3c9J1wwMzNbMTszM20nICAgICMgQm9sZCBZZWxsb3cKQlB1cnBsZT0nXDAzM1sxOzM1bScgICAgIyBCb2xkIFB1cnBsZQpCV2hpdGU9J1wwMzNbMTszN20nICAgICAjIEJvbGQgV2hpdGUKQk1hZ2VudGE9J1wwMzNbMTszNW0nICAgIyBCb2xkIE1hZ2VudGEKQkFxdWE9J1wwMzNbMTs5Nm0nICAgICAgIyBCb2xkIEFxdWEKQlNvZnRQaW5rPSdcMDMzWzM4OzU7MjE4bScgIyBCb2xkIFNvZnQgUGluawpCTmF2eT0nXDAzM1sxOzM0bScgICAgICAjIEJvbGQgTmF2eQpCR3JleT0nXDAzM1sxOzM1bScgICAgICAjIEJvbGQgR3JleQpCT3JhbmdlPSdcMDMzWzE7Mzg7MjsyNTU7MTY1OzBtJyAgICAjIEJvbGQgT3JhbmdlCgojIFJlZ3VsYXIgY29sb3JzIChmb3Igc3RhbmRhcmQgbWVzc2FnZXMpCkN5YW49J1wwMzNbMDszNm0nICAgICAgICMgQ3lhbgpSZWQ9J1wwMzNbMDszMW0nICAgICAgICAjIFJlZApHcmVlbj0nXDAzM1swOzMybScgICAgICAjIEdyZWVuCkJsdWU9J1wwMzNbMDszNG0nICAgICAgICMgQmx1ZQpZZWxsb3c9J1wwMzNbMDszM20nICAgICAjIFllbGxvdwpQdXJwbGU9J1wwMzNbMDszNW0nICAgICAjIFB1cnBsZQpXaGl0ZT0nXDAzM1swOzM3bScgICAgICAjIFdoaXRlCk1hZ2VudGE9J1wwMzNbMDszNW0nICAgICMgTWFnZW50YQpBcXVhPSdcMDMzWzA7OTZtJyAgICAgICAjIEFxdWEKU29mdFBpbms9J1wwMzNbMzg7NTsyMThtJyAjIFNvZnQgUGluawpOYXZ5PSdcMDMzWzA7MzRtJyAgICAgICAjIE5hdnkKR3JleT0nXDAzM1swOzM1bScgICAgICAjIEdyZXkKT3JhbmdlPSdcMDMzWzM4OzU7MjA4bScgICAjIE9yYW5nZQoKIyBTcGVjaWFsIGZvcm1hdHRpbmcKQ29sb3JfT2ZmPSdcMDMzWzBtJyAgICAgIyBUZXh0IFJlc2V0CkJXaGl0ZUJHPSdcMDMzWzQ3bScgICAgICMgV2hpdGUgQmFja2dyb3VuZApOQz0nXDAzM1swbScKQm9sZD0nXDAzM1sxbScKVW5kZXJsaW5lPSdcMDMzWzRtJwpSZXZlcnNlPSdcMDMzWzdtJwpSZXNldD0nXDAzM1swbScKCiMgUHJpbnQgYSBzZWN0aW9uIGhlYWRlcgpwcmludF9zZWN0aW9uKCkgewogICAgZWNobyAtZSAiXG4ke1llbGxvd33ilrYgJDEke0NvbG9yX09mZn0iCn0KCiMgTG9nZ2luZyBmdW5jdGlvbiAtIHdyaXRlcyB0byBsb2cgZmlsZSBpZiBsb2dnaW5nIGlzIGVuYWJsZWQKbG9nX21lc3NhZ2UoKSB7CiAgICBpZiBbWyAiJGVuYWJsZV9sb2dnaW5nIiA9PSAidHJ1ZSIgXV07IHRoZW4KICAgICAgICBlY2hvICJbJChkYXRlICcrJVktJW0tJWQgJUg6JU06JVMnKV0gJDEiID4+ICIkbG9nX2ZpbGUiCiAgICBmaQp9CgojIFByaW50IGEgc3VjY2VzcyBtZXNzYWdlCnByaW50X3N1Y2Nlc3MoKSB7CiAgICBlY2hvIC1lICIke0dyZWVufeKclCAkMSR7Q29sb3JfT2ZmfSIKICAgIGxvZ19tZXNzYWdlICJTVUNDRVNTOiAkMSIKfQoKIyBQcmludCBhIG1lc3NhZ2UgdGhhdCdzIGFsd2F5cyBzaG93biByZWdhcmRsZXNzIG9mIHZlcmJvc2l0eSBsZXZlbApwcmludF9hbHdheXMoKXsKICBsb2NhbCBtZXNzYWdlPSIkMSIKICBlY2hvIC1lICIke0FxdWF94oS5ICRtZXNzYWdlJHtDb2xvcl9PZmZ9IgogIGxvZ19tZXNzYWdlICJJTkZPOiAkbWVzc2FnZSIKfQoKIyBQcmludCBhbiBpbmZvIG1lc3NhZ2Ugd2l0aCB2ZXJib3NpdHkgbGV2ZWwgc3VwcG9ydAojIFVzYWdlOiBwcmludF9pbmZvICJtZXNzYWdlIiBbbGV2ZWxdCiMgTGV2ZWxzOiBicmllZiwgbm9ybWFsLCBkZWJ1ZyAoZGVmYXVsdDogbm9ybWFsKQpwcmludF9pbmZvKCkgewogICAgbG9jYWwgbWVzc2FnZT0iJDEiCiAgICBsb2NhbCBsZXZlbD0iJHsyOi1icmllZn0iCiAgICAjIGlmIGxldmVsPWFsd2F5cywgc2hvdyBtZXNzYWdlIHJlZ2FyZGxlc3Mgb2YgdmVyYm9zaXR5IGxldmVsCiAgICBpZiBbWyAiJGxldmVsIiA9PSAiYWx3YXlzIiBdXTsgdGhlbgogICAgICAgIGVjaG8gLWUgIiR7QlNvZnRQaW5rfXwpKSAke0NvbG9yX09mZn0kbWVzc2FnZSR7Q29sb3JfT2ZmfSIKICAgICAgICBsb2dfbWVzc2FnZSAiSU5GTzogJG1lc3NhZ2UiCiAgICAgICAgcmV0dXJuCiAgICBmaQoKICAgICMgRm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHksIHRyZWF0IGRlYnVnX21vZGU9dHJ1ZSBhcyB2ZXJib3NpdHlfbGV2ZWw9ZGVidWcKICAgIGlmIFtbICIkZGVidWdfbW9kZSIgPT0gInRydWUiICYmICIkdmVyYm9zaXR5X2xldmVsIiAhPSAiZGVidWciIF1dOyB0aGVuCiAgICAgICAgIyBPbmx5IGxvZyB0aGlzIHdoZW4gbm90IGFscmVhZHkgaW4gZGVidWcgdmVyYm9zaXR5IHRvIGF2b2lkIG5vaXNlCiAgICAgICAgbG9nX21lc3NhZ2UgIkRFUFJFQ0FURUQ6IFVzaW5nIGRlYnVnX21vZGU9dHJ1ZSBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIE1BSUFTU19WRVJCT1NJVFk9ZGVidWcgaW5zdGVhZC4iCiAgICAgICAgIyBUcmVhdCBhcyBpZiB2ZXJib3NpdHlfbGV2ZWwgaXMgZGVidWcKICAgICAgICBsb2NhbCBlZmZlY3RpdmVfdmVyYm9zaXR5PSJkZWJ1ZyIKICAgIGVsc2UKICAgICAgICBsb2NhbCBlZmZlY3RpdmVfdmVyYm9zaXR5PSIkdmVyYm9zaXR5X2xldmVsIgogICAgZmkKCiAgICAjIFNob3cgYmFzZWQgb24gdmVyYm9zaXR5IGxldmVsCiAgICBjYXNlICIkZWZmZWN0aXZlX3ZlcmJvc2l0eSIgaW4KICAgICAgICAiYnJpZWYiKQogICAgICAgICAgICAjIE9ubHkgc2hvdyBlc3NlbnRpYWwgbWVzc2FnZXMgaW4gYnJpZWYgbW9kZQogICAgICAgICAgICBpZiBbWyAiJGxldmVsIiA9PSAiYnJpZWYiIF1dOyB0aGVuCiAgICAgICAgICAgICAgICBlY2hvIC1lICIke0JTb2Z0UGlua318KSkgJHtDb2xvcl9PZmZ9JG1lc3NhZ2Uke0NvbG9yX09mZn0iCiAgICAgICAgICAgIGZpCiAgICAgICAgICAgIDs7CiAgICAgICAgIm5vcm1hbCIpCiAgICAgICAgICAgICMgU2hvdyBicmllZiBhbmQgbm9ybWFsIG1lc3NhZ2VzCiAgICAgICAgICAgIGlmIFtbICIkbGV2ZWwiID09ICJicmllZiIgfHwgIiRsZXZlbCIgPT0gIm5vcm1hbCIgXV07IHRoZW4KICAgICAgICAgICAgICAgIGVjaG8gLWUgIiR7QlNvZnRQaW5rfXwpKSAke0NvbG9yX09mZn0kbWVzc2FnZSR7Q29sb3JfT2ZmfSIKICAgICAgICAgICAgZmkKICAgICAgICAgICAgOzsKICAgICAgICAiZGVidWciKQogICAgICAgICAgICAjIFNob3cgYWxsIG1lc3NhZ2VzLCB1c2UgYm9sZCBmb3IgZGVidWcgbGV2ZWwgbWVzc2FnZXMKICAgICAgICAgICAgaWYgW1sgIiRsZXZlbCIgPT0gImRlYnVnIiBdXTsgdGhlbgogICAgICAgICAgICAgICAgZWNobyAtZSAiJHtCU29mdFBpbmt9fCkpICR7Q29sb3JfT2ZmfSRtZXNzYWdlJHtDb2xvcl9PZmZ9IgogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBlY2hvIC1lICIke0JTb2Z0UGlua318KSkgJHtDb2xvcl9PZmZ9JG1lc3NhZ2Uke0NvbG9yX09mZn0iCiAgICAgICAgICAgIGZpCiAgICAgICAgICAgIDs7CiAgICBlc2FjCgogICAgbG9nX21lc3NhZ2UgIklORk86ICRtZXNzYWdlIgp9CgojIFByaW50IGEgd2FybmluZyBtZXNzYWdlCnByaW50X3dhcm5pbmcoKSB7CiAgICBlY2hvIC1lICIke09yYW5nZX3imqAgJDEke0NvbG9yX09mZn0iCiAgICBsb2dfbWVzc2FnZSAiV0FSTklORzogJDEiCn0KCiMgUHJpbnQgYW4gZXJyb3IgbWVzc2FnZSAodXNpbmcgYm9sZCBmb3IgZW1waGFzaXMgYXMgZXJyb3JzIGFyZSBpbXBvcnRhbnQpCnByaW50X2Vycm9yKCkgewogICAgZWNobyAtZSAiJHtCUmVkfeKcmCAkMSR7Q29sb3JfT2ZmfSIKICAgIGxvZ19tZXNzYWdlICJFUlJPUjogJDEiCn0KCiMgUHJpbnQgYSBzZWN0aW9uIGhlYWRlciAoYWx3YXlzIHNob3duIHJlZ2FyZGxlc3Mgb2YgdmVyYm9zaXR5KQpwcmludF9zZWN0aW9uKCkgewogICAgZWNobyAtZSAiXG4ke1doaXRlfeKWtiAkMSR7Q29sb3JfT2ZmfSIKICAgIGxvZ19tZXNzYWdlICJTRUNUSU9OOiAkMSIKfQoKcHJpbnRfZGVidWcoKXsKICAgIGxvY2FsIG1lc3NhZ2U9IiQxIgogICAgIyBGb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgdHJlYXQgZGVidWdfbW9kZT10cnVlIGFzIHZlcmJvc2l0eV9sZXZlbD1kZWJ1ZwogICAgaWYgW1sgIiRkZWJ1Z19tb2RlIiA9PSAidHJ1ZSIgJiYgIiR2ZXJib3NpdHlfbGV2ZWwiICE9ICJkZWJ1ZyIgXV07IHRoZW4KICAgICAgICAjIE9ubHkgbG9nIHRoaXMgd2hlbiBub3QgYWxyZWFkeSBpbiBkZWJ1ZyB2ZXJib3NpdHkgdG8gYXZvaWQgbm9pc2UKICAgICAgICBsb2dfbWVzc2FnZSAiREVQUkVDQVRFRDogVXNpbmcgZGVidWdfbW9kZT10cnVlIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgTUFJQVNTX1ZFUkJPU0lUWT1kZWJ1ZyBpbnN0ZWFkLiIKICAgICAgICAjIFRyZWF0IGFzIGlmIHZlcmJvc2l0eV9sZXZlbCBpcyBkZWJ1ZwogICAgICAgIGxvY2FsIGVmZmVjdGl2ZV92ZXJib3NpdHk9ImRlYnVnIgogICAgZWxzZQogICAgICAgIGxvY2FsIGVmZmVjdGl2ZV92ZXJib3NpdHk9IiR2ZXJib3NpdHlfbGV2ZWwiCiAgICBmaQogICAgaWYgW1sgIiRlZmZlY3RpdmVfdmVyYm9zaXR5IiA9PSAiZGVidWciIF1dOyB0aGVuCiAgICAgICAgZWNobyAtZSAiJHtDb2xvcl9PZmZ98J+QmyRtZXNzYWdlJHtDb2xvcl9PZmZ9IgogICAgICAgIGxvZ19tZXNzYWdlICJERUJVRzogJG1lc3NhZ2UiCiAgICBmaQoKfQoKIyBMaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHR3byBoZXggY29sb3JzCmludGVycG9sYXRlX2NvbG9yKCkgewogIGxvY2FsIHN0YXJ0PSIkMSIgZW5kPSIkMiIgdmFsdWU9IiQzIiBtaW49IiQ0IiBtYXg9IiQ1IgogIGxvY2FsIHNyPSQocHJpbnRmICIlZCIgMHgke3N0YXJ0OjE6Mn0pCiAgbG9jYWwgc2c9JChwcmludGYgIiVkIiAweCR7c3RhcnQ6MzoyfSkKICBsb2NhbCBzYj0kKHByaW50ZiAiJWQiIDB4JHtzdGFydDo1OjJ9KQogIGxvY2FsIGVyPSQocHJpbnRmICIlZCIgMHgke2VuZDoxOjJ9KQogIGxvY2FsIGVnPSQocHJpbnRmICIlZCIgMHgke2VuZDozOjJ9KQogIGxvY2FsIGViPSQocHJpbnRmICIlZCIgMHgke2VuZDo1OjJ9KQoKICAjIG5vcm1hbGl6ZSB2YWx1ZSBpbnRvIDAuLjEKICBsb2NhbCByYXRpbz0kKCggKHZhbHVlIC0gbWluKSAqIDEwMDAgLyAobWF4IC0gbWluKSApKQogIFtbICRyYXRpbyAtbHQgMCBdXSAmJiByYXRpbz0wCiAgW1sgJHJhdGlvIC1ndCAxMDAwIF1dICYmIHJhdGlvPTEwMDAKCiAgbG9jYWwgcj0kKCggc3IgKyAoZXIgLSBzcikgKiByYXRpbyAvIDEwMDAgKSkKICBsb2NhbCBnPSQoKCBzZyArIChlZyAtIHNnKSAqIHJhdGlvIC8gMTAwMCApKQogIGxvY2FsIGI9JCgoIHNiICsgKGViIC0gc2IpICogcmF0aW8gLyAxMDAwICkpCgogIHByaW50ZiAiIyUwMlglMDJYJTAyWFxuIiAkciAkZyAkYgp9CgojIE1hc3RlciBmdW5jdGlvbgpjcmVkaXRfY29sb3IoKSB7CiAgbG9jYWwgY3JlZGl0cz0iJDEiCiAgaWYgKCggY3JlZGl0cyA+PSAxMDAwICkpOyB0aGVuCiAgICBlY2hvICIjMDBGRjAwIiAjIGdyZWVuCiAgZWxpZiAoKCBjcmVkaXRzID49IDMwMCApKTsgdGhlbgogICAgaW50ZXJwb2xhdGVfY29sb3IgIiMwMEZGRkYiICIjRkZBNTAwIiAiJGNyZWRpdHMiIDMwMCAxMDAwCiAgZWxzZQogICAgaW50ZXJwb2xhdGVfY29sb3IgIiNGRkE1MDAiICIjRkYwMDAwIiAiJGNyZWRpdHMiIDAgMzAwCiAgZmkKfQoKIyBJbnRlZ2VyIFJHQiBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIGhleCBjb2xvcnMuCiMgVXNhZ2U6IGludGVycG9sYXRlX2NvbG9yICIjUlJHR0JCIiAiI1JSR0dCQiIgdmFsdWUgbWluIG1heCAgLT4gZWNob2VzICIjUlJHR0JCIgppbnRlcnBvbGF0ZV9jb2xvcigpIHsKICBsb2NhbCBzdGFydD0iJDEiIGVuZD0iJDIiIHZhbD0iJDMiIG1pbj0iJDQiIG1heD0iJDUiCiAgIyBDbGFtcAogIFsgIiR2YWwiIC1sdCAiJG1pbiIgXSAmJiB2YWw9IiRtaW4iCiAgWyAiJHZhbCIgLWd0ICIkbWF4IiBdICYmIHZhbD0iJG1heCIKICBsb2NhbCByYW5nZT0kKCggbWF4IC0gbWluICkpOyBbICIkcmFuZ2UiIC1sZSAwIF0gJiYgcmFuZ2U9MQogIGxvY2FsIHBvcz0kKCggdmFsIC0gbWluICkpCgogICMgSGV4IC0+IGludAogIGxvY2FsIHNyPSQoKDE2IyR7c3RhcnQ6MToyfSkpIHNnPSQoKDE2IyR7c3RhcnQ6MzoyfSkpIHNiPSQoKDE2IyR7c3RhcnQ6NToyfSkpCiAgbG9jYWwgZXI9JCgoMTYjJHtlbmQ6MToyfSkpICAgZWc9JCgoMTYjJHtlbmQ6MzoyfSkpICAgZWI9JCgoMTYjJHtlbmQ6NToyfSkpCgogICMgTGluZWFyIGludGVycCAoaW50ZWdlciBtYXRoKQogIGxvY2FsIHI9JCgoIHNyICsgKCAoZXIgLSBzcikgKiBwb3MgKSAvIHJhbmdlICkpCiAgbG9jYWwgZz0kKCggc2cgKyAoIChlZyAtIHNnKSAqIHBvcyApIC8gcmFuZ2UgKSkKICBsb2NhbCBiPSQoKCBzYiArICggKGViIC0gc2IpICogcG9zICkgLyByYW5nZSApKQoKICBwcmludGYgIiMlMDJYJTAyWCUwMlhcbiIgIiRyIiAiJGciICIkYiIKfQoKIyBTaW1wbGUgZGV0ZWN0b3I6IG1hbnkgdGVybWluYWxzIGV4cG9ydCBDT0xPUlRFUk09dHJ1ZWNvbG9yLzI0Yml0CnN1cHBvcnRzX3RydWVjb2xvcigpIHsKICBbICIke0NPTE9SVEVSTTotfSIgPSAidHJ1ZWNvbG9yIiBdIHx8IFsgIiR7Q09MT1JURVJNOi19IiA9ICIyNGJpdCIgXQp9CgojIENyZWRpdHMg4oaSIGNvbG9yZWQgdGV4dCwgdHJhZmZpYy1saWdodCBncmFkaWVudAojIEJhbmRzOgojICAgPj0xMDAwIHNvbGlkIGdyZWVuCiMgICA2MDDigJMxMDAwIGludGVycG9sYXRlIGdyZWVu4oaSeWVsbG93CiMgICAzMDDigJM2MDAgIGludGVycG9sYXRlIHllbGxvd+KGkm9yYW5nZQojICAgMOKAkzMwMCAgICBpbnRlcnBvbGF0ZSBvcmFuZ2XihpJyZWQKcHJpbnRfY3JlZGl0X2NvbG9yKCkgewogIGxvY2FsIGNyZWRpdHM9IiQxIiB0ZXh0PSIkezI6LSQxfSIgaGV4IHIgZyBiCgogIGlmIFsgIiRjcmVkaXRzIiAtZ2UgMTAwMCBdOyB0aGVuCiAgICBoZXg9IiMwMEFBMDAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgc29saWQgZ3JlZW4gKG5vdCBuZW9uKQogIGVsaWYgWyAiJGNyZWRpdHMiIC1ndCA2MDAgXTsgdGhlbgogICAgaGV4PSQoaW50ZXJwb2xhdGVfY29sb3IgIiMwMEFBMDAiICIjRkZGRjAwIiAiJGNyZWRpdHMiIDYwMCAxMDAwKSAgIyBncmVlbuKGknllbGxvdwogIGVsaWYgWyAiJGNyZWRpdHMiIC1ndCAzMDAgXTsgdGhlbgogICAgaGV4PSQoaW50ZXJwb2xhdGVfY29sb3IgIiNGRkZGMDAiICIjRkZBNTAwIiAiJGNyZWRpdHMiIDMwMCA2MDApICAgIyB5ZWxsb3fihpJvcmFuZ2UKICBlbGlmIFsgIiRjcmVkaXRzIiAtZ2UgMCBdOyB0aGVuCiAgICBoZXg9JChpbnRlcnBvbGF0ZV9jb2xvciAiI0ZGQTUwMCIgIiNGRjAwMDAiICIkY3JlZGl0cyIgMCAzMDApICAgICAjIG9yYW5nZeKGknJlZAogIGVsc2UKICAgIGhleD0iI0ZGMDAwMCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgbmVnYXRpdmUg4oaSIHJlZAogIGZpCgogIGlmIHN1cHBvcnRzX3RydWVjb2xvcjsgdGhlbgogICAgcj0kKCgxNiMke2hleDoxOjJ9KSk7IGc9JCgoMTYjJHtoZXg6MzoyfSkpOyBiPSQoKDE2IyR7aGV4OjU6Mn0pKQogICAgcHJpbnRmICJcMDMzWzM4OzI7JWQ7JWQ7JWRtJXNcMDMzWzBtXG4iICIkciIgIiRnIiAiJGIiICIkdGV4dCIKICBlbHNlCiAgICAjIDI1Ni1jb2xvciBmYWxsYmFjayB0byBuZWFyZXN0IGZpeGVkIGNvbG9ycyAobm8gZ3JhZGllbnQpCiAgICAjIGdyZWVuPTM0LCB5ZWxsb3c9MjI2LCBvcmFuZ2XiiYgyMDgsIHJlZD0xOTYKICAgIGxvY2FsIGNvZGUKICAgIGlmICAgWyAiJGNyZWRpdHMiIC1nZSAxMDAwIF07IHRoZW4gY29kZT0zNAogICAgZWxpZiBbICIkY3JlZGl0cyIgLWd0IDYwMCAgXTsgdGhlbiBjb2RlPTIyNgogICAgZWxpZiBbICIkY3JlZGl0cyIgLWd0IDMwMCAgXTsgdGhlbiBjb2RlPTIwOAogICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlPTE5NgogICAgZmkKICAgIHByaW50ZiAiXDAzM1szODs1OyVkbSVzXDAzM1swbVxuIiAiJGNvZGUiICIkdGV4dCIKICBmaQp9CgojIHByaW50IGEgbGluZSB0aGF0IGhhcyBhIGdyYWRpZW50IG9mIGNvbG9ycyBmcm9tIG9uZSB0byBhbm90aGVyLiBkZWZhdWx0IHRvIHNvZnQgcGluayB0byBidXJndW5keQojIHVzZSBhIHVuaWNvZGUgZGFzaCBpZiB1bmljb2RlIGlzIHN1cHBvcnRlZCBvciBhIHJlZ3VsYXIgZGFzaCBpZiBub3QKcHJpbnRfZ3JhZGllbnRfbGluZSgpIHsKICAjIERlZmF1bHRzOiBzb2Z0IHBpbmsgLT4gYnVyZ3VuZHkKICBsb2NhbCByZXBlYXQ9IiR7MTotODB9IgogIGxvY2FsIHN0YXJ0X2hleD0iJHsyOi0jZjdiMmM0fSIgICAjIHNvZnQgcGluawogIGxvY2FsIGVuZF9oZXg9IiR7MzotIzZiMDAyMn0iICAgICAjIGJ1cmd1bmR5CiAgbG9jYWwgY2hhciByZXNldAoKICAjIFByZWZlciBVbmljb2RlIGxvbmcgZGFzaAogIGNoYXI9J+KVkCcKICByZXNldD0iJHtDb2xvcl9PZmY6LVxcMDMzWzBtfSIKCiAgIyBUcnVlY29sb3IgcGF0aCAoc21vb3RoZXN0KQogIGlmIHN1cHBvcnRzX3RydWVjb2xvcjsgdGhlbgogICAgbG9jYWwgc2g9IiR7c3RhcnRfaGV4I1wjfSIgZWg9IiR7ZW5kX2hleCNcI30iCiAgICBsb2NhbCByMT0kKCgxNiMke3NoOjA6Mn0pKSBnMT0kKCgxNiMke3NoOjI6Mn0pKSBiMT0kKCgxNiMke3NoOjQ6Mn0pKQogICAgbG9jYWwgcjI9JCgoMTYjJHtlaDowOjJ9KSkgZzI9JCgoMTYjJHtlaDoyOjJ9KSkgYjI9JCgoMTYjJHtlaDo0OjJ9KSkKICAgIGF3ayAtdiBuPSIkcmVwZWF0IiAtdiBjPSIkY2hhciIgLXYgcjE9IiRyMSIgLXYgZzE9IiRnMSIgLXYgYjE9IiRiMSIgLXYgcjI9IiRyMiIgLXYgZzI9IiRnMiIgLXYgYjI9IiRiMiIgJwogICAgICBCRUdJTiB7CiAgICAgICAgZm9yIChpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgICAgdCA9IChuID4gMSkgPyBpIC8gKG4gLSAxKSA6IDAKICAgICAgICAgIHIgPSBpbnQocjEgKyAocjIgLSByMSkgKiB0ICsgMC41KQogICAgICAgICAgZyA9IGludChnMSArIChnMiAtIGcxKSAqIHQgKyAwLjUpCiAgICAgICAgICBiID0gaW50KGIxICsgKGIyIC0gYjEpICogdCArIDAuNSkKICAgICAgICAgIHByaW50ZigiXDAzM1szODsyOyVkOyVkOyVkbSVzIiwgciwgZywgYiwgYykKICAgICAgICB9CiAgICAgICAgcHJpbnRmKCJcMDMzWzBtXG4iKQogICAgICB9JwogICAgcmV0dXJuCiAgZmkKCiAgIyAyNTYtY29sb3IgZmFsbGJhY2sgKGJsb2NreSBidXQgZGVjZW50KQogIGlmIHN1cHBvcnRzXzI1NmNvbG9yOyB0aGVuCiAgICAjIFBpbmsgLT4gYnVyZ3VuZHktaXNoIHBhbGV0dGUKICAgIGxvY2FsIHBhbGV0dGU9KDIyNCAyMTcgMjE4IDIxMiAyMTEgMjEwIDIwNSAyMDQgMTk4IDE5NyAxNjEgMTI1IDg5IDg4IDUyKQogICAgbG9jYWwgdG90YWw9JHsjcGFsZXR0ZVtAXX0KICAgIGxvY2FsIHByaW50ZWQ9MAogICAgbG9jYWwgcGVyPSQoKCAocmVwZWF0ICsgdG90YWwgLSAxKSAvIHRvdGFsICkpCiAgICBsb2NhbCBzcGFjZXMgY2h1bmsgY29kZSBjb3VudAogICAgd2hpbGUgWyAiJHByaW50ZWQiIC1sdCAiJHJlcGVhdCIgXTsgZG8KICAgICAgZm9yIGNvZGUgaW4gIiR7cGFsZXR0ZVtAXX0iOyBkbwogICAgICAgIGNvdW50PSQoKCByZXBlYXQgLSBwcmludGVkICkpCiAgICAgICAgWyAiJGNvdW50IiAtbGUgMCBdICYmIGJyZWFrCiAgICAgICAgWyAiJGNvdW50IiAtZ3QgIiRwZXIiIF0gJiYgY291bnQ9IiRwZXIiCiAgICAgICAgcHJpbnRmICJcMDMzWzM4OzU7JXNtIiAiJGNvZGUiCiAgICAgICAgc3BhY2VzPSQocHJpbnRmICIlKnMiICIkY291bnQiICIiKQogICAgICAgICMgcmVwbGFjZSBzcGFjZXMgd2l0aCB0aGUgY2hvc2VuIGNoYXIgKHdvcmtzIHdpdGggbXVsdGlieXRlIHJlcGxhY2VtZW50KQogICAgICAgIHByaW50ZiAiJXMiICIke3NwYWNlcy8vIC8kY2hhcn0iCiAgICAgICAgcHJpbnRlZD0kKCggcHJpbnRlZCArIGNvdW50ICkpCiAgICAgIGRvbmUKICAgIGRvbmUKICAgIHByaW50ZiAiXDAzM1swbVxuIgogICAgcmV0dXJuCiAgZmkKCiAgIyBQbGFpbiBBU0NJSSBmYWxsYmFjawogIGxvY2FsIHNwYWNlcz0kKHByaW50ZiAiJSpzIiAiJHJlcGVhdCIgIiIpCiAgcHJpbnRmICIlc1xuIiAiJHtzcGFjZXMvLyAvJGNoYXJ9Igp9CgojIHByaW50IGxpbmUgZnVuY3Rpb24gd2l0aCBvcHRpb25hbCBjb2xvdXIgYW5kIGNoYXJhY3RlcgpwcmludF9saW5lKCkgewogICAgbG9jYWwgY29sb3I9IiR7MTotJEJCbHVlfSIgICAjIGRlZmF1bHQgdG8gJEJCbHVlIGlmIHVuc2V0CiAgICBsb2NhbCBjaGFyPSIkezI6LT19IiAgICAgICAgICMgZGVmYXVsdCB0byAnPScKICAgIGxvY2FsIHJlcGVhdD0iJHszOi04MH0iICAgICAgIyBkZWZhdWx0IHRvIDgwCiAgICBsb2NhbCBsaW5lCgogICAgbGluZT0kKHByaW50ZiAiJSpzIiAiJHJlcGVhdCIgIiIgfCB0ciAnICcgIiRjaGFyIikKICAgIGVjaG8gLWUgIiR7Y29sb3J9JHtsaW5lfSR7Q29sb3JfT2ZmfSIKfQoKY29sb3VyX21haWFzcygpewogIGxvY2FsIHJlc2V0PSQnXGVbMG0nCiAgIyBTb2Z0IHBpbmsgLT4gYnVyZ3VuZHkgYWNyb3NzIE0gQSBJIEEgUyBTCiAgbG9jYWwgLWEgY29scz0oMjE4IDIxMSAyMDUgMTk4IDE2MSA4OCkKICBsb2NhbCB3b3JkPSJNQUlBU1MiCiAgbG9jYWwgY29sb3JlZD0iIgogIGZvciAoKGk9MDsgaTwkeyN3b3JkfTsgaSsrKSk7IGRvCiAgICBjb2xvcmVkKz0kJ1xlWzM4OzU7JyR7Y29sc1tpXX1tIiR7d29yZDppOjF9IgogIGRvbmUKICBlY2hvICRjb2xvcmVkCn0KCnByaW50X3RoYW5rcygpIHsKICBsb2NhbCByZXNldD0kJ1xlWzBtJwogIGxvY2FsIG1haWFzcz0kKGNvbG91cl9tYWlhc3MpCiAgcHJpbnRmICdcZVszODs1OzIxOG18KSkgJXMgVGhhbmsgeW91IGZvciB1c2luZyAlcyVzISDinKhcbicgIiRyZXNldCIgIiRtYWlhc3MiICIkcmVzZXQiCn0KCiMgZGV2bG9nLnNoIGlzIG15IHBlcnNvbmFsIHNjcmlwdCBmb3IgbG9nZ2luZyB3b3JrIGluIGdvb2dsZSBzaGVldHMuCiMgaWYgZGV2bG9nLnNoIGlzIG5vdCBhIGJhc2ggc2NyaXB0LCBjcmVhdGUgYW4gZW1wdHkgZnVuY3Rpb24gdG8gcHJldmVudCBlcnJvcnMKaWYgWyAteiAiJCh0eXBlIC10IGRldmxvZy5zaCkiIF07IHRoZW4KICAgIGZ1bmN0aW9uIGRldmxvZy5zaCgpIHsKICAgICAgICA6CiAgICB9CmZpCgojIFByaW50IGEgZGVjb3JhdGVkIGhlYWRlcgpwcmludF9oZWFkZXIoKSB7CgogICAgbG9jYWwgbWFpYXNzPSQoY29sb3VyX21haWFzcykKICAgIHByaW50X2dyYWRpZW50X2xpbmUgNjAgIiMwMDAwRkYiICIjMjlDQ0MxIgogICAgZWNobyAtZSAiJHtCU29mdFBpbmt9fCkpJHtCQmx1ZX0gICAgICAgICAgICAgV2VsY29tZSB0byAke21haWFzc30gJHtCbHVlfSBSQyB2JHtNQUlBU1NfQ0xJRU5UX1ZFUlNJT059ICR7Q29sb3JfT2ZmfSIKICAgIHByaW50X2dyYWRpZW50X2xpbmUgNjAgIiMwMDAwRkYiICIjMjlDQ0MxIgp9CgpmdW5jdGlvbiBsb2d0aGlzKCl7CiAgICAjIGJyYW5jaF9uYW1lIGppcmFfdGlja2V0X251bWJlciBwcm9qZWN0X25hbWUgY2xpZW50X25hbWUKICAgICMgc2hlbGxjaGVjayBkaXNhYmxlPVNDMTA3MwogICAgZGVidWdtc2c9JChkZXZsb2cuc2ggLS0gIiQxIiAiPyIgIiR7cHJvamVjdF9uYW1lOj1NQUlBU1NTfSIgIiR7Y2xpZW50X25hbWU6PVZlbHZhcnl9IiAiJHtqaXJhX3RpY2tldF9udW1iZXI6PURldm9wc30iKSA+L2Rldi9udWxsIDI+JjEKfQoKZmkgIyBfX1NSQ19fVm9sdW1lc19lbmlnbWFkZXZfZW5pZ21hZGV2X3N0YXRpY19tYWlhc3Nfd2hvbGVfYmFzaG1haWFzc19saWJfY29yZV9sb2dnZXJfc2gKIyAtLS0gRW5kIGlubGluZWQ6IC9Wb2x1bWVzL2VuaWdtYWRldi9lbmlnbWFkZXYvc3RhdGljL21haWFzcy13aG9sZS9iYXNobWFpYXNzL2xpYi9jb3JlL2xvZ2dlci5zaCAtLS0KCiMgLS0tIEJlZ2luIGlubGluZWQ6IC9Wb2x1bWVzL2VuaWdtYWRldi9lbmlnbWFkZXYvc3RhdGljL21haWFzcy13aG9sZS9iYXNobWFpYXNzL2xpYi9jb25maWcvZW52YXJzLnNoIC0tLQppZiBbWyAteiAiJHtfX1NSQ19fVm9sdW1lc19lbmlnbWFkZXZfZW5pZ21hZGV2X3N0YXRpY19tYWlhc3Nfd2hvbGVfYmFzaG1haWFzc19saWJfY29uZmlnX2VudmFyc19zaDotfSIgXV07IHRoZW4gX19TUkNfX1ZvbHVtZXNfZW5pZ21hZGV2X2VuaWdtYWRldl9zdGF0aWNfbWFpYXNzX3dob2xlX2Jhc2htYWlhc3NfbGliX2NvbmZpZ19lbnZhcnNfc2g9MQoKIyBFbnZpcm9ubWVudCB2YXJpYWJsZXMgYXJlIG5vdyBsb2FkZWQgd2l0aCBzZWN1cmUgcHJpb3JpdHkgc3lzdGVtIGFib3ZlCgojIFNlY3VyZSBlbnZpcm9ubWVudCB2YXJpYWJsZSBsb2FkaW5nIHdpdGggcHJpb3JpdHkgb3JkZXIKbG9hZF9lbnZpcm9ubWVudF92YXJpYWJsZXMoKSB7CiAgICBsb2NhbCBwcm9qZWN0X2Vudj0iLmVudi5tYWlhc3MiCgogICAgIyBQcmlvcml0eSAxOiBQcm9qZWN0LXNwZWNpZmljIGVudiBmaWxlCiAgICBpZiBbWyAtZiAiJHByb2plY3RfZW52IiBdXTsgdGhlbgogICAgICAgIHByaW50X2luZm8gIkxvYWRpbmcgcHJvamVjdCBjb25maWd1cmF0aW9uIGZyb20gJHtCQ3lhbn0kcHJvamVjdF9lbnYke0NvbG9yX09mZn0iICJkZWJ1ZyIKICAgICAgICBzb3VyY2UgIiRwcm9qZWN0X2VudiIKICAgIGZpCgogICAgIyBQcmlvcml0eSAyOiBTZWN1cmUgc3RvcmFnZSAoY3Jvc3MtcGxhdGZvcm0pCiAgICBsb2FkX3NlY3VyZV92YXJpYWJsZXMKCiAgICAjIFByaW9yaXR5IDM6IFN5c3RlbSBlbnZpcm9ubWVudCAoYWxyZWFkeSBleHBvcnRlZCBieSBzaGVsbCwgbm90aGluZyB0byBsb2FkKQp9CgojIExvYWQgc2Vuc2l0aXZlIHZhcmlhYmxlcyBmcm9tIHNlY3VyZSBzdG9yYWdlCmxvYWRfc2VjdXJlX3ZhcmlhYmxlcygpIHsKICAgIGxvY2FsIHNlY3VyZV92YXJzPSgiTUFJQVNTX0FJX1RPS0VOIiAiTUFJQVNTX1NVQlNDUklQVElPTl9JRCIpCiAgICBsb2NhbCB0b2tlbl9wcm9tcHRlZD0wCgogICAgZm9yIHZhciBpbiAiJHtzZWN1cmVfdmFyc1tAXX0iOyBkbwogICAgICAgICMgQ2hlY2sgaWYgd2Ugc2hvdWxkIHByZWZlciBzZWN1cmUgc3RvcmFnZSBvdmVyIGVudmlyb25tZW50IHZhcmlhYmxlCiAgICAgICAgbG9jYWwgcHJlZmVyX3NlY3VyZT1mYWxzZQogICAgICAgIGlmIFtbICIkdmFyIiA9PSAiTUFJQVNTX0FJX1RPS0VOIiAmJiAtbiAiJHshdmFyfSIgXV07IHRoZW4KICAgICAgICAgICAgIyBDaGVjayBpZiB0aGUgZXhpc3RpbmcgdG9rZW4gbG9va3MgaW52YWxpZAogICAgICAgICAgICBpZiBbWyAiJHshdmFyfSIgPX4gXmludmFsaWRffF50ZXN0X3xfdGVzdCQgXV0gfHwgW1sgIiR7IXZhcn0iID09ICJESVNBQkxFRCIgXV07IHRoZW4KICAgICAgICAgICAgICAgIHByZWZlcl9zZWN1cmU9dHJ1ZQogICAgICAgICAgICAgICAgcHJpbnRfZGVidWcgIkRFQlVHOiBFbnZpcm9ubWVudCB0b2tlbiBhcHBlYXJzIGludmFsaWQsIGNoZWNraW5nIHNlY3VyZSBzdG9yYWdlIiAiZGVidWciCiAgICAgICAgICAgIGZpCiAgICAgICAgZmkKICAgICAgICAKICAgICAgICAjIFNraXAgaWYgYWxyZWFkeSBzZXQgd2l0aCB2YWxpZCB0b2tlbiAodW5sZXNzIHdlIHdhbnQgdG8gcHJlZmVyIHNlY3VyZSBzdG9yYWdlKQogICAgICAgIGlmIFtbIC1uICIkeyF2YXJ9IiAmJiAiJHByZWZlcl9zZWN1cmUiICE9ICJ0cnVlIiBdXTsgdGhlbgogICAgICAgICAgICBjb250aW51ZSAgIyBhbHJlYWR5IHNldCB2aWEgLmVudiBvciBlbnYgdmFyCiAgICAgICAgZmkKCiAgICAgICAgbG9jYWwgdmFsdWU9IiIKICAgICAgICBpZiBbWyAiJE9TVFlQRSIgPT0gImRhcndpbiIqIF1dOyB0aGVuCiAgICAgICAgICAgIHZhbHVlPSQoc2VjdXJpdHkgZmluZC1nZW5lcmljLXBhc3N3b3JkIC1zICJtYWlhc3MiIC1hICIkdmFyIiAtdyAyPi9kZXYvbnVsbCkKICAgICAgICBlbGlmIGNvbW1hbmQgLXYgc2VjcmV0LXRvb2wgPi9kZXYvbnVsbCAyPiYxOyB0aGVuCiAgICAgICAgICAgIHZhbHVlPSQoc2VjcmV0LXRvb2wgbG9va3VwIHNlcnZpY2UgbWFpYXNzIGtleSAiJHZhciIgMj4vZGV2L251bGwpCiAgICAgICAgZmkKCiAgICAgICAgaWYgW1sgLW4gIiR2YWx1ZSIgXV07IHRoZW4KICAgICAgICAgICAgZXhwb3J0ICIkdmFyIj0iJHZhbHVlIgogICAgICAgICAgICBpZiBbWyAiJHByZWZlcl9zZWN1cmUiID09ICJ0cnVlIiBdXTsgdGhlbgogICAgICAgICAgICAgICAgcHJpbnRfZGVidWcgIkRFQlVHOiBSZXBsYWNlZCBpbnZhbGlkIGVudmlyb25tZW50IHRva2VuIHdpdGggc2VjdXJlIHN0b3JhZ2UgdG9rZW4iICJkZWJ1ZyIKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgcHJpbnRfZGVidWcgIkRFQlVHOiBMb2FkZWQgJHZhciBmcm9tIHNlY3VyZSBzdG9yYWdlIiAiZGVidWciCiAgICAgICAgICAgIGZpCiAgICAgICAgZWxpZiBbWyAiJHZhciIgPT0gIk1BSUFTU19BSV9UT0tFTiIgJiYgLXogIiR2YWx1ZSIgJiYgLXogIiR7IXZhcn0iICYmICIkdG9rZW5fcHJvbXB0ZWQiIC1lcSAwIF1dOyB0aGVuCiAgICAgICAgICAgICMgSGFuZGxlIG1pc3NpbmcgQUkgdG9rZW4gLSBjaGVjayBpZiB3ZSBzaG91bGQgYXV0b21hdGljYWxseSBjcmVhdGUgYW5vbnltb3VzIHN1YnNjcmlwdGlvbgogICAgICAgICAgICBpZiBbWyAhIC10IDAgXV07IHRoZW4KICAgICAgICAgICAgICAgIHByaW50X3dhcm5pbmcgIkFJIHRva2VuIG5vdCBmb3VuZCBhbmQgdGVybWluYWwgaXMgbm90IGludGVyYWN0aXZlLiBQbGVhc2Ugc2V0IE1BSUFTU19BSV9UT0tFTiBlbnZpcm9ubWVudCB2YXJpYWJsZS4iCiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBmaQoKICAgICAgICAgICAgIyBDaGVjayBpZiBhdXRvbWF0aWMgYW5vbnltb3VzIHN1YnNjcmlwdGlvbiBpcyBlbmFibGVkIChjaGVjayBlbnYgdmFyIGRpcmVjdGx5KQogICAgICAgICAgICBpZiBbWyAiJHtNQUlBU1NfQUlfSU5WQUxJRF9UT0tFTl9DSE9JQ0VTOi19IiA9PSAiZmFsc2UiIF1dOyB0aGVuCiAgICAgICAgICAgICAgICAjIENoZWNrIGlmIHdlIGFscmVhZHkgdHJpZWQgdG8gY3JlYXRlIGFub255bW91cyBzdWJzY3JpcHRpb24gdGhpcyBzZXNzaW9uCiAgICAgICAgICAgICAgICBpZiBbWyAiJF9NQUlBU1NfQU5PTl9BVFRFTVBURUQiICE9ICJ0cnVlIiBdXTsgdGhlbgogICAgICAgICAgICAgICAgICAgIHByaW50X2luZm8gIk5vIEFJIHRva2VuIGZvdW5kLiBBdXRvbWF0aWNhbGx5IGNyZWF0aW5nIGFub255bW91cyBzdWJzY3JpcHRpb24uLi4iCiAgICAgICAgICAgICAgICAgICAgZXhwb3J0IF9NQUlBU1NfQU5PTl9BVFRFTVBURUQ9InRydWUiCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgIyBXZSBuZWVkIHRvIGNhbGwgdGhlIGFub255bW91cyBzdWJzY3JpcHRpb24gZnVuY3Rpb24sIGJ1dCBpdCdzIGluIGFpLnNoCiAgICAgICAgICAgICAgICAgICAgIyBGb3Igbm93LCBqdXN0IG1hcmsgdGhhdCB3ZSBuZWVkIHRvIGhhbmRsZSB0aGlzIGluIHRoZSBBSSBtb2R1bGUKICAgICAgICAgICAgICAgICAgICBleHBvcnQgX01BSUFTU19ORUVEX0FOT05fVE9LRU49InRydWUiCiAgICAgICAgICAgICAgICAgICAgZXhwb3J0IE1BSUFTU19BSV9UT0tFTj0iIiAgIyBTZXQgZW1wdHkgdG8gdHJpZ2dlciBBSSBtb2R1bGUgaGFuZGxpbmcKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBwcmludF93YXJuaW5nICJBbm9ueW1vdXMgc3Vic2NyaXB0aW9uIGFscmVhZHkgYXR0ZW1wdGVkIHRoaXMgc2Vzc2lvbi4gQUkgZmVhdHVyZXMgd2lsbCBiZSBkaXNhYmxlZC4iCiAgICAgICAgICAgICAgICAgICAgZXhwb3J0IE1BSUFTU19BSV9UT0tFTj0iRElTQUJMRUQiCiAgICAgICAgICAgICAgICBmaQogICAgICAgICAgICBmaQogICAgICAgIGZpCiAgICBkb25lCn0KIyBTdG9yZSBzZW5zaXRpdmUgdmFyaWFibGVzIGluIHNlY3VyZSBzdG9yYWdlCnN0b3JlX3NlY3VyZV92YXJpYWJsZSgpIHsKICAgIGxvY2FsIHZhcl9uYW1lPSIkMSIKICAgIGxvY2FsIHZhcl92YWx1ZT0iJDIiCgogICAgaWYgW1sgIiRPU1RZUEUiID09ICJkYXJ3aW4iKiBdXTsgdGhlbgogICAgICAgIGVjaG8gIiR2YXJfdmFsdWUiIHwgc2VjdXJpdHkgYWRkLWdlbmVyaWMtcGFzc3dvcmQgLVUgLXMgIm1haWFzcyIgLWEgIiR2YXJfbmFtZSIgLXcgLSAyPi9kZXYvbnVsbAogICAgZWxpZiBjb21tYW5kIC12IHNlY3JldC10b29sID4vZGV2L251bGwgMj4mMTsgdGhlbgogICAgICAgIGVjaG8gLW4gIiR2YXJfdmFsdWUiIHwgc2VjcmV0LXRvb2wgc3RvcmUgLS1sYWJlbD0iTUFJQVNTICR2YXJfbmFtZSIgc2VydmljZSBtYWlhc3Mga2V5ICIkdmFyX25hbWUiCiAgICBlbHNlCiAgICAgICAgcHJpbnRfd2FybmluZyAiTm8gc2VjdXJlIHN0b3JhZ2UgYmFja2VuZCBhdmFpbGFibGUiCiAgICAgICAgcmV0dXJuIDEKICAgIGZpCn0KCiMgUmVtb3ZlIHNlbnNpdGl2ZSB2YXJpYWJsZXMgZnJvbSBzZWN1cmUgc3RvcmFnZQpyZW1vdmVfc2VjdXJlX3ZhcmlhYmxlKCkgewogICAgbG9jYWwgdmFyX25hbWU9IiQxIgoKICAgIGlmIFtbICIkT1NUWVBFIiA9PSAiZGFyd2luIiogXV07IHRoZW4KICAgICAgICBzZWN1cml0eSBkZWxldGUtZ2VuZXJpYy1wYXNzd29yZCAtcyAibWFpYXNzIiAtYSAiJHZhcl9uYW1lIiAyPi9kZXYvbnVsbAogICAgZWxpZiBjb21tYW5kIC12IHNlY3JldC10b29sID4vZGV2L251bGwgMj4mMTsgdGhlbgogICAgICAgICMgTm8gZGlyZWN0IGRlbGV0ZSB3aXRoIHNlY3JldC10b29sOyBuZWVkIHRvIHVzZSBrZXlyaW5nIENMSSBvciBsZXQgdXNlciBoYW5kbGUgaXQKICAgICAgICBwcmludF93YXJuaW5nICJSZW1vdmluZyBzZWNyZXRzIGZyb20gTGludXgga2V5cmluZ3MgcmVxdWlyZXMgbWFudWFsIGludGVydmVudGlvbiIKICAgIGVsc2UKICAgICAgICBwcmludF93YXJuaW5nICJObyBzZWN1cmUgc3RvcmFnZSBiYWNrZW5kIGF2YWlsYWJsZSIKICAgICAgICByZXR1cm4gMQogICAgZmkKfQoKZmkgIyBfX1NSQ19fVm9sdW1lc19lbmlnbWFkZXZfZW5pZ21hZGV2X3N0YXRpY19tYWlhc3Nfd2hvbGVfYmFzaG1haWFzc19saWJfY29uZmlnX2VudmFyc19zaAojIC0tLSBFbmQgaW5saW5lZDogL1ZvbHVtZXMvZW5pZ21hZGV2L2VuaWdtYWRldi9zdGF0aWMvbWFpYXNzLXdob2xlL2Jhc2htYWlhc3MvbGliL2NvbmZpZy9lbnZhcnMuc2ggLS0tCgojIExvYWQgZW52aXJvbm1lbnQgdmFyaWFibGVzIHdpdGggbmV3IHByaW9yaXR5IHN5c3RlbQpsb2FkX2Vudmlyb25tZW50X3ZhcmlhYmxlcwoKZXhwb3J0IGlnbm9yZV9sb2NhbF9lbnY9IiR7TUFJQVNTX0lHTk9SRV9MT0NBTF9FTlY6PWZhbHNlfSIKCiMgLS0tIEJlZ2luIGlubGluZWQ6IC9Wb2x1bWVzL2VuaWdtYWRldi9lbmlnbWFkZXYvc3RhdGljL21haWFzcy13aG9sZS9iYXNobWFpYXNzL2xpYi91dGlscy91dGlscy5zaCAtLS0KaWYgW1sgLXogIiR7X19TUkNfX1ZvbHVtZXNfZW5pZ21hZGV2X2VuaWdtYWRldl9zdGF0aWNfbWFpYXNzX3dob2xlX2Jhc2htYWlhc3NfbGliX3V0aWxzX3V0aWxzX3NoOi19IiBdXTsgdGhlbiBfX1NSQ19fVm9sdW1lc19lbmlnbWFkZXZfZW5pZ21hZGV2X3N0YXRpY19tYWlhc3Nfd2hvbGVfYmFzaG1haWFzc19saWJfdXRpbHNfdXRpbHNfc2g9MQoKbWFza19hcGlfa2V5KCkgewogICAgbG9jYWwgYXBpX2tleT0iJDEiCgogICAgIyBDaGVjayBpZiBrZXkgaXMgZW1wdHkgb3IgdG9vIHNob3J0CiAgICBpZiBbWyAteiAiJGFwaV9rZXkiIF1dIHx8IFtbICR7I2FwaV9rZXl9IC1sdCA4IF1dOyB0aGVuCiAgICAgICAgZWNobyAiW0lOVkFMSURfS0VZXSIKICAgICAgICByZXR1cm4KICAgIGZpCgogICAgIyBFeHRyYWN0IGZpcnN0IDQgYW5kIGxhc3QgNCBjaGFyYWN0ZXJzIHVzaW5nIHBhcmFtZXRlciBleHBhbnNpb24KICAgIGxvY2FsIGZpcnN0X2ZvdXI9IiR7YXBpX2tleTowOjR9IgogICAgbG9jYWwgbGFzdF9mb3VyPSIke2FwaV9rZXk6IC00fSIKCiAgICBlY2hvICIke2ZpcnN0X2ZvdXJ9KioqKiR7bGFzdF9mb3VyfSIKfQoKZXNjYXBlX3JlZ2V4KCkgewogICMgRXNjYXBlcyBhbGwgcmVnZXggbWV0YWNoYXJhY3RlcnMKICBlY2hvICIkMSIgfCBzZWQgLWUgJ3MvW11bXC8uXiQqKz8oKXt9fF0vXFwmL2cnCn0KCmdlbmVyYXRlX21hY2hpbmVfZmluZ2VycHJpbnQoKSB7CiAgICBsb2NhbCBjb21wb25lbnRzPSgpCiAgICBsb2NhbCBoYXNfcmVhbF9oYXJkd2FyZV9pbmZvPTAKICAgIGxvY2FsIGZhbGxiYWNrX3VzZWQ9MAoKICAgICMgSGVscGVyIGZ1bmN0aW9uIHRvIHNhZmVseSBnZXQgY29tbWFuZCBvdXRwdXQgd2l0aCBmYWxsYmFjawogICAgc2FmZV9jb21tYW5kKCkgewogICAgICAgIGxvY2FsIGNtZD0iJDEiCiAgICAgICAgbG9jYWwgZmFsbGJhY2s9IiQyIgogICAgICAgIGxvY2FsIG91dHB1dAogICAgICAgIG91dHB1dD0kKCRjbWQgMj4vZGV2L251bGwgfHwgZWNobyAiJGZhbGxiYWNrIikKICAgICAgICAjIENsZWFuIHVwIHRoZSBvdXRwdXQgdG8gYmUgYSBzaW5nbGUgbGluZQogICAgICAgIGVjaG8gIiRvdXRwdXQiIHwgdHIgLWQgJ1xuJyB8IHRyIC1zICcgJyAnICcKICAgIH0KCiAgICAjIEdldCBDUFUgaW5mbwogICAgbG9jYWwgY3B1X2luZm8KICAgIGlmIFtbICIkT1NUWVBFIiA9PSAiZGFyd2luIiogXV07IHRoZW4KICAgICAgICBjcHVfaW5mbz0kKHN5c2N0bCAtbiBtYWNoZGVwLmNwdS5icmFuZF9zdHJpbmcgMj4vZGV2L251bGwgfHwgdW5hbWUgLW0pCiAgICBlbHNlCiAgICAgICAgY3B1X2luZm89JChncmVwIC1tMSAibW9kZWwgbmFtZSIgL3Byb2MvY3B1aW5mbyAyPi9kZXYvbnVsbCB8IGN1dCAtZDogLWYyLSB8IHNlZCAncy9eWyBcdF0qLy8nIHx8IHVuYW1lIC1tKQogICAgZmkKICAgIGNvbXBvbmVudHMrPSgiJHtjcHVfaW5mbzotdW5rbm93bl9jcHV9IikKCiAgICAjIEdldCBtZW1vcnkgaW5mbwogICAgbG9jYWwgbWVtX2luZm8KICAgIGlmIFtbICIkT1NUWVBFIiA9PSAiZGFyd2luIiogXV07IHRoZW4KICAgICAgICBtZW1faW5mbz0kKHN5c2N0bCAtbiBody5tZW1zaXplIDI+L2Rldi9udWxsIHx8IGVjaG8gInVua25vd25fbWVtIikKICAgIGVsc2UKICAgICAgICBtZW1faW5mbz0kKGdyZXAgLW0xICJNZW1Ub3RhbCIgL3Byb2MvbWVtaW5mbyAyPi9kZXYvbnVsbCB8fCBlY2hvICJ1bmtub3duX21lbSIpCiAgICBmaQogICAgY29tcG9uZW50cys9KCIke21lbV9pbmZvfSIpCgogICAgIyBHZXQgaGFyZHdhcmUgaW5mbwogICAgbG9jYWwgaGFyZHdhcmVfaW5mbwogICAgaWYgW1sgIiRPU1RZUEUiID09ICJkYXJ3aW4iKiBdXTsgdGhlbgogICAgICAgIGhhcmR3YXJlX2luZm89JChzeXN0ZW1fcHJvZmlsZXIgU1BIYXJkd2FyZURhdGFUeXBlIDI+L2Rldi9udWxsIHwgZ3JlcCAtRSAiU2VyaWFsIE51bWJlcnxIYXJkd2FyZSBVVUlEIiB8IGhlYWQgLTIgfCB0ciAnXG4nICcgJyB8fCBlY2hvICJ1bmtub3duX2hhcmR3YXJlIikKICAgIGVsc2UKICAgICAgICBoYXJkd2FyZV9pbmZvPSQoZG1pZGVjb2RlIC10IHN5c3RlbSAyPi9kZXYvbnVsbCB8IGdyZXAgLUUgIlNlcmlhbCBOdW1iZXJ8VVVJRCIgfCBoZWFkIC0yIHwgdHIgJ1xuJyAnICcgfHwgZWNobyAidW5rbm93bl9oYXJkd2FyZSIpCiAgICBmaQogICAgY29tcG9uZW50cys9KCIke2hhcmR3YXJlX2luZm99IikKCiAgICAjIEFkZCBhcmNoaXRlY3R1cmUsIHVzZXJuYW1lLCBhbmQgcGxhdGZvcm0KICAgIGNvbXBvbmVudHMrPSgiJCh1bmFtZSAtbSkiKQogICAgY29tcG9uZW50cys9KCIkKHdob2FtaSAyPi9kZXYvbnVsbCB8fCBlY2hvICJ1bmtub3duX3VzZXIiKSIpCiAgICBjb21wb25lbnRzKz0oIiQodW5hbWUgLXMpIikKCiAgICAjIENoZWNrIGlmIHdlIGhhdmUgc3VmZmljaWVudCBoYXJkd2FyZSBpbmZvIGZvciBzZWN1cml0eQogICAgaWYgW1sgIiR7Y29tcG9uZW50c1syXX0iID09ICoidW5rbm93biIqIF1dOyB0aGVuCiAgICAgICAgaGFzX3JlYWxfaGFyZHdhcmVfaW5mbz0wCiAgICAgICAgcHJpbnRfd2FybmluZyAiV0FSTklORzogVXNpbmcgZmFsbGJhY2sgZmluZ2VycHJpbnQgLSBoYXJkd2FyZSBkZXRlY3Rpb24gZmFpbGVkIgogICAgICAgIHByaW50X3dhcm5pbmcgIlRoaXMgbWF5IGFsbG93IGVhc2llciBhYnVzZS4gQ29uc2lkZXIgY2hlY2tpbmcgc3lzdGVtIHBlcm1pc3Npb25zLiIKICAgIGVsc2UKICAgICAgICBoYXNfcmVhbF9oYXJkd2FyZV9pbmZvPTEKICAgIGZpCgogICAgIyBDcmVhdGUgYSBzdGFibGUgaGFzaCBmcm9tIGFsbCBjb21wb25lbnRzCiAgICBsb2NhbCBmaW5nZXJwcmludF9kYXRhCiAgICBmaW5nZXJwcmludF9kYXRhPSQocHJpbnRmICIlc3wiICIke2NvbXBvbmVudHNbQF19IiB8IHRyIC1kICdcbicpCgogICAgIyBEZWJ1ZyBvdXRwdXQgaWYgaW4gZGVidWcgbW9kZQogICAgaWYgW1sgIiRkZWJ1Z19tb2RlIiA9PSAidHJ1ZSIgXV07IHRoZW4KICAgICAgICBwcmludF9kZWJ1ZyAiICBERUJVRzogTWFjaGluZSBmaW5nZXJwcmludCBjb21wb25lbnRzOiIgImRlYnVnIgogICAgICAgIHByaW50X2RlYnVnICIgIENQVTogJHtjb21wb25lbnRzWzBdfSIgImRlYnVnIgogICAgICAgIHByaW50X2RlYnVnICIgIE1lbW9yeTogJHtjb21wb25lbnRzWzFdfSIgImRlYnVnIgogICAgICAgIHByaW50X2RlYnVnICIgIEhhcmR3YXJlOiAke2NvbXBvbmVudHNbMl19IiAiZGVidWciCiAgICAgICAgcHJpbnRfZGVidWcgIiAgQXJjaDogJHtjb21wb25lbnRzWzNdfSIgImRlYnVnIgogICAgICAgIHByaW50X2RlYnVnICIgIFVzZXJuYW1lOiAke2NvbXBvbmVudHNbNF19IiAiZGVidWciCiAgICAgICAgcHJpbnRfZGVidWcgIiAgUGxhdGZvcm06ICR7Y29tcG9uZW50c1s1XX0iICJkZWJ1ZyIKICAgICAgICBwcmludF9kZWJ1ZyAiICBIYXNSZWFsSGFyZHdhcmVJbmZvOiAkaGFzX3JlYWxfaGFyZHdhcmVfaW5mbyIgImRlYnVnIgogICAgZmkKCiAgICAjIEdlbmVyYXRlIFNIQS0yNTYgaGFzaCBpbiBiYXNlNjQKICAgIGxvY2FsIGhhc2gKICAgIGlmIGNvbW1hbmQgLXYgb3BlbnNzbCA+L2Rldi9udWxsIDI+JjE7IHRoZW4KICAgICAgICBoYXNoPSQocHJpbnRmICIlcyIgIiRmaW5nZXJwcmludF9kYXRhIiB8IG9wZW5zc2wgZGdzdCAtc2hhMjU2IC1iaW5hcnkgfCBvcGVuc3NsIGJhc2U2NCB8IHRyIC1kICdcbicpCiAgICBlbGlmIGNvbW1hbmQgLXYgc2hhMjU2c3VtID4vZGV2L251bGwgMj4mMTsgdGhlbgogICAgICAgIGhhc2g9JChwcmludGYgIiVzIiAiJGZpbmdlcnByaW50X2RhdGEiIHwgc2hhMjU2c3VtIHwgY3V0IC1kJyAnIC1mMSB8IHh4ZCAtciAtcCB8IGJhc2U2NCB8IHRyIC1kICdcbicpCiAgICBlbHNlCiAgICAgICAgIyBMYXN0IHJlc29ydCBmYWxsYmFjawogICAgICAgIHByaW50X3dhcm5pbmcgIlNFQ1VSSVRZIFdBUk5JTkc6IFVzaW5nIG1pbmltYWwgZmFsbGJhY2sgZmluZ2VycHJpbnQgKG5vIGhhc2hpbmcgdG9vbHMgYXZhaWxhYmxlKSIKICAgICAgICBsb2NhbCBmYWxsYmFjaz0iJCh1bmFtZSAtcyktJCh1bmFtZSAtbSktJCh3aG9hbWkgMj4vZGV2L251bGwgfHwgZWNobyAidW5rbm93biIpLUZBTExCQUNLIgogICAgICAgIGlmIGNvbW1hbmQgLXYgYmFzZTY0ID4vZGV2L251bGwgMj4mMTsgdGhlbgogICAgICAgICAgICBoYXNoPSQocHJpbnRmICIlcyIgIiRmYWxsYmFjayIgfCBiYXNlNjQgfCB0ciAtZCAnXG4nKQogICAgICAgIGVsc2UKICAgICAgICAgICAgIyBJZiBldmVuIGJhc2U2NCBpcyBub3QgYXZhaWxhYmxlLCBqdXN0IHVzZSB0aGUgc3RyaW5nIGFzIGlzCiAgICAgICAgICAgIGhhc2g9IiRmYWxsYmFjayIKICAgICAgICBmaQogICAgICAgIGZhbGxiYWNrX3VzZWQ9MQogICAgZmkKCiAgICBlY2hvICIkaGFzaCIKICAgIHJldHVybiAkZmFsbGJhY2tfdXNlZAp9CgpmaSAjIF9fU1JDX19Wb2x1bWVzX2VuaWdtYWRldl9lbmlnbWFkZXZfc3RhdGljX21haWFzc193aG9sZV9iYXNobWFpYXNzX2xpYl91dGlsc191dGlsc19zaAojIC0tLSBFbmQgaW5saW5lZDogL1ZvbHVtZXMvZW5pZ21hZGV2L2VuaWdtYWRldi9zdGF0aWMvbWFpYXNzLXdob2xlL2Jhc2htYWlhc3MvbGliL3V0aWxzL3V0aWxzLnNoIC0tLQoKIyAtLS0gQmVnaW4gaW5saW5lZDogL1ZvbHVtZXMvZW5pZ21hZGV2L2VuaWdtYWRldi9zdGF0aWMvbWFpYXNzLXdob2xlL2Jhc2htYWlhc3MvbGliL2NvcmUvbG9nZ2VyLnNoIC0tLQppZiBbWyAteiAiJHtfX1NSQ19fVm9sdW1lc19lbmlnbWFkZXZfZW5pZ21hZGV2X3N0YXRpY19tYWlhc3Nfd2hvbGVfYmFzaG1haWFzc19saWJfY29yZV9sb2dnZXJfc2g6LX0iIF1dOyB0aGVuIF9fU1JDX19Wb2x1bWVzX2VuaWdtYWRldl9lbmlnbWFkZXZfc3RhdGljX21haWFzc193aG9sZV9iYXNobWFpYXNzX2xpYl9jb3JlX2xvZ2dlcl9zaD0xCgpmaSAjIF9fU1JDX19Wb2x1bWVzX2VuaWdtYWRldl9lbmlnbWFkZXZfc3RhdGljX21haWFzc193aG9sZV9iYXNobWFpYXNzX2xpYl9jb3JlX2xvZ2dlcl9zaAojIC0tLSBFbmQgaW5saW5lZDogL1ZvbHVtZXMvZW5pZ21hZGV2L2VuaWdtYWRldi9zdGF0aWMvbWFpYXNzLXdob2xlL2Jhc2htYWlhc3MvbGliL2NvcmUvbG9nZ2VyLnNoIC0tLQoKIyAtLS0gQmVnaW4gaW5saW5lZDogL1ZvbHVtZXMvZW5pZ21hZGV2L2VuaWdtYWRldi9zdGF0aWMvbWFpYXNzLXdob2xlL2Jhc2htYWlhc3MvbGliL2NvcmUvaW5pdC5zaCAtLS0KaWYgW1sgLXogIiR7X19TUkNfX1ZvbHVtZXNfZW5pZ21hZGV2X2VuaWdtYWRldl9zdGF0aWNfbWFpYXNzX3dob2xlX2Jhc2htYWlhc3NfbGliX2NvcmVfaW5pdF9zaDotfSIgXV07IHRoZW4gX19TUkNfX1ZvbHVtZXNfZW5pZ21hZGV2X2VuaWdtYWRldl9zdGF0aWNfbWFpYXNzX3dob2xlX2Jhc2htYWlhc3NfbGliX2NvcmVfaW5pdF9zaD0xCgpleHBvcnQgdG90YWxfdG9rZW5zPScnCmV4cG9ydCBjb21wbGV0aW9uX3Rva2Vucz0nJwpleHBvcnQgcHJvbXB0X3Rva2Vucz0nJwpleHBvcnQgdmVyc2lvbl9wcmltYXJ5X2ZpbGU9IiR7TUFJQVNTX1ZFUlNJT05fUFJJTUFSWV9GSUxFOi19IgpleHBvcnQgdmVyc2lvbl9wcmltYXJ5X3R5cGU9IiR7TUFJQVNTX1ZFUlNJT05fUFJJTUFSWV9UWVBFOi19IgpleHBvcnQgdmVyc2lvbl9wcmltYXJ5X2xpbmVfc3RhcnQ9IiR7TUFJQVNTX1ZFUlNJT05fUFJJTUFSWV9MSU5FX1NUQVJUOi19IgpleHBvcnQgdmVyc2lvbl9zZWNvbmRhcnlfZmlsZXM9IiR7TUFJQVNTX1ZFUlNJT05fU0VDT05EQVJZX0ZJTEVTOi19IgoKIyBGdW5jdGlvbiB0byBsb2FkIE1BSUFTU18qIHZhcmlhYmxlcyBmcm9tIC5lbnYgZmlsZXMKbG9hZF9idW1wc2NyaXB0X2VudigpIHsKICBsb2NhbCBlbnZfZmlsZT0iLmVudi5tYWlhc3MiCgogIGlmIFtbIC1mICIkZW52X2ZpbGUiIF1dOyB0aGVuCiAgICBwcmludF9kZWJ1ZyAiTG9hZGluZyBNQUlBU1NfKiB2YXJpYWJsZXMgZnJvbSAkZW52X2ZpbGUiCgogICAgd2hpbGUgSUZTPSByZWFkIC1yIGxpbmUgfHwgW1sgLW4gIiRsaW5lIiBdXTsgZG8KICAgICAgIyBUcmltIGxlYWRpbmcvdHJhaWxpbmcgd2hpdGVzcGFjZQogICAgICBsaW5lPSIke2xpbmUjIiR7bGluZSUlWyFbOnNwYWNlOl1dKn0ifSIKICAgICAgbGluZT0iJHtsaW5lJSIke2xpbmUjIypbIVs6c3BhY2U6XV19In0iCgogICAgICAjIFNraXAgYmxhbmsgbGluZXMgYW5kIGNvbW1lbnRzCiAgICAgIFtbIC16ICIkbGluZSIgfHwgIiRsaW5lIiA9PSBcIyogXV0gJiYgY29udGludWUKCiAgICAgICMgT25seSBwcm9jZXNzIE1BSUFTU18qIGFzc2lnbm1lbnRzCiAgICAgIGlmIFtbICIkbGluZSIgPX4gXk1BSUFTU18gXV07IHRoZW4KICAgICAgICBsb2NhbCBrZXk9IiR7bGluZSUlPSp9IgogICAgICAgIGxvY2FsIHZhbHVlPSIke2xpbmUjKj19IgoKICAgICAgICAjIFN0cmlwIHN1cnJvdW5kaW5nIG1hdGNoaW5nIHF1b3RlcyB3aXRoIFBPU0lYLXNhZmUgY3V0CiAgICAgICAgaWYgW1sgIiR2YWx1ZSIgPT0gXCIqXCIgJiYgIiR2YWx1ZSIgPT0gKlwiIF1dIHx8IFtbICIkdmFsdWUiID09IFwnKlwnICYmICIkdmFsdWUiID09ICpcJyBdXTsgdGhlbgogICAgICAgICAgdmFsdWU9JChlY2hvICIkdmFsdWUiIHwgY3V0IC1jMi0gfCByZXYgfCBjdXQgLWMyLSB8IHJldikKICAgICAgICBmaQoKICAgICAgICBleHBvcnQgIiRrZXk9JHZhbHVlIgogICAgICAgIHByaW50X2luZm8gIlNldCAka2V5PSR2YWx1ZSIKICAgICAgZmkKICAgIGRvbmUgPCAiJGVudl9maWxlIgogIGZpCn0KCiMgRnVuY3Rpb24gdG8gc2V0IHVwIGJyYW5jaCBhbmQgY2hhbmdlbG9nIHZhcmlhYmxlcyB3aXRoIG92ZXJyaWRlIGxvZ2ljCnNldHVwX2J1bXBzY3JpcHRfdmFyaWFibGVzKCkgewoKICAgICAgIyBJbml0aWFsaXplIGRlYnVnIG1vZGUgZWFybHkgc28gaXQncyBhdmFpbGFibGUgdGhyb3VnaG91dCB0aGUgc2NyaXB0CiAgICAgIGV4cG9ydCBkZWJ1Z19tb2RlPSIke01BSUFTU19ERUJVRzo9ZmFsc2V9IgogICAgICBleHBvcnQgYXV0b3B1c2hfY29tbWl0cz0iJHtNQUlBU1NfQVVUT1BVU0hfQ09NTUlUUzo9ZmFsc2V9IgogICAgICBleHBvcnQgYnJhbmQ9IiR7TUFJQVNTX0JSQU5EOj1NQUlBU1N9IgogICAgICAjIEluaXRpYWxpemUgYnJldml0eSBhbmQgbG9nZ2luZyBjb25maWd1cmF0aW9uIC0gc2V0IGRlYnVnIGZvciB0ZXN0aW5nCiAgICAgIGV4cG9ydCB2ZXJib3NpdHlfbGV2ZWw9IiR7TUFJQVNTX1ZFUkJPU0lUWTo9YnJpZWZ9IgogICAgICBleHBvcnQgZW5hYmxlX2xvZ2dpbmc9IiR7TUFJQVNTX0xPR0dJTkc6PXRydWV9IgogICAgICBleHBvcnQgbG9nX2ZpbGU9IiR7TUFJQVNTX0xPR19GSUxFOj1tYWlhc3MubG9nfSIKICAgICAgZXhwb3J0IGNyZWRpdD0nbnVnw6l0JwogICAgICBleHBvcnQgaGlkZWdpdD0iJHtNQUlBU1NfSElERUdJVDo9dHJ1ZX0iCgogICAgICAjIEluaXRpYWxpemUgQUkgdmFyaWFibGVzIGVhcmx5IHNvIHRoZXkncmUgYXZhaWxhYmxlIHdoZW4gZ2V0X2NvbW1pdF9tZXNzYWdlIGlzIGNhbGxlZAogICAgICBleHBvcnQgYWlfaW52YWxpZF90b2tlbl9jaG9pY2VzPSIke01BSUFTU19BSV9JTlZBTElEX1RPS0VOX0NIT0lDRVM6LWZhbHNlfSIKICAgICAgZXhwb3J0IGFpX21vZGU9IiR7TUFJQVNTX0FJX01PREU6LWFza30iCiAgICAgIHByaW50X2RlYnVnICJERUJVRyBJTklUOiBGaXJzdCBhaV9tb2RlIGFzc2lnbm1lbnQgLSBNQUlBU1NfQUlfTU9ERT0nJHtNQUlBU1NfQUlfTU9ERTotfScsIGFpX21vZGU9JyRhaV9tb2RlJyIKICAgICAgZXhwb3J0IGFpX3Rva2VuPSIke01BSUFTU19BSV9UT0tFTjotfSIKICAgICAgZXhwb3J0IGFpX21vZGVsPSIke01BSUFTU19BSV9NT0RFTDo9Z3B0LTR9IgogICAgICBleHBvcnQgYWlfdGVtcGVyYXR1cmU9IiR7TUFJQVNTX0FJX1RFTVBFUkFUVVJFOj0wLjh9IgogICAgICBleHBvcnQgYWlfbWF4X2NoYXJhY3RlcnM9IiR7TUFJQVNTX0FJX01BWF9DSEFSQUNURVJTOj04MDAwfSIKICAgICAgZXhwb3J0IGFpX2NvbW1pdF9tZXNzYWdlX3N0eWxlPSIke01BSUFTU19BSV9DT01NSVRfTUVTU0FHRV9TVFlMRTo9YnVsbGV0fSIKICAgICAgZXhwb3J0IG1haWFzc19ob3N0PSIke01BSUFTU19BSV9IT1NUOi1odHRwczovL3BvdW5kLm1haWFzcy5uZXR9IgogICAgICBleHBvcnQgbWFpYXNzX2VuZHBvaW50PSIke21haWFzc19ob3N0fS92MS9jaGF0L2NvbXBsZXRpb25zIgogICAgICBleHBvcnQgbWFpYXNzX3Rva2VucmVxdWVzdD0iJHttYWlhc3NfaG9zdH0vdjEvdG9rZW4iCiAgICAgIGV4cG9ydCBtYWlhc3NfdmFsaWRhdGVfZW5kcG9pbnQ9IiR7bWFpYXNzX2hvc3R9L3YxL3ZhbGlkYXRlIgogICAgICAjIExlZ2FjeSBlbmRwb2ludHMgLSBwcm94eSBzaG91bGQgcHJvdmlkZSBwYXltZW50IFVSTHMgZHluYW1pY2FsbHkgd2l0aCBzdWJzY3JpcHRpb25faWQKICAgICAgZXhwb3J0IG1haWFzc19yZWdpc3Rlcl9lbmRwb2ludD0iJHtNQUlBU1NfUkVHSVNURVJfRU5EUE9JTlQ6LWh0dHBzOi8vbWFpYXNzLm5ldC9yZWdpc3Rlcn0iCiAgICAgIGV4cG9ydCBtYWlhc3NfdG9wdXBfZW5kcG9pbnQ9IiR7TUFJQVNTX1RPUFVQX0VORFBPSU5UOi1odHRwczovL21haWFzcy5uZXQvdG9wLXVwfSIKCiAgICAgICMgQ2xpZW50IGlkZW50aXR5L3ZlcnNpb24gZm9yIHByb3h5IG1pbi12ZXJzaW9uIGVuZm9yY2VtZW50CiAgICAgIGV4cG9ydCBjbGllbnRfbmFtZT0iJHtNQUlBU1NfQ0xJRU5UX05BTUU6LWJhc2htYWlhc3N9IgogICAgICBleHBvcnQgY2xpZW50X3ZlcnNpb249IiR7TUFJQVNTX0NMSUVOVF9WRVJTSU9OOi0wLjAuMH0iCgogICAgICAjIEluaXRpYWxpemUgY29uZmlndXJhYmxlIHZlcnNpb24gZmlsZSBzeXN0ZW0KICAgICAgZXhwb3J0IHZlcnNpb25fcHJpbWFyeV9maWxlPSIke01BSUFTU19WRVJTSU9OX1BSSU1BUllfRklMRTotfSIKICAgICAgZXhwb3J0IHZlcnNpb25fcHJpbWFyeV90eXBlPSIke01BSUFTU19WRVJTSU9OX1BSSU1BUllfVFlQRTotfSIKICAgICAgZXhwb3J0IHZlcnNpb25fcHJpbWFyeV9saW5lX3N0YXJ0PSIke01BSUFTU19WRVJTSU9OX1BSSU1BUllfTElORV9TVEFSVDotfSIKICAgICAgZXhwb3J0IHZlcnNpb25fc2Vjb25kYXJ5X2ZpbGVzPSIke01BSUFTU19WRVJTSU9OX1NFQ09OREFSWV9GSUxFUzotfSIKCiAgIyBJbml0aWFsaXplIGJyYW5jaCBuYW1lcyB3aXRoIE1BSUFTU18qIG92ZXJyaWRlcwoKICAjIEJyYW5jaCBuYW1lIGRlZmF1bHRzIHdpdGggTUFJQVNTXyogb3ZlcnJpZGVzCiAgZXhwb3J0IGRldmVsb3BicmFuY2g9IiR7TUFJQVNTX0RFVkVMT1BCUkFOQ0g6LWRldmVsb3B9IgogIGV4cG9ydCBzdGFnaW5nYnJhbmNoPSIke01BSUFTU19TVEFHSU5HQlJBTkNIOi1zdGFnaW5nfSIKICBleHBvcnQgbWFpbmJyYW5jaD0iJHtNQUlBU1NfTUFJTkJSQU5DSDotbWFpbn0iCgogICMgQ2hhbmdlbG9nIGRlZmF1bHRzIHdpdGggTUFJQVNTXyogb3ZlcnJpZGVzCiAgZXhwb3J0IGNoYW5nZWxvZ19wYXRoPSIke01BSUFTU19DSEFOR0VMT0dfUEFUSDotLn0iCiAgZXhwb3J0IGNoYW5nZWxvZ19uYW1lPSIke01BSUFTU19DSEFOR0VMT0dfTkFNRTotQ0hBTkdFTE9HLm1kfSIKICBleHBvcnQgY2hhbmdlbG9nX2ludGVybmFsX25hbWU9IiR7TUFJQVNTX0NIQU5HRUxPR19JTlRFUk5BTF9OQU1FOi0uQ0hBTkdFTE9HX2ludGVybmFsLm1kfSIKCiAgIyBSZXBvc2l0b3J5IHR5cGUgKGZvciBmdXR1cmUgbXVsdGktcmVwbyBzdXBwb3J0KQogIGV4cG9ydCByZXBvX3R5cGU9IiR7TUFJQVNTX1JFUE9fVFlQRTotYmVzcG9rZX0iCgogICMgUGF0aCBjb25maWd1cmF0aW9uIGJhc2VkIG9uIHJlcG9zaXRvcnkgdHlwZQogIGNhc2UgIiRyZXBvX3R5cGUiIGluCiAgICAid29yZHByZXNzLXRoZW1lIikKICAgICAgIyBXb3JkUHJlc3MgdGhlbWU6IHJlcG8gcm9vdCBpcyB0aGUgdGhlbWUgZGlyZWN0b3J5CiAgICAgIGV4cG9ydCB2ZXJzaW9uX2ZpbGVfcGF0aD0iJHtNQUlBU1NfVkVSU0lPTl9QQVRIOi0ufSIKICAgICAgZXhwb3J0IHBhY2thZ2VfanNvbl9wYXRoPSIke01BSUFTU19QQUNLQUdFX1BBVEg6LS59IgogICAgICBleHBvcnQgd29yZHByZXNzX2ZpbGVzX3BhdGg9IiR7TUFJQVNTX1dQX0ZJTEVTX1BBVEg6LS59IgogICAgICA7OwogICAgIndvcmRwcmVzcy1wbHVnaW4iKQogICAgICAjIFdvcmRQcmVzcyBwbHVnaW46IHJlcG8gcm9vdCBpcyB0aGUgcGx1Z2luIGRpcmVjdG9yeQogICAgICBleHBvcnQgdmVyc2lvbl9maWxlX3BhdGg9IiR7TUFJQVNTX1ZFUlNJT05fUEFUSDotLn0iCiAgICAgIGV4cG9ydCBwYWNrYWdlX2pzb25fcGF0aD0iJHtNQUlBU1NfUEFDS0FHRV9QQVRIOi0ufSIKICAgICAgZXhwb3J0IHdvcmRwcmVzc19maWxlc19wYXRoPSIke01BSUFTU19XUF9GSUxFU19QQVRIOi0ufSIKICAgICAgOzsKICAgICJ3b3JkcHJlc3Mtc2l0ZSIpCiAgICAgICMgV29yZFByZXNzIHNpdGU6IHRoZW1lL3BsdWdpbiBpbiBzdWJkaXJlY3RvcnkKICAgICAgZXhwb3J0IHZlcnNpb25fZmlsZV9wYXRoPSIke01BSUFTU19WRVJTSU9OX1BBVEg6LXdwLWNvbnRlbnQvdGhlbWVzL2FjdGl2ZS10aGVtZX0iCiAgICAgIGV4cG9ydCBwYWNrYWdlX2pzb25fcGF0aD0iJHtNQUlBU1NfUEFDS0FHRV9QQVRIOi13cC1jb250ZW50L3RoZW1lcy9hY3RpdmUtdGhlbWV9IgogICAgICBleHBvcnQgd29yZHByZXNzX2ZpbGVzX3BhdGg9IiR7TUFJQVNTX1dQX0ZJTEVTX1BBVEg6LXdwLWNvbnRlbnQvdGhlbWVzL2FjdGl2ZS10aGVtZX0iCiAgICAgIDs7CiAgICAiY3JhZnQiKQogICAgICAjIENyYWZ0IENNUzogdHlwaWNhbGx5IHJlcG8gcm9vdAogICAgICBleHBvcnQgdmVyc2lvbl9maWxlX3BhdGg9IiR7TUFJQVNTX1ZFUlNJT05fUEFUSDotLn0iCiAgICAgIGV4cG9ydCBwYWNrYWdlX2pzb25fcGF0aD0iJHtNQUlBU1NfUEFDS0FHRV9QQVRIOi0ufSIKICAgICAgZXhwb3J0IHdvcmRwcmVzc19maWxlc19wYXRoPSIiICAjIE5vdCBhcHBsaWNhYmxlIGZvciBDcmFmdAogICAgICA7OwogICAgImJlc3Bva2UiKQogICAgICAjIEJlc3Bva2UvY3VzdG9tIGFwcHM6IHR5cGljYWxseSByZXBvIHJvb3QKICAgICAgZXhwb3J0IHZlcnNpb25fZmlsZV9wYXRoPSIke01BSUFTU19WRVJTSU9OX1BBVEg6LS59IgogICAgICBleHBvcnQgcGFja2FnZV9qc29uX3BhdGg9IiR7TUFJQVNTX1BBQ0tBR0VfUEFUSDotLn0iCiAgICAgIGV4cG9ydCB3b3JkcHJlc3NfZmlsZXNfcGF0aD0iIiAgIyBOb3QgYXBwbGljYWJsZSBmb3IgYmVzcG9rZQogICAgICA7OwogICAgKikKICAgICAgIyBEZWZhdWx0IGZhbGxiYWNrCiAgICAgIGV4cG9ydCB2ZXJzaW9uX2ZpbGVfcGF0aD0iJHtNQUlBU1NfVkVSU0lPTl9QQVRIOi0ufSIKICAgICAgZXhwb3J0IHBhY2thZ2VfanNvbl9wYXRoPSIke01BSUFTU19QQUNLQUdFX1BBVEg6LS59IgogICAgICBleHBvcnQgd29yZHByZXNzX2ZpbGVzX3BhdGg9IiR7TUFJQVNTX1dQX0ZJTEVTX1BBVEg6LX0iCiAgICAgIDs7CiAgZXNhYwoKICBwcmludF9kZWJ1ZyAiQnJhbmNoIGNvbmZpZ3VyYXRpb246IiAKICBwcmludF9kZWJ1ZyAiICBEZXZlbG9wOiAkZGV2ZWxvcGJyYW5jaCIKICBwcmludF9kZWJ1ZyAiICBTdGFnaW5nOiAkc3RhZ2luZ2JyYW5jaCIKICBwcmludF9kZWJ1ZyAiICBNYWluOiAkbWFpbmJyYW5jaCIKCiAgcHJpbnRfZGVidWcgIkNoYW5nZWxvZyBjb25maWd1cmF0aW9uOiIKICBwcmludF9kZWJ1ZyAiICBQYXRoOiAkY2hhbmdlbG9nX3BhdGgiCiAgcHJpbnRfZGVidWcgIiAgTWFpbiBjaGFuZ2Vsb2c6ICRjaGFuZ2Vsb2dfbmFtZSIKICBwcmludF9kZWJ1ZyAiICBJbnRlcm5hbCBjaGFuZ2Vsb2c6ICRjaGFuZ2Vsb2dfaW50ZXJuYWxfbmFtZSIKCiAgIyBQdWxsIHJlcXVlc3QgY29uZmlndXJhdGlvbgogIGV4cG9ydCBzdGFnaW5nX3B1bGxyZXF1ZXN0cz0iJHtNQUlBU1NfU1RBR0lOR19QVUxMUkVRVUVTVFM6LW9ufSIKICBleHBvcnQgbWFpbl9wdWxscmVxdWVzdHM9IiR7TUFJQVNTX01BSU5fUFVMTFJFUVVFU1RTOi1vbn0iCgogICMgQXV0by1kZXRlY3QgcmVwb3NpdG9yeSBwcm92aWRlciAoR2l0SHViL0JpdGJ1Y2tldCkgYW5kIGV4dHJhY3QgcmVwbyBpbmZvIGZyb20gZ2l0IHJlbW90ZQogIGxvY2FsIGdpdF9yZW1vdGVfdXJsCiAgZ2l0X3JlbW90ZV91cmw9JChnaXQgcmVtb3RlIGdldC11cmwgb3JpZ2luIDI+L2Rldi9udWxsIHx8IGVjaG8gIiIpCgogICMgSW5pdGlhbGl6ZSByZXBvc2l0b3J5IHZhcmlhYmxlcwogIGV4cG9ydCBSRVBPX1BST1ZJREVSPSIke01BSUFTU19SRVBPX1BST1ZJREVSOi19IgogIGV4cG9ydCBCSVRCVUNLRVRfV09SS1NQQUNFPSIke01BSUFTU19CSVRCVUNLRVRfV09SS1NQQUNFOi19IgogIGV4cG9ydCBCSVRCVUNLRVRfUkVQT19TTFVHPSIke01BSUFTU19CSVRCVUNLRVRfUkVQT19TTFVHOi19IgogIGV4cG9ydCBHSVRIVUJfT1dORVI9IiR7TUFJQVNTX0dJVEhVQl9PV05FUjotfSIKICBleHBvcnQgR0lUSFVCX1JFUE89IiR7TUFJQVNTX0dJVEhVQl9SRVBPOi19IgoKICAjIERldGVjdCBCaXRidWNrZXQKcmVzb2x2ZWRfaG9zdD0kKHNzaCAtRyAiJHtnaXRfcmVtb3RlX3VybCMqQH0iIDI+L2Rldi9udWxsIHwgYXdrICcvXmhvc3RuYW1lIC8geyBwcmludCAkMiB9JykKaWYgW1sgIiRnaXRfcmVtb3RlX3VybCIgPX4gQCguKmJpdGJ1Y2tldFwub3JnKVs6L10oW14vXSspLyhbXi9cLl0rKSBdXTsgdGhlbgogIGV4cG9ydCBSRVBPX1BST1ZJREVSPSJiaXRidWNrZXQiCiAgZXhwb3J0IEJJVEJVQ0tFVF9XT1JLU1BBQ0U9IiR7TUFJQVNTX0JJVEJVQ0tFVF9XT1JLU1BBQ0U6LSR7QkFTSF9SRU1BVENIWzJdfX0iCiAgZXhwb3J0IGNsaWVudD0KZWxpZiBbWyAiJGdpdF9yZW1vdGVfdXJsIiA9fiBAKC4qZ2l0aHViXC5jb20pWzovXShbXi9dKykvKFteL1wuXSspIF1dOyB0aGVuCiAgZXhwb3J0IFJFUE9fUFJPVklERVI9ImdpdGh1YiIKICBleHBvcnQgR0lUSFVCX09XTkVSPSIke01BSUFTU19HSVRIVUJfT1dORVI6LSR7QkFTSF9SRU1BVENIWzJdfX0iCiAgZXhwb3J0IEdJVEhVQl9SRVBPPSIke01BSUFTU19HSVRIVUJfUkVQTzotJHtCQVNIX1JFTUFUQ0hbM119fSIKZmkKCiAgIyBDYWxjdWxhdGUgV29yZFByZXNzIHZlcnNpb24gY29uc3RhbnQgZm9yIHRoZW1lcy9wbHVnaW5zCiAgaWYgW1sgIiRyZXBvX3R5cGUiID09ICJ3b3JkcHJlc3MtdGhlbWUiIHx8ICIkcmVwb190eXBlIiA9PSAid29yZHByZXNzLXBsdWdpbiIgXV07IHRoZW4KICAgIGlmIFtbIC1uICIkd29yZHByZXNzX2ZpbGVzX3BhdGgiIF1dOyB0aGVuCiAgICAgICMgVXNlIHRoZSBmb2xkZXIgbmFtZSAoYmFzZW5hbWUgb2YgdGhlIHdvcmRwcmVzc19maWxlc19wYXRoKQogICAgICBsb2NhbCBmb2xkZXJfbmFtZQogICAgICBmb2xkZXJfbmFtZT0kKGJhc2VuYW1lICIkd29yZHByZXNzX2ZpbGVzX3BhdGgiKQoKICAgICAgaWYgW1sgLW4gIiRmb2xkZXJfbmFtZSIgJiYgIiRmb2xkZXJfbmFtZSIgIT0gIi4iIF1dOyB0aGVuCiAgICAgICAgIyBDb252ZXJ0IGZvbGRlciBuYW1lIHRvIGNvbnN0YW50IGZvcm1hdDogdXBwZXJjYXNlLCByZXBsYWNlIGRhc2hlcyB3aXRoIHVuZGVyc2NvcmVzCiAgICAgICAgbG9jYWwgd3BfY29uc3RhbnQKICAgICAgICB3cF9jb25zdGFudD0kKGVjaG8gIiRmb2xkZXJfbmFtZSIgfCB0ciAnWzpsb3dlcjpdJyAnWzp1cHBlcjpdJyB8IHNlZCAncy8tL18vZycpCiAgICAgICAgZXhwb3J0IHdwVmVyc2lvbkNvbnN0YW50PSIke01BSUFTU19XUF9WRVJTSU9OX0NPTlNUQU5UOi0ke3dwX2NvbnN0YW50fV9SRUxFQVNFX1ZFUlNJT059IgogICAgICBlbHNlCiAgICAgICAgIyBJZiB3b3JkcHJlc3NfZmlsZXNfcGF0aCBpcyAiLiIsIHVzZSB0aGUgY3VycmVudCBkaXJlY3RvcnkgbmFtZQogICAgICAgIGxvY2FsIGN1cnJlbnRfZGlyCiAgICAgICAgY3VycmVudF9kaXI9JChiYXNlbmFtZSAiJChwd2QpIikKICAgICAgICBsb2NhbCB3cF9jb25zdGFudAogICAgICAgIHdwX2NvbnN0YW50PSQoZWNobyAiJGN1cnJlbnRfZGlyIiB8IHRyICdbOmxvd2VyOl0nICdbOnVwcGVyOl0nIHwgc2VkICdzLy0vXy9nJykKICAgICAgICBleHBvcnQgd3BWZXJzaW9uQ29uc3RhbnQ9IiR7TUFJQVNTX1dQX1ZFUlNJT05fQ09OU1RBTlQ6LSR7d3BfY29uc3RhbnR9X1JFTEVBU0VfVkVSU0lPTn0iCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGV4cG9ydCB3cFZlcnNpb25Db25zdGFudD0iJHtNQUlBU1NfV1BfVkVSU0lPTl9DT05TVEFOVDotfSIKICAgIGZpCiAgZWxzZQogICAgZXhwb3J0IHdwVmVyc2lvbkNvbnN0YW50PSIke01BSUFTU19XUF9WRVJTSU9OX0NPTlNUQU5UOi19IgogIGZpCgogIHByaW50X2RlYnVnICJSZXBvc2l0b3J5IHR5cGU6ICRyZXBvX3R5cGUiCiAgcHJpbnRfZGVidWcgIlBhdGggY29uZmlndXJhdGlvbjoiCiAgcHJpbnRfZGVidWcgIiAgVmVyc2lvbiBmaWxlOiAkdmVyc2lvbl9maWxlX3BhdGgiCiAgcHJpbnRfZGVidWcgIiAgUGFja2FnZS5qc29uOiAkcGFja2FnZV9qc29uX3BhdGgiCiAgaWYgW1sgLW4gIiR3b3JkcHJlc3NfZmlsZXNfcGF0aCIgXV07IHRoZW4KICAgIHByaW50X2RlYnVnICIgIFdvcmRQcmVzcyBmaWxlczogJHdvcmRwcmVzc19maWxlc19wYXRoIgogIGZpCgogICMgQUkgY29tbWl0IG1lc3NhZ2UgY29uZmlndXJhdGlvbiAtIERvbid0IG92ZXJyaWRlIGlmIGFscmVhZHkgc2V0CiAgcHJpbnRfZGVidWcgIkRFQlVHIElOSVQ6IEJlZm9yZSBzZWNvbmQgYXNzaWdubWVudCAtIE1BSUFTU19BSV9NT0RFPScke01BSUFTU19BSV9NT0RFOi19JywgY3VycmVudCBhaV9tb2RlPSckYWlfbW9kZSciCiAgaWYgW1sgLXogIiRhaV9tb2RlIiBdXTsgdGhlbgogICAgZXhwb3J0IGFpX21vZGU9IiR7TUFJQVNTX0FJX01PREU6LWFza30iCiAgICBwcmludF9kZWJ1ZyAiREVCVUcgSU5JVDogYWlfbW9kZSB3YXMgZW1wdHksIHNldHRpbmcgdG86ICckYWlfbW9kZSciCiAgZWxzZQogICAgcHJpbnRfZGVidWcgIkRFQlVHIElOSVQ6IGFpX21vZGUgYWxyZWFkeSBzZXQgdG86ICckYWlfbW9kZScsIGtlZXBpbmcgaXQiCiAgZmkKICAKICBleHBvcnQgYWlfdG9rZW49IiR7TUFJQVNTX0FJX1RPS0VOOi19IgogIHByaW50X2RlYnVnICJERUJVRyBJTklUOiBhaV90b2tlbiBsZW5ndGg9JHsjYWlfdG9rZW59IgogIGV4cG9ydCBhaV9tb2RlbD0iJHtNQUlBU1NfQUlfTU9ERUw6LWdwdC0zLjUtdHVyYm99IgoKICAjIERldGVybWluZSB0aGUgQUkgY29tbWl0IG1lc3NhZ2Ugc3R5bGUKICBpZiBbWyAtbiAiJE1BSUFTU19BSV9DT01NSVRfTUVTU0FHRV9TVFlMRSIgXV07IHRoZW4KICAgIGFpX2NvbW1pdF9zdHlsZT0iJE1BSUFTU19BSV9DT01NSVRfTUVTU0FHRV9TVFlMRSIKICAgIHByaW50X2RlYnVnICJVc2luZyBBSSBjb21taXQgc3R5bGUgZnJvbSAuZW52OiAkYWlfY29tbWl0X3N0eWxlIgogIGVsaWYgW1sgLWYgIi5tYWlhc3MucHJvbXB0IiBdXTsgdGhlbgogICAgYWlfY29tbWl0X3N0eWxlPSJjdXN0b20iCiAgICBwcmludF9kZWJ1ZyAiTm8gc3R5bGUgc2V0IGluIC5lbnY7IHVzaW5nIGxvY2FsIHByb21wdCBmaWxlOiAubWFpYXNzLnByb21wdCIKICBlbGlmIFtbIC1mICIkSE9NRS8ubWFpYXNzLnByb21wdCIgXV07IHRoZW4KICAgIGFpX2NvbW1pdF9zdHlsZT0iZ2xvYmFsX2N1c3RvbSIKICAgIHByaW50X2RlYnVnICJObyBzdHlsZSBzZXQgaW4gLmVudjsgdXNpbmcgZ2xvYmFsIHByb21wdCBmaWxlOiB+Ly5tYWlhc3MucHJvbXB0IgogIGVsc2UKICAgIGFpX2NvbW1pdF9zdHlsZT0iYnVsbGV0IgogICAgcHJpbnRfZGVidWcgIk5vIHN0eWxlIG9yIHByb21wdCBmaWxlcyBmb3VuZDsgZGVmYXVsdGluZyB0byAnYnVsbGV0JyIKICBmaQoKICBleHBvcnQgYWlfY29tbWl0X3N0eWxlCgogIGV4cG9ydCBkZWJ1Z19tb2RlPSIke01BSUFTU19ERUJVRzotZmFsc2V9IgoKICAjIFZhbGlkYXRlIEFJIGNvbmZpZ3VyYXRpb24gLSBwcmV2ZW50IGFzay9hdXRvc3VnZ2VzdCBtb2RlcyB3aXRob3V0IHRva2VuCiAgcHJpbnRfZGVidWcgIkRFQlVHIElOSVQ6IEFJIG1vZGUgc2V0IHRvICckYWlfbW9kZScgLSB0b2tlbiB2YWxpZGF0aW9uIHdpbGwgaGFwcGVuIHdoZW4gQUkgZmVhdHVyZXMgYXJlIHVzZWQiCiAgCiAgcHJpbnRfZGVidWcgIkRFQlVHIElOSVQ6IEZpbmFsIGFpX21vZGU9JyRhaV9tb2RlJyIKCiAgcHJpbnRfZGVidWcgIkludGVncmF0aW9uIGNvbmZpZ3VyYXRpb246IgogIHByaW50X2RlYnVnICIgIFN0YWdpbmcgcHVsbCByZXF1ZXN0czogJHN0YWdpbmdfcHVsbHJlcXVlc3RzIgogIHByaW50X2RlYnVnICIgIE1haW4gcHVsbCByZXF1ZXN0czogJG1haW5fcHVsbHJlcXVlc3RzIgogIHByaW50X2RlYnVnICIgIEFJIGNvbW1pdCBtZXNzYWdlczogJGFpX21vZGUiCiAgaWYgW1sgIiRhaV9tb2RlIiAhPSAib2ZmIiAmJiAtbiAiJGFpX3Rva2VuIiBdXTsgdGhlbgogICAgcHJpbnRfZGVidWcgIiAgQUkgbW9kZWw6ICRhaV9tb2RlbCIKICAgIHByaW50X2RlYnVnICIgIEFJIHRlbXBlcmF0dXJlOiAkYWlfdGVtcGVyYXR1cmUiCiAgICBwcmludF9kZWJ1ZyAiICBBSSBNYXggY29tbWl0IGNoYXJhY3RlcnM6ICRhaV9tYXhfY2hhcmFjdGVycyIKICAgIHByaW50X2RlYnVnICIgIEFJIGNvbW1pdCBzdHlsZTogJGFpX2NvbW1pdF9zdHlsZSIKICBmaQogIGlmIFtbICIkUkVQT19QUk9WSURFUiIgPT0gImJpdGJ1Y2tldCIgJiYgLW4gIiRCSVRCVUNLRVRfV09SS1NQQUNFIiBdXTsgdGhlbgogICAgcHJpbnRfZGVidWcgIiAgUmVwb3NpdG9yeTogQml0YnVja2V0ICgkQklUQlVDS0VUX1dPUktTUEFDRS8kQklUQlVDS0VUX1JFUE9fU0xVRykiCiAgICBleHBvcnQgY2xpZW50PSIkQklUQlVDS0VUX1dPUktTUEFDRSIKICAgIGV4cG9ydCBwcm9qZWN0PSIkQklUQlVDS0VUX1JFUE9fU0xVRyIKICBlbGlmIFtbICIkUkVQT19QUk9WSURFUiIgPT0gImdpdGh1YiIgJiYgLW4gIiRHSVRIVUJfT1dORVIiIF1dOyB0aGVuCiAgICBwcmludF9kZWJ1ZyAiICBSZXBvc2l0b3J5OiBHaXRIdWIgKCRHSVRIVUJfT1dORVIvJEdJVEhVQl9SRVBPKSIKICAgIGV4cG9ydCBjbGllbnQ9IiRHSVRIVUJfT1dORVIiCiAgICBleHBvcnQgcHJvamVjdD0iJEdJVEhVQl9SRVBPIgogIGZpCiAgaWYgW1sgLW4gIiR3cFZlcnNpb25Db25zdGFudCIgXV07IHRoZW4KICAgIHByaW50X2RlYnVnICIgIFdvcmRQcmVzcyB2ZXJzaW9uIGNvbnN0YW50OiAkd3BWZXJzaW9uQ29uc3RhbnQiCiAgZmkKfQoKZmkgIyBfX1NSQ19fVm9sdW1lc19lbmlnbWFkZXZfZW5pZ21hZGV2X3N0YXRpY19tYWlhc3Nfd2hvbGVfYmFzaG1haWFzc19saWJfY29yZV9pbml0X3NoCiMgLS0tIEVuZCBpbmxpbmVkOiAvVm9sdW1lcy9lbmlnbWFkZXYvZW5pZ21hZGV2L3N0YXRpYy9tYWlhc3Mtd2hvbGUvYmFzaG1haWFzcy9saWIvY29yZS9pbml0LnNoIC0tLQoKIyAtLS0gQmVnaW4gaW5saW5lZDogL1ZvbHVtZXMvZW5pZ21hZGV2L2VuaWdtYWRldi9zdGF0aWMvbWFpYXNzLXdob2xlL2Jhc2htYWlhc3MvbGliL2NvcmUvdmVyc2lvbi5zaCAtLS0KaWYgW1sgLXogIiR7X19TUkNfX1ZvbHVtZXNfZW5pZ21hZGV2X2VuaWdtYWRldl9zdGF0aWNfbWFpYXNzX3dob2xlX2Jhc2htYWlhc3NfbGliX2NvcmVfdmVyc2lvbl9zaDotfSIgXV07IHRoZW4gX19TUkNfX1ZvbHVtZXNfZW5pZ21hZGV2X2VuaWdtYWRldl9zdGF0aWNfbWFpYXNzX3dob2xlX2Jhc2htYWlhc3NfbGliX2NvcmVfdmVyc2lvbl9zaD0xCgojIHNldHMgdmFsdWUgdG8gJGN1cnJlbnR2ZXJzaW9uIGFuZCBuZXd2ZXJzaW9uLgojIHVzYWdlOiBnZXRWZXJzaW9uIFttYWpvcnxtaW5vcnxwYXRjaHxzcGVjaWZpY192ZXJzaW9uXQojIGlmIHRoZSBzZWNvbmQgYXJndW1lbnQgaXMgbm90IHNldCwgYnVtcHMgdGhlIHBhdGNoIHZlcnNpb24KCiMgSGVscGVyIGZ1bmN0aW9uIHRvIHJlYWQgdmVyc2lvbiBmcm9tIGEgZmlsZSBiYXNlZCBvbiB0eXBlIGFuZCBsaW5lIHN0YXJ0CnJlYWRfdmVyc2lvbl9mcm9tX2ZpbGUoKSB7CiAgICBsb2NhbCBmaWxlPSIkMSIKICAgIGxvY2FsIGZpbGVfdHlwZT0iJDIiCiAgICBsb2NhbCBsaW5lX3N0YXJ0PSIkMyIKICAgIGxvY2FsIHZlcnNpb249IiIKCiAgICBpZiBbWyAhIC1mICIkZmlsZSIgXV07IHRoZW4KICAgICAgICByZXR1cm4gMQogICAgZmkKCiAgICBjYXNlICIkZmlsZV90eXBlIiBpbgogICAgICAgICJqc29uIikKICAgICAgICAgICAgIyBKU09OIGZpbGUgLSBsb29rIGZvciAidmVyc2lvbiIgcHJvcGVydHkKICAgICAgICAgICAgaWYgY29tbWFuZCAtdiBqcSA+L2Rldi9udWxsIDI+JjE7IHRoZW4KICAgICAgICAgICAgICAgIHZlcnNpb249JChqcSAtciAnLnZlcnNpb24nICIkZmlsZSIgMj4vZGV2L251bGwpCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICMgRmFsbGJhY2sgbWV0aG9kIHVzaW5nIGdyZXAgYW5kIHNlZAogICAgICAgICAgICAgICAgdmVyc2lvbj0kKGdyZXAgJyJ2ZXJzaW9uIicgIiRmaWxlIiB8IGhlYWQgLTEgfCBzZWQgJ3MvLioidmVyc2lvbiJbWzpzcGFjZTpdXSo6W1s6c3BhY2U6XV0qIlwoW14iXSpcKSIuKi9cMS8nKQogICAgICAgICAgICBmaQogICAgICAgICAgICA7OwogICAgICAgICJ0eHQiKQogICAgICAgICAgICAjIFRleHQgZmlsZSAtIGxvb2sgZm9yIGxpbmUgc3RhcnRpbmcgd2l0aCBzcGVjaWZpZWQgcHJlZml4CiAgICAgICAgICAgIGlmIFtbIC1uICIkbGluZV9zdGFydCIgXV07IHRoZW4KICAgICAgICAgICAgICAgIHZlcnNpb249JChncmVwICJeJHtsaW5lX3N0YXJ0fSIgIiRmaWxlIiB8IGhlYWQgLTEgfCBzZWQgInMvXiR7bGluZV9zdGFydH0vLyIgfCBzZWQgJ3MvXltbOnNwYWNlOl1dKi8vJyB8IHNlZCAncy9bWzpzcGFjZTpdXSokLy8nKQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAjIElmIG5vIGxpbmUgc3RhcnQgc3BlY2lmaWVkLCBhc3N1bWUgZW50aXJlIGZpbGUgY29udGVudCBpcyB0aGUgdmVyc2lvbgogICAgICAgICAgICAgICAgdmVyc2lvbj0kKGNhdCAiJGZpbGUiIHwgdHIgLWQgJ1xuXHInKQogICAgICAgICAgICBmaQogICAgICAgICAgICA7OwogICAgICAgICJwYXR0ZXJuIikKICAgICAgICAgICAgIyBQYXR0ZXJuLWJhc2VkIG1hdGNoaW5nIC0gZXh0cmFjdCB2ZXJzaW9uIGZyb20gcmVnZXggcGF0dGVybgogICAgICAgICAgICAjIGxpbmVfc3RhcnQgY29udGFpbnMgdGhlIHBhdHRlcm4gd2l0aCB7dmVyc2lvbn0gcGxhY2Vob2xkZXIKICAgICAgICAgICAgaWYgW1sgLW4gIiRsaW5lX3N0YXJ0IiBdXTsgdGhlbgogICAgICAgICAgICAgICAgIyBGb3IgUEhQIGRlZmluZSBzdGF0ZW1lbnRzLCBleHRyYWN0IHRoZSB2ZXJzaW9uIGRpcmVjdGx5CiAgICAgICAgICAgICAgICBpZiBbWyAiJGxpbmVfc3RhcnQiID09ICoiZGVmaW5lKCIqIF1dOyB0aGVuCiAgICAgICAgICAgICAgICAgICAgIyBFeHRyYWN0IGNvbnN0YW50IG5hbWUgZnJvbSBwYXR0ZXJuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY29uc3RfbmFtZQogICAgICAgICAgICAgICAgICAgIGNvbnN0X25hbWU9JChlY2hvICIkbGluZV9zdGFydCIgfCBzZWQgInMvLipkZWZpbmUoJ1woW14nXSpcKScuKi9cMS8iIHwgc2VkICJzLy4qZGVmaW5lKFwiXChbXlwiXSpcKVwiLiovXDEvIikKICAgICAgICAgICAgICAgICAgICBpZiBbWyAtbiAiJGNvbnN0X25hbWUiIF1dOyB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICMgRmluZCB0aGUgZGVmaW5lIGxpbmUgYW5kIGV4dHJhY3QgdmVyc2lvbgogICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uPSQoZ3JlcCAiZGVmaW5lKCcke2NvbnN0X25hbWV9JyIgIiRmaWxlIiB8IHNlZCAicy8uKidbXiddKidbWzpzcGFjZTpdXSosW1s6c3BhY2U6XV0qJ1woW14nXSpcKScuKi9cMS8iKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBbWyAteiAiJHZlcnNpb24iIF1dOyB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uPSQoZ3JlcCAiZGVmaW5lKFwiJHtjb25zdF9uYW1lfVwiIiAiJGZpbGUiIHwgc2VkICJzLy4qXCJbXlwiXSpcIltbOnNwYWNlOl1dKixbWzpzcGFjZTpdXSpcIlwoW15cIl0qXClcIi4qL1wxLyIpCiAgICAgICAgICAgICAgICAgICAgICAgIGZpCiAgICAgICAgICAgICAgICAgICAgZmkKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAjIEdlbmVyaWMgcGF0dGVybiBtYXRjaGluZyAtIHJlcGxhY2Uge3ZlcnNpb259IHdpdGggY2FwdHVyZSBncm91cAogICAgICAgICAgICAgICAgICAgIGxvY2FsIHNlYXJjaF9wYXR0ZXJuCiAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3BhdHRlcm49JChlY2hvICIkbGluZV9zdGFydCIgfCBzZWQgInMve3ZlcnNpb259L1xcKFteJ1wiXSpcXCkvZyIpCiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbj0kKHNlZCAtbiAicy8uKiR7c2VhcmNoX3BhdHRlcm59LiovXDEvcCIgIiRmaWxlIiB8IGhlYWQgLTEpCiAgICAgICAgICAgICAgICBmaQogICAgICAgICAgICBmaQogICAgICAgICAgICA7OwogICAgICAgICopCiAgICAgICAgICAgIHByaW50X2Vycm9yICJVbnN1cHBvcnRlZCBmaWxlIHR5cGU6ICRmaWxlX3R5cGUiCiAgICAgICAgICAgIHJldHVybiAxCiAgICAgICAgICAgIDs7CiAgICBlc2FjCgogICAgaWYgW1sgLW4gIiR2ZXJzaW9uIiAmJiAiJHZlcnNpb24iICE9ICJudWxsIiBdXTsgdGhlbgogICAgICAgIGVjaG8gIiR2ZXJzaW9uIgogICAgICAgIHJldHVybiAwCiAgICBlbHNlCiAgICAgICAgcmV0dXJuIDEKICAgIGZpCn0KCiMgSGVscGVyIGZ1bmN0aW9uIHRvIHVwZGF0ZSB2ZXJzaW9uIGluIGEgZmlsZSBiYXNlZCBvbiB0eXBlIGFuZCBsaW5lIHN0YXJ0CnVwZGF0ZV92ZXJzaW9uX2luX2ZpbGUoKSB7CiAgICBsb2NhbCBmaWxlPSIkMSIKICAgIGxvY2FsIGZpbGVfdHlwZT0iJDIiCiAgICBsb2NhbCBsaW5lX3N0YXJ0PSIkMyIKICAgIGxvY2FsIG5ld192ZXJzaW9uPSIkNCIKCiAgICBpZiBbWyAhIC1mICIkZmlsZSIgXV07IHRoZW4KICAgICAgICBwcmludF93YXJuaW5nICJGaWxlIG5vdCBmb3VuZDogJGZpbGUiCiAgICAgICAgcmV0dXJuIDEKICAgIGZpCgogICAgY2FzZSAiJGZpbGVfdHlwZSIgaW4KICAgICAgICAianNvbiIpCiAgICAgICAgICAgICMgSlNPTiBmaWxlIC0gdXBkYXRlICJ2ZXJzaW9uIiBwcm9wZXJ0eQogICAgICAgICAgICBpZiBjb21tYW5kIC12IGpxID4vZGV2L251bGwgMj4mMTsgdGhlbgogICAgICAgICAgICAgICAganEgIi52ZXJzaW9uID0gXCIkbmV3X3ZlcnNpb25cIiIgIiRmaWxlIiA+ICIke2ZpbGV9LnRtcCIgJiYgbXYgIiR7ZmlsZX0udG1wIiAiJGZpbGUiCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICMgRmFsbGJhY2sgdG8gc2VkCiAgICAgICAgICAgICAgICBzZWRfaW5wbGFjZSAicy9cInZlcnNpb25cIjogXCIuKlwiL1widmVyc2lvblwiOiBcIiRuZXdfdmVyc2lvblwiLyIgIiRmaWxlIgogICAgICAgICAgICBmaQogICAgICAgICAgICA7OwogICAgICAgICJ0eHQiKQogICAgICAgICAgICAjIFRleHQgZmlsZSAtIHVwZGF0ZSBsaW5lIHN0YXJ0aW5nIHdpdGggc3BlY2lmaWVkIHByZWZpeAogICAgICAgICAgICBpZiBbWyAtbiAiJGxpbmVfc3RhcnQiIF1dOyB0aGVuCgogICAgICAgICAgICAgICAgYXdrIC12IHByZWZpeD0iJGxpbmVfc3RhcnQiIC12IHZlcnNpb249IiRuZXdfdmVyc2lvbiIgJwogICAgICAgICAgICAgICAgICBCRUdJTiB7IGxlbiA9IGxlbmd0aChwcmVmaXgpIH0KICAgICAgICAgICAgICAgICAgc3Vic3RyKCQwLCAxLCBsZW4pID09IHByZWZpeCB7IHByaW50IHByZWZpeCB2ZXJzaW9uOyBuZXh0IH0KICAgICAgICAgICAgICAgICAgeyBwcmludCB9CiAgICAgICAgICAgICAgICAnICIkZmlsZSIgPiAiJHtmaWxlfS50bXAiICYmIG12ICIke2ZpbGV9LnRtcCIgIiRmaWxlIgogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAjIElmIG5vIGxpbmUgc3RhcnQgc3BlY2lmaWVkLCByZXBsYWNlIGVudGlyZSBmaWxlIGNvbnRlbnQKICAgICAgICAgICAgICAgIGVjaG8gIiRuZXdfdmVyc2lvbiIgPiAiJGZpbGUiCiAgICAgICAgICAgIGZpCiAgICAgICAgICAgIDs7CiAgICAgICAgInBhdHRlcm4iKQogICAgICAgICAgICAjIFBhdHRlcm4tYmFzZWQgcmVwbGFjZW1lbnQgLSByZXBsYWNlIHZlcnNpb24gaW4gcmVnZXggcGF0dGVybgogICAgICAgICAgICAjIGxpbmVfc3RhcnQgY29udGFpbnMgdGhlIHBhdHRlcm4gd2l0aCB7dmVyc2lvbn0gcGxhY2Vob2xkZXIKICAgICAgICAgICAgaWYgW1sgLW4gIiRsaW5lX3N0YXJ0IiBdXTsgdGhlbgogICAgICAgICAgICAgICAgIyBGb3IgUEhQIGRlZmluZSBzdGF0ZW1lbnRzLCB1c2UgYSBzcGVjaWZpYyBhcHByb2FjaAogICAgICAgICAgICAgICAgaWYgW1sgIiRsaW5lX3N0YXJ0IiA9PSAqImRlZmluZSgiKiBdXTsgdGhlbgogICAgICAgICAgICAgICAgICAgICMgRXh0cmFjdCB0aGUgY29uc3RhbnQgbmFtZSBmcm9tIHRoZSBwYXR0ZXJuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY29uc3RfbmFtZQogICAgICAgICAgICAgICAgICAgIGNvbnN0X25hbWU9JChlY2hvICIkbGluZV9zdGFydCIgfCBzZWQgInMvLipkZWZpbmUoJ1woW14nXSpcKScuKi9cMS8iIHwgc2VkICJzLy4qZGVmaW5lKFwiXChbXlwiXSpcKVwiLiovXDEvIikKICAgICAgICAgICAgICAgICAgICBpZiBbWyAtbiAiJGNvbnN0X25hbWUiIF1dOyB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICMgUmVwbGFjZSBQSFAgZGVmaW5lIHN0YXRlbWVudCB3aXRoIG5ldyB2ZXJzaW9uCiAgICAgICAgICAgICAgICAgICAgICAgIHNlZF9pbnBsYWNlICJzL2RlZmluZSgnJHtjb25zdF9uYW1lfSdbWzpzcGFjZTpdXSosW1s6c3BhY2U6XV0qJ1teJ10qJykvZGVmaW5lKCcke2NvbnN0X25hbWV9JywnJHtuZXdfdmVyc2lvbn0nKS9nIiAiJGZpbGUiCiAgICAgICAgICAgICAgICAgICAgICAgIHNlZF9pbnBsYWNlICJzL2RlZmluZShcIiR7Y29uc3RfbmFtZX1cIltbOnNwYWNlOl1dKixbWzpzcGFjZTpdXSpcIlteXCJdKlwiKS9kZWZpbmUoXCIke2NvbnN0X25hbWV9XCIsXCIke25ld192ZXJzaW9ufVwiKS9nIiAiJGZpbGUiCiAgICAgICAgICAgICAgICAgICAgZmkKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAjIEdlbmVyaWMgcGF0dGVybiByZXBsYWNlbWVudCAtIHJlcGxhY2Uge3ZlcnNpb259IHdpdGggbmV3IHZlcnNpb24KICAgICAgICAgICAgICAgICAgICBsb2NhbCByZXBsYWNlbWVudF90ZXh0CiAgICAgICAgICAgICAgICAgICAgcmVwbGFjZW1lbnRfdGV4dD0kKGVjaG8gIiRsaW5lX3N0YXJ0IiB8IHNlZCAicy97dmVyc2lvbn0vJG5ld192ZXJzaW9uL2ciKQogICAgICAgICAgICAgICAgICAgICMgQ3JlYXRlIGEgcGF0dGVybiB0byBtYXRjaCB0aGUgc3RydWN0dXJlIChyZXBsYWNlIHt2ZXJzaW9ufSB3aXRoIHdpbGRjYXJkKQogICAgICAgICAgICAgICAgICAgIGxvY2FsIG1hdGNoX3BhdHRlcm4KICAgICAgICAgICAgICAgICAgICBtYXRjaF9wYXR0ZXJuPSQoZWNobyAiJGxpbmVfc3RhcnQiIHwgc2VkICJzL3t2ZXJzaW9ufS8uKi9nIiB8IHNlZCAncy9bW1wvLlwqXiQoKSs/e3xdL1xcJi9nJykKICAgICAgICAgICAgICAgICAgICAjIFJlcGxhY2UgbWF0Y2hpbmcgbGluZXMKICAgICAgICAgICAgICAgICAgICBzZWRfaW5wbGFjZSAicy8ke21hdGNoX3BhdHRlcm59LyR7cmVwbGFjZW1lbnRfdGV4dH0vZyIgIiRmaWxlIgogICAgICAgICAgICAgICAgZmkKICAgICAgICAgICAgZmkKICAgICAgICAgICAgOzsKICAgICAgICAqKQogICAgICAgICAgICBwcmludF9lcnJvciAiVW5zdXBwb3J0ZWQgZmlsZSB0eXBlOiAkZmlsZV90eXBlIgogICAgICAgICAgICByZXR1cm4gMQogICAgICAgICAgICA7OwogICAgZXNhYwoKICAgIHJldHVybiAwCn0KCiMgSGVscGVyIGZ1bmN0aW9uIHRvIHBhcnNlIHNlY29uZGFyeSB2ZXJzaW9uIGZpbGVzIGNvbmZpZ3VyYXRpb24KcGFyc2Vfc2Vjb25kYXJ5X3ZlcnNpb25fZmlsZXMoKSB7CiAgICBsb2NhbCBjb25maWc9IiQxIgogICAgbG9jYWwgLWEgZmlsZXNfYXJyYXkKCiAgICBpZiBbWyAteiAiJGNvbmZpZyIgXV07IHRoZW4KICAgICAgICByZXR1cm4gMAogICAgZmkKCiAgICBJRlM9J3wnIHJlYWQgLXJhIGZpbGVzX2FycmF5IDw8PCAiJGNvbmZpZyIKCiAgICBmb3IgZmlsZV9jb25maWcgaW4gIiR7ZmlsZXNfYXJyYXlbQF19IjsgZG8KICAgICAgICBpZiBbWyAtbiAiJGZpbGVfY29uZmlnIiBdXTsgdGhlbgogICAgICAgICAgICBJRlM9JzonIHJlYWQgLXJhIGNvbmZpZ19wYXJ0cyA8PDwgIiRmaWxlX2NvbmZpZyIKICAgICAgICAgICAgbG9jYWwgZmlsZT0iJHtjb25maWdfcGFydHNbMF19IgogICAgICAgICAgICBsb2NhbCB0eXBlPSIke2NvbmZpZ19wYXJ0c1sxXTotdHh0fSIKICAgICAgICAgICAgbG9jYWwgbGluZV9zdGFydD0iJHtjb25maWdfcGFydHNbMl06LX0iCgogICAgICAgICAgICBpZiBbWyAtZiAiJGZpbGUiIF1dOyB0aGVuCiAgICAgICAgICAgICAgICBlY2hvICIkZmlsZTokdHlwZTokbGluZV9zdGFydCIKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgZWNobyAiU2tpcHBpbmcgJGZpbGUgKG5vdCBmb3VuZCkiID4mMgogICAgICAgICAgICBmaQogICAgICAgIGZpCiAgICBkb25lCn0KCiMgQ29tcGFyZSB0d28gc2VtYW50aWMgdmVyc2lvbiBzdHJpbmdzCiMgUmV0dXJucyAwICh0cnVlKSBpZiB2ZXJzaW9uMSA+IHZlcnNpb24yLCAxIChmYWxzZSkgb3RoZXJ3aXNlCnZlcnNpb25faXNfZ3JlYXRlcigpIHsKICAgIGxvY2FsIHZlcnNpb24xPSIkMSIKICAgIGxvY2FsIHZlcnNpb24yPSIkMiIKCiAgICAjIFNwbGl0IHZlcnNpb25zIGludG8gbWFqb3IubWlub3IucGF0Y2ggY29tcG9uZW50cwogICAgbG9jYWwgdjFfbWFqb3IKICAgIGxvY2FsIHYxX21pbm9yCiAgICBsb2NhbCB2MV9wYXRjaAogICAgbG9jYWwgdjJfbWFqb3IKICAgIGxvY2FsIHYyX21pbm9yCiAgICBsb2NhbCB2Ml9wYXRjaAoKICAgIHYxX21ham9yPSQoZWNobyAiJHZlcnNpb24xIiB8IGN1dCAtZC4gLWYxKQogICAgdjFfbWlub3I9JChlY2hvICIkdmVyc2lvbjEiIHwgY3V0IC1kLiAtZjIpCiAgICB2MV9wYXRjaD0kKGVjaG8gIiR2ZXJzaW9uMSIgfCBjdXQgLWQuIC1mMykKCiAgICB2Ml9tYWpvcj0kKGVjaG8gIiR2ZXJzaW9uMiIgfCBjdXQgLWQuIC1mMSkKICAgIHYyX21pbm9yPSQoZWNobyAiJHZlcnNpb24yIiB8IGN1dCAtZC4gLWYyKQogICAgdjJfcGF0Y2g9JChlY2hvICIkdmVyc2lvbjIiIHwgY3V0IC1kLiAtZjMpCgogICAgIyBDb21wYXJlIG1ham9yIHZlcnNpb24KICAgIGlmIFsgIiR2MV9tYWpvciIgLWd0ICIkdjJfbWFqb3IiIF07IHRoZW4KICAgICAgICByZXR1cm4gMCAgIyB2ZXJzaW9uMSA+IHZlcnNpb24yCiAgICBlbGlmIFsgIiR2MV9tYWpvciIgLWx0ICIkdjJfbWFqb3IiIF07IHRoZW4KICAgICAgICByZXR1cm4gMSAgIyB2ZXJzaW9uMSA8IHZlcnNpb24yCiAgICBmaQoKICAgICMgTWFqb3IgdmVyc2lvbnMgYXJlIGVxdWFsLCBjb21wYXJlIG1pbm9yIHZlcnNpb24KICAgIGlmIFsgIiR2MV9taW5vciIgLWd0ICIkdjJfbWlub3IiIF07IHRoZW4KICAgICAgICByZXR1cm4gMCAgIyB2ZXJzaW9uMSA+IHZlcnNpb24yCiAgICBlbGlmIFsgIiR2MV9taW5vciIgLWx0ICIkdjJfbWlub3IiIF07IHRoZW4KICAgICAgICByZXR1cm4gMSAgIyB2ZXJzaW9uMSA8IHZlcnNpb24yCiAgICBmaQoKICAgICMgTWFqb3IgYW5kIG1pbm9yIHZlcnNpb25zIGFyZSBlcXVhbCwgY29tcGFyZSBwYXRjaCB2ZXJzaW9uCiAgICBpZiBbICIkdjFfcGF0Y2giIC1ndCAiJHYyX3BhdGNoIiBdOyB0aGVuCiAgICAgICAgcmV0dXJuIDAgICMgdmVyc2lvbjEgPiB2ZXJzaW9uMgogICAgZWxzZQogICAgICAgIHJldHVybiAxICAjIHZlcnNpb24xIDw9IHZlcnNpb24yCiAgICBmaQp9CgpmdW5jdGlvbiBnZXRWZXJzaW9uKCl7CiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgQ29weXJpZ2h0IChjKSAyMDI1IFZlbHZhcnkgUHR5IEx0ZAojIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiMgVGhpcyBmdW5jdGlvbiBpcyBwYXJ0IG9mIHRoZSBWZWx2YXJ5IGJhc2ggc2NyaXB0cyBsaWJyYXJ5LgojIExpY2Vuc2VkIHVuZGVyIHRoZSBFbmQgVXNlciBMaWNlbnNlIEFncmVlbWVudCAoZXVsYS50eHQpIHByb3ZpZGVkIHdpdGggdGhpcyBzb2Z0d2FyZS4KIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGxvY2FsIHZlcnNpb25fYXJnPSIkMSIgICMgbWFqb3IsIG1pbm9yLCBwYXRjaCwgb3Igc3BlY2lmaWMgdmVyc2lvbgoKICAgICMgSW5pdGlhbGl6ZSBnbG9iYWwgdmFyaWFibGVzIChjb21wYXRpYmxlIHdpdGggb2xkZXIgYmFzaCB2ZXJzaW9ucykKICAgIHZlcnNpb25fc291cmNlPSIiCiAgICB2ZXJzaW9uX3NvdXJjZV9maWxlPSIiCiAgICB2ZXJzaW9uX3NvdXJjZV90eXBlPSIiCiAgICB2ZXJzaW9uX3NvdXJjZV9saW5lX3N0YXJ0PSIiCiAgICBjdXJyZW50dmVyc2lvbj0iIgogICAgbmV3dmVyc2lvbj0iIgoKICAgIHByaW50X2RlYnVnICJEZXRlcm1pbmluZyBWZXJzaW9uIFNvdXJjZSIKCiAgICAjIENoZWNrIGZvciBjdXN0b20gcHJpbWFyeSB2ZXJzaW9uIGZpbGUgZmlyc3QKICAgIGlmIFtbIC1uICIkdmVyc2lvbl9wcmltYXJ5X2ZpbGUiICYmIC1uICIkdmVyc2lvbl9wcmltYXJ5X3R5cGUiIF1dOyB0aGVuCiAgICAgICAgcHJpbnRfZGVidWcgIkNoZWNraW5nIGN1c3RvbSBwcmltYXJ5IHZlcnNpb24gZmlsZTogJHZlcnNpb25fcHJpbWFyeV9maWxlIgogICAgICAgIGlmIGN1cnJlbnR2ZXJzaW9uPSQocmVhZF92ZXJzaW9uX2Zyb21fZmlsZSAiJHZlcnNpb25fcHJpbWFyeV9maWxlIiAiJHZlcnNpb25fcHJpbWFyeV90eXBlIiAiJHZlcnNpb25fcHJpbWFyeV9saW5lX3N0YXJ0Iik7IHRoZW4KICAgICAgICAgICAgcHJpbnRfZGVidWcgIkZvdW5kIGN1c3RvbSBwcmltYXJ5IHZlcnNpb24gZmlsZTogJHZlcnNpb25fcHJpbWFyeV9maWxlIC0gdXNpbmcgYXMgdmVyc2lvbiBzb3VyY2UiCiAgICAgICAgICAgIHZlcnNpb25fc291cmNlPSJjdXN0b21fcHJpbWFyeSIKICAgICAgICAgICAgdmVyc2lvbl9zb3VyY2VfZmlsZT0iJHZlcnNpb25fcHJpbWFyeV9maWxlIgogICAgICAgICAgICB2ZXJzaW9uX3NvdXJjZV90eXBlPSIkdmVyc2lvbl9wcmltYXJ5X3R5cGUiCiAgICAgICAgICAgIHZlcnNpb25fc291cmNlX2xpbmVfc3RhcnQ9IiR2ZXJzaW9uX3ByaW1hcnlfbGluZV9zdGFydCIKICAgICAgICBlbHNlCiAgICAgICAgICAgIHByaW50X2Vycm9yICJDb3VsZCBub3QgcmVhZCB2ZXJzaW9uIGZyb20gY3VzdG9tIHByaW1hcnkgZmlsZTogJHZlcnNpb25fcHJpbWFyeV9maWxlIgogICAgICAgICAgICByZXR1cm4gMQogICAgICAgIGZpCiAgICAjIEZhbGxiYWNrIHRvIHBhY2thZ2UuanNvbiAobGVnYWN5IGJlaGF2aW9yKQogICAgZWxpZiBbIC1mICIke3BhY2thZ2VfanNvbl9wYXRofS9wYWNrYWdlLmpzb24iIF07IHRoZW4KICAgICAgICBsb2NhbCBwYWNrYWdlX2pzb25fZmlsZT0iJHtwYWNrYWdlX2pzb25fcGF0aH0vcGFja2FnZS5qc29uIgogICAgICAgIHByaW50X2RlYnVnICJGb3VuZCBwYWNrYWdlLmpzb24gYXQgJHBhY2thZ2VfanNvbl9maWxlIC0gdXNpbmcgYXMgdmVyc2lvbiBzb3VyY2UiCiAgICAgICAgdmVyc2lvbl9zb3VyY2U9InBhY2thZ2UuanNvbiIKICAgICAgICB2ZXJzaW9uX3NvdXJjZV9maWxlPSIkcGFja2FnZV9qc29uX2ZpbGUiCiAgICAgICAgdmVyc2lvbl9zb3VyY2VfdHlwZT0ianNvbiIKICAgICAgICB2ZXJzaW9uX3NvdXJjZV9saW5lX3N0YXJ0PSIiCgogICAgICAgIGlmIGN1cnJlbnR2ZXJzaW9uPSQocmVhZF92ZXJzaW9uX2Zyb21fZmlsZSAiJHBhY2thZ2VfanNvbl9maWxlIiAianNvbiIgIiIpOyB0aGVuCiAgICAgICAgICAgIDogIyBTdWNjZXNzLCBjdXJyZW50dmVyc2lvbiBpcyBzZXQKICAgICAgICBlbHNlCiAgICAgICAgICAgIHByaW50X2Vycm9yICJDb3VsZCBub3QgcmVhZCB2ZXJzaW9uIGZyb20gcGFja2FnZS5qc29uLiBFeGl0aW5nLiIKICAgICAgICAgICAgcmV0dXJuIDEKICAgICAgICBmaQogICAgIyBGYWxsYmFjayB0byBWRVJTSU9OIGZpbGUgKGxlZ2FjeSBiZWhhdmlvcikKICAgIGVsaWYgWyAtZiAiJHZlcnNpb25fZmlsZV9wYXRoL1ZFUlNJT04iIF07IHRoZW4KICAgICAgICBwcmludF9pbmZvICJObyBwYWNrYWdlLmpzb24gZm91bmQgLSB1c2luZyBWRVJTSU9OIGZpbGUgYXQgJHZlcnNpb25fZmlsZV9wYXRoL1ZFUlNJT04iCiAgICAgICAgdmVyc2lvbl9zb3VyY2U9IlZFUlNJT04iCiAgICAgICAgdmVyc2lvbl9zb3VyY2VfZmlsZT0iJHZlcnNpb25fZmlsZV9wYXRoL1ZFUlNJT04iCiAgICAgICAgdmVyc2lvbl9zb3VyY2VfdHlwZT0idHh0IgogICAgICAgIHZlcnNpb25fc291cmNlX2xpbmVfc3RhcnQ9IiIKCiAgICAgICAgaWYgY3VycmVudHZlcnNpb249JChyZWFkX3ZlcnNpb25fZnJvbV9maWxlICIkdmVyc2lvbl9maWxlX3BhdGgvVkVSU0lPTiIgInR4dCIgIiIpOyB0aGVuCiAgICAgICAgICAgIDogIyBTdWNjZXNzLCBjdXJyZW50dmVyc2lvbiBpcyBzZXQKICAgICAgICBlbHNlCiAgICAgICAgICAgIHByaW50X2Vycm9yICJWRVJTSU9OIGZpbGUgaXMgZW1wdHkuIEV4aXRpbmcuIgogICAgICAgICAgICByZXR1cm4gMQogICAgICAgIGZpCiAgICBlbHNlCiAgICAgICAgcHJpbnRfZXJyb3IgIk5vIHZlcnNpb24gc291cmNlIGZvdW5kISBQbGVhc2UgY3JlYXRlIGVpdGhlcjoiCiAgICAgICAgaWYgW1sgLW4gIiR2ZXJzaW9uX3ByaW1hcnlfZmlsZSIgXV07IHRoZW4KICAgICAgICAgICAgcHJpbnRfZXJyb3IgIiAgLSBDdXN0b20gcHJpbWFyeSB2ZXJzaW9uIGZpbGU6ICR2ZXJzaW9uX3ByaW1hcnlfZmlsZSwgb3IiCiAgICAgICAgZmkKICAgICAgICBwcmludF9lcnJvciAiICAtIHBhY2thZ2UuanNvbiBhdCAkcGFja2FnZV9qc29uX3BhdGgvcGFja2FnZS5qc29uIHdpdGggdmVyc2lvbiBmaWVsZCwgb3IiCiAgICAgICAgcHJpbnRfZXJyb3IgIiAgLSBWRVJTSU9OIGZpbGUgYXQgJHZlcnNpb25fZmlsZV9wYXRoL1ZFUlNJT04iCiAgICAgICAgcmV0dXJuIDEKICAgIGZpCgogICAgIyBDYWxjdWxhdGUgbmV3IHZlcnNpb24gYmFzZWQgb24gYXJndW1lbnQKICAgIGlmIFsgLXogIiR2ZXJzaW9uX2FyZyIgXTsgdGhlbgogICAgICAgcHJpbnRfaW5mbyAiTm8gdmVyc2lvbiBzcGVjaWZpZWQsIGJ1bXBpbmcgcGF0Y2ggdmVyc2lvbi4uLiIKICAgICAgIG5ld3ZlcnNpb249JChlY2hvICIkY3VycmVudHZlcnNpb24iIHwgYXdrIC1GLiAneyRORiA9ICRORiArIDE7fSAxJyB8IHNlZCAncy8gLy4vZycpCiAgICBlbHNlCiAgICAgICAgcHJpbnRfaW5mbyAiU2V0dGluZyB2ZXJzaW9uIGJhc2VkIG9uIGFyZ3VtZW50OiAkdmVyc2lvbl9hcmciCiAgICAgICAgaWYgWyAiJHZlcnNpb25fYXJnIiA9PSAibWFqb3IiIF07IHRoZW4KICAgICAgICAgICAgbmV3dmVyc2lvbj0kKGVjaG8gIiRjdXJyZW50dmVyc2lvbiIgfCBhd2sgLUYuICd7JDEgPSAkMSArIDE7ICQyID0gMDsgJDMgPSAwO30gMScgfCBzZWQgJ3MvIC8uL2cnKQogICAgICAgIGVsaWYgWyAiJHZlcnNpb25fYXJnIiA9PSAibWlub3IiIF07IHRoZW4KICAgICAgICAgICAgbmV3dmVyc2lvbj0kKGVjaG8gIiRjdXJyZW50dmVyc2lvbiIgfCBhd2sgLUYuICd7JDIgPSAkMiArIDE7ICQzID0gMDt9IDEnIHwgc2VkICdzLyAvLi9nJykKICAgICAgICBlbGlmIFsgIiR2ZXJzaW9uX2FyZyIgPT0gInBhdGNoIiBdOyB0aGVuCiAgICAgICAgICAgIG5ld3ZlcnNpb249JChlY2hvICIkY3VycmVudHZlcnNpb24iIHwgYXdrIC1GLiAneyQzID0gJDMgKyAxO30gMScgfCBzZWQgJ3MvIC8uL2cnKQogICAgICAgIGVsc2UKICAgICAgICAgICAgIyBWYWxpZGF0ZSBzcGVjaWZpYyB2ZXJzaW9uIGZvcm1hdCAoWC5ZLlopCiAgICAgICAgICAgIGlmIFtbICEgIiR2ZXJzaW9uX2FyZyIgPX4gXlswLTldK1wuWzAtOV0rXC5bMC05XSskIF1dOyB0aGVuCiAgICAgICAgICAgICAgICBwcmludF9lcnJvciAiSW52YWxpZCB2ZXJzaW9uIGZvcm1hdDogJHZlcnNpb25fYXJnIgogICAgICAgICAgICAgICAgcHJpbnRfZXJyb3IgIlZlcnNpb24gbXVzdCBiZSBpbiBtYWpvci5taW5vci5wYXRjaCBmb3JtYXQgKGUuZy4sIDEuMi4zKSIKICAgICAgICAgICAgICAgIHJldHVybiAxCiAgICAgICAgICAgIGZpCgogICAgICAgICAgICAjIEdldCBsYXRlc3QgdmVyc2lvbiBmcm9tIGdpdCB0YWdzIGZvciBjb21wYXJpc29uCiAgICAgICAgICAgIGxvY2FsIGxhdGVzdF90YWdfdmVyc2lvbgogICAgICAgICAgICBsYXRlc3RfdGFnX3ZlcnNpb249JChnZXRfbGF0ZXN0X3ZlcnNpb25fZnJvbV90YWdzKQoKICAgICAgICAgICAgaWYgW1sgLW4gIiRsYXRlc3RfdGFnX3ZlcnNpb24iIF1dOyB0aGVuCiAgICAgICAgICAgICAgICBwcmludF9pbmZvICJMYXRlc3QgZ2l0IHRhZyB2ZXJzaW9uOiAkbGF0ZXN0X3RhZ192ZXJzaW9uIgogICAgICAgICAgICAgICAgIyBDaGVjayBpZiBuZXcgdmVyc2lvbiBpcyBncmVhdGVyIHRoYW4gbGF0ZXN0IHRhZwogICAgICAgICAgICAgICAgaWYgISB2ZXJzaW9uX2lzX2dyZWF0ZXIgIiR2ZXJzaW9uX2FyZyIgIiRsYXRlc3RfdGFnX3ZlcnNpb24iOyB0aGVuCiAgICAgICAgICAgICAgICAgICAgcHJpbnRfZXJyb3IgIlZlcnNpb24gJHZlcnNpb25fYXJnIGlzIGxvd2VyIHRoYW4gbGF0ZXN0IHZlcnNpb24gJGxhdGVzdF90YWdfdmVyc2lvbiIKICAgICAgICAgICAgICAgICAgICBlY2hvICJXb3VsZCB5b3UgbGlrZSB0bzoiCiAgICAgICAgICAgICAgICAgICAgZWNobyAiMSkgQnVtcCB0aGUgcGF0Y2ggdmVyc2lvbiAoJHtsYXRlc3RfdGFnX3ZlcnNpb259IOKGkiAkKGVjaG8gIiRsYXRlc3RfdGFnX3ZlcnNpb24iIHwgYXdrIC1GLiAneyQzID0gJDMgKyAxO30gMScgfCBzZWQgJ3MvIC8uL2cnKSkiCiAgICAgICAgICAgICAgICAgICAgZWNobyAiMikgVHJ5IGVudGVyaW5nIGFub3RoZXIgdmVyc2lvbiBudW1iZXIiCiAgICAgICAgICAgICAgICAgICAgZWNobyAiMykgRXhpdCAoZGVmYXVsdCkiCiAgICAgICAgICAgICAgICAgICAgcmVhZCAtcCAiJChlY2hvIC1lICR7QkN5YW59RW50ZXIgY2hvaWNlIFsxLzIvM106ICR7Q29sb3JfT2ZmfSkiIGNob2ljZQoKICAgICAgICAgICAgICAgICAgICBjYXNlICIkY2hvaWNlIiBpbgogICAgICAgICAgICAgICAgICAgICAgICAxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3dmVyc2lvbj0kKGVjaG8gIiRsYXRlc3RfdGFnX3ZlcnNpb24iIHwgYXdrIC1GLiAneyQzID0gJDMgKyAxO30gMScgfCBzZWQgJ3MvIC8uL2cnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRfc3VjY2VzcyAiVXNpbmcgcGF0Y2ggYnVtcDogJG5ld3ZlcnNpb24iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA7OwogICAgICAgICAgICAgICAgICAgICAgICAyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZCAtcCAiJChlY2hvIC1lICR7QkN5YW59RW50ZXIgbmV3IHZlcnNpb246ICR7Q29sb3JfT2ZmfSkiIG5ld19pbnB1dAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgW1sgLW4gIiRuZXdfaW5wdXQiIF1dOyB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBSZWN1cnNpdmVseSBjYWxsIGdldFZlcnNpb24gd2l0aCBuZXcgaW5wdXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRWZXJzaW9uICIkbmV3X2lucHV0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkPwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50X2Vycm9yICJObyB2ZXJzaW9uIGVudGVyZWQuIEV4aXRpbmcuIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaQogICAgICAgICAgICAgICAgICAgICAgICAgICAgOzsKICAgICAgICAgICAgICAgICAgICAgICAgKikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50X2Vycm9yICJFeGl0aW5nLiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA7OwogICAgICAgICAgICAgICAgICAgIGVzYWMKICAgICAgICAgICAgICAgIGZpCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICMgTm8gZ2l0IHRhZ3MgZXhpc3QgeWV0IC0gdGhpcyBpcyB0aGUgZmlyc3QgdmVyc2lvbiB0YWcKICAgICAgICAgICAgICAgIHByaW50X2luZm8gIk5vIHZlcnNpb24gdGFncyBmb3VuZCBpbiByZXBvc2l0b3J5IgogICAgICAgICAgICAgICAgcHJpbnRfaW5mbyAiVGhpcyB3aWxsIGJlIHRoZSBmaXJzdCB2ZXJzaW9uIHRhZzogJHZlcnNpb25fYXJnIgogICAgICAgICAgICAgICAgIyBDb21wYXJlIGFnYWluc3QgY3VycmVudCB2ZXJzaW9uIGluIGZpbGUgdG8gZW5zdXJlIHdlJ3JlIG5vdCBnb2luZyBiYWNrd2FyZHMKICAgICAgICAgICAgICAgIGlmICEgdmVyc2lvbl9pc19ncmVhdGVyICIkdmVyc2lvbl9hcmciICIkY3VycmVudHZlcnNpb24iOyB0aGVuCiAgICAgICAgICAgICAgICAgICAgcHJpbnRfd2FybmluZyAiU3BlY2lmaWVkIHZlcnNpb24gJHZlcnNpb25fYXJnIGlzIG5vdCBncmVhdGVyIHRoYW4gY3VycmVudCBmaWxlIHZlcnNpb24gJGN1cnJlbnR2ZXJzaW9uIgogICAgICAgICAgICAgICAgICAgIGVjaG8gIldvdWxkIHlvdSBsaWtlIHRvOiIKICAgICAgICAgICAgICAgICAgICBlY2hvICIxKSBVc2UgY3VycmVudCBmaWxlIHZlcnNpb24gYW5kIGJ1bXAgcGF0Y2ggKCR7Y3VycmVudHZlcnNpb259IOKGkiAkKGVjaG8gIiRjdXJyZW50dmVyc2lvbiIgfCBhd2sgLUYuICd7JDMgPSAkMyArIDE7fSAxJyB8IHNlZCAncy8gLy4vZycpKSIKICAgICAgICAgICAgICAgICAgICBlY2hvICIyKSBUcnkgZW50ZXJpbmcgYW5vdGhlciB2ZXJzaW9uIG51bWJlciIKICAgICAgICAgICAgICAgICAgICBlY2hvICIzKSBDb250aW51ZSB3aXRoICR2ZXJzaW9uX2FyZyBhbnl3YXkiCiAgICAgICAgICAgICAgICAgICAgZWNobyAiNCkgRXhpdCAoZGVmYXVsdCkiCiAgICAgICAgICAgICAgICAgICAgcmVhZCAtcCAiJChlY2hvIC1lICR7QkN5YW59RW50ZXIgY2hvaWNlIFsxLzIvMy80XTogJHtDb2xvcl9PZmZ9KSIgY2hvaWNlCgogICAgICAgICAgICAgICAgICAgIGNhc2UgIiRjaG9pY2UiIGluCiAgICAgICAgICAgICAgICAgICAgICAgIDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXd2ZXJzaW9uPSQoZWNobyAiJGN1cnJlbnR2ZXJzaW9uIiB8IGF3ayAtRi4gJ3skMyA9ICQzICsgMTt9IDEnIHwgc2VkICdzLyAvLi9nJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50X3N1Y2Nlc3MgIlVzaW5nIGZpbGUgdmVyc2lvbiBwYXRjaCBidW1wOiAkbmV3dmVyc2lvbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDs7CiAgICAgICAgICAgICAgICAgICAgICAgIDIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkIC1wICIkKGVjaG8gLWUgJHtCQ3lhbn1FbnRlciBuZXcgdmVyc2lvbjogJHtDb2xvcl9PZmZ9KSIgbmV3X2lucHV0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBbWyAtbiAiJG5ld19pbnB1dCIgXV07IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIFJlY3Vyc2l2ZWx5IGNhbGwgZ2V0VmVyc2lvbiB3aXRoIG5ldyBpbnB1dAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldFZlcnNpb24gIiRuZXdfaW5wdXQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQ/CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRfZXJyb3IgIk5vIHZlcnNpb24gZW50ZXJlZC4gRXhpdGluZy4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA7OwogICAgICAgICAgICAgICAgICAgICAgICAzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRfaW5mbyAiQ29udGludWluZyB3aXRoIHZlcnNpb24gJHZlcnNpb25fYXJnIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3dmVyc2lvbj0iJHZlcnNpb25fYXJnIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgOzsKICAgICAgICAgICAgICAgICAgICAgICAgKikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50X2luZm8gIkV4aXRpbmcuIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDs7CiAgICAgICAgICAgICAgICAgICAgZXNhYwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIG5ld3ZlcnNpb249IiR2ZXJzaW9uX2FyZyIKICAgICAgICAgICAgICAgIGZpCiAgICAgICAgICAgIGZpCiAgICAgICAgZmkKICAgIGZpCgogICAgcHJpbnRfaW5mbyAiVmVyc2lvbiBzb3VyY2U6ICR7QldoaXRlfSR2ZXJzaW9uX3NvdXJjZSR7Q29sb3JfT2ZmfSIKICAgIHByaW50X2luZm8gIkN1cnJlbnQgdmVyc2lvbjogJHtCV2hpdGV9JGN1cnJlbnR2ZXJzaW9uJHtDb2xvcl9PZmZ9IgogICAgcHJpbnRfc3VjY2VzcyAiTmV3IHZlcnNpb246ICR7QldoaXRlfSRuZXd2ZXJzaW9uJHtDb2xvcl9PZmZ9Igp9CgpmdW5jdGlvbiBidW1wVmVyc2lvbigpIHsKICAgICMgaWYgJG5ld3ZlcnNpb24gaXMgbm90IHNldCwgZXhpdCB3aXRoIGFuIGVycm9yCiAgICBpZiBbIC16ICIkbmV3dmVyc2lvbiIgXTsgdGhlbgogICAgICAgIHByaW50X2Vycm9yICJObyBuZXcgdmVyc2lvbiBzZXQuIEV4aXRpbmcuIgogICAgICAgIGV4aXQgMQogICAgZmkKCiAgICAjIGlmICR2ZXJzaW9uX3NvdXJjZSBpcyBub3Qgc2V0LCBleGl0IHdpdGggYW4gZXJyb3IKICAgIGlmIFsgLXogIiR2ZXJzaW9uX3NvdXJjZSIgXTsgdGhlbgogICAgICAgIHByaW50X2Vycm9yICJObyB2ZXJzaW9uIHNvdXJjZSBkZXRlcm1pbmVkLiBQbGVhc2UgcnVuIGdldFZlcnNpb24gZmlyc3QuIEV4aXRpbmcuIgogICAgICAgIGV4aXQgMQogICAgZmkKCiAgICBwcmludF9kZWJ1ZyAiVXBkYXRpbmcgVmVyc2lvbiBOdW1iZXJzIgoKICAgICMgVXBkYXRlIHRoZSBwcmltYXJ5IHZlcnNpb24gc291cmNlIGZpcnN0CiAgICBpZiBbICIkdmVyc2lvbl9zb3VyY2UiID0gImN1c3RvbV9wcmltYXJ5IiBdOyB0aGVuCiAgICAgICAgcHJpbnRfaW5mbyAiVXBkYXRpbmcgY3VzdG9tIHByaW1hcnkgdmVyc2lvbiBzb3VyY2U6ICR2ZXJzaW9uX3NvdXJjZV9maWxlLi4uIgogICAgICAgIHdhc19leGVjdXRhYmxlPSQodGVzdCAteCAiJHZlcnNpb25fc291cmNlX2ZpbGUiICYmIGVjaG8gInllcyIgfHwgZWNobyAibm8iKQoKICAgICAgICBpZiB1cGRhdGVfdmVyc2lvbl9pbl9maWxlICIkdmVyc2lvbl9zb3VyY2VfZmlsZSIgIiR2ZXJzaW9uX3NvdXJjZV90eXBlIiAiJHZlcnNpb25fc291cmNlX2xpbmVfc3RhcnQiICIkbmV3dmVyc2lvbiI7IHRoZW4KICAgICAgICAgICAgaWYgW1sgIiR3YXNfZXhlY3V0YWJsZSIgPT0gInllcyIgXV07IHRoZW4KICAgICAgICAgICAgICAgIGNobW9kICt4ICIkdmVyc2lvbl9zb3VyY2VfZmlsZSIKICAgICAgICAgICAgICAgIHByaW50X2luZm8gIlJlc3RvcmVkICt4IG9uICR2ZXJzaW9uX3NvdXJjZV9maWxlIgogICAgICAgICAgICBmaQogICAgICAgICAgICBwcmludF9zdWNjZXNzICJVcGRhdGVkIHZlcnNpb24gdG8gJG5ld3ZlcnNpb24gaW4gJHZlcnNpb25fc291cmNlX2ZpbGUiCiAgICAgICAgZWxzZQogICAgICAgICAgICBwcmludF9lcnJvciAiRmFpbGVkIHRvIHVwZGF0ZSB2ZXJzaW9uIGluICR2ZXJzaW9uX3NvdXJjZV9maWxlIgogICAgICAgICAgICBleGl0IDEKICAgICAgICBmaQogICAgZWxpZiBbICIkdmVyc2lvbl9zb3VyY2UiID0gInBhY2thZ2UuanNvbiIgXTsgdGhlbgogICAgICAgIHByaW50X2luZm8gIlVwZGF0aW5nIHByaW1hcnkgdmVyc2lvbiBzb3VyY2U6IHBhY2thZ2UuanNvbi4uLiIKICAgICAgICBsb2NhbCBwYWNrYWdlX2pzb25fZmlsZT0iJHtwYWNrYWdlX2pzb25fcGF0aH0vcGFja2FnZS5qc29uIgogICAgICAgIGlmIHVwZGF0ZV92ZXJzaW9uX2luX2ZpbGUgIiRwYWNrYWdlX2pzb25fZmlsZSIgImpzb24iICIiICIkbmV3dmVyc2lvbiI7IHRoZW4KICAgICAgICAgICAgcHJpbnRfc3VjY2VzcyAiVXBkYXRlZCB2ZXJzaW9uIHRvICRuZXd2ZXJzaW9uIGluIHBhY2thZ2UuanNvbiIKICAgICAgICBlbHNlCiAgICAgICAgICAgIHByaW50X2Vycm9yICJGYWlsZWQgdG8gdXBkYXRlIHZlcnNpb24gaW4gcGFja2FnZS5qc29uIgogICAgICAgICAgICBleGl0IDEKICAgICAgICBmaQoKICAgICAgICAjIEFsc28gdXBkYXRlIFZFUlNJT04gZmlsZSBpZiBpdCBleGlzdHMgKGZvciBjb21wYXRpYmlsaXR5KQogICAgICAgIGlmIFsgLWYgIiR2ZXJzaW9uX2ZpbGVfcGF0aC9WRVJTSU9OIiBdOyB0aGVuCiAgICAgICAgICAgIHByaW50X2luZm8gIlVwZGF0aW5nIFZFUlNJT04gZmlsZSBmb3IgY29tcGF0aWJpbGl0eS4uLiIKICAgICAgICAgICAgaWYgdXBkYXRlX3ZlcnNpb25faW5fZmlsZSAiJHZlcnNpb25fZmlsZV9wYXRoL1ZFUlNJT04iICJ0eHQiICIiICIkbmV3dmVyc2lvbiI7IHRoZW4KICAgICAgICAgICAgICAgIHByaW50X3N1Y2Nlc3MgIlVwZGF0ZWQgdmVyc2lvbiB0byAkbmV3dmVyc2lvbiBpbiBWRVJTSU9OIGZpbGUiCiAgICAgICAgICAgIGZpCiAgICAgICAgZmkKICAgIGVsc2UKICAgICAgICAjIFZFUlNJT04gZmlsZSBpcyB0aGUgcHJpbWFyeSBzb3VyY2UKICAgICAgICBwcmludF9pbmZvICJVcGRhdGluZyBwcmltYXJ5IHZlcnNpb24gc291cmNlOiBWRVJTSU9OIGZpbGUuLi4iCiAgICAgICAgaWYgdXBkYXRlX3ZlcnNpb25faW5fZmlsZSAiJHZlcnNpb25fZmlsZV9wYXRoL1ZFUlNJT04iICJ0eHQiICIiICIkbmV3dmVyc2lvbiI7IHRoZW4KICAgICAgICAgICAgcHJpbnRfc3VjY2VzcyAiVXBkYXRlZCB2ZXJzaW9uIHRvICRuZXd2ZXJzaW9uIGluIFZFUlNJT04gZmlsZSIKICAgICAgICBlbHNlCiAgICAgICAgICAgIHByaW50X2Vycm9yICJGYWlsZWQgdG8gdXBkYXRlIHZlcnNpb24gaW4gVkVSU0lPTiBmaWxlIgogICAgICAgICAgICBleGl0IDEKICAgICAgICBmaQoKICAgICAgICAjIEFsc28gdXBkYXRlIHBhY2thZ2UuanNvbiBpZiBpdCBleGlzdHMgKGZvciBjb21wYXRpYmlsaXR5KQogICAgICAgIGxvY2FsIHBhY2thZ2VfanNvbl9maWxlPSIke3BhY2thZ2VfanNvbl9wYXRofS9wYWNrYWdlLmpzb24iCiAgICAgICAgaWYgWyAtZiAiJHBhY2thZ2VfanNvbl9maWxlIiBdOyB0aGVuCiAgICAgICAgICAgIHByaW50X2luZm8gIlVwZGF0aW5nIHBhY2thZ2UuanNvbiBmb3IgY29tcGF0aWJpbGl0eS4uLiIKICAgICAgICAgICAgaWYgdXBkYXRlX3ZlcnNpb25faW5fZmlsZSAiJHBhY2thZ2VfanNvbl9maWxlIiAianNvbiIgIiIgIiRuZXd2ZXJzaW9uIjsgdGhlbgogICAgICAgICAgICAgICAgcHJpbnRfc3VjY2VzcyAiVXBkYXRlZCB2ZXJzaW9uIHRvICRuZXd2ZXJzaW9uIGluIHBhY2thZ2UuanNvbiIKICAgICAgICAgICAgZmkKICAgICAgICBmaQogICAgZmkKCiAgICAjIFVwZGF0ZSBzZWNvbmRhcnkgdmVyc2lvbiBmaWxlcyBpZiBjb25maWd1cmVkCiAgICBpZiBbWyAtbiAiJHZlcnNpb25fc2Vjb25kYXJ5X2ZpbGVzIiBdXTsgdGhlbgogICAgICAgIHByaW50X2luZm8gIlVwZGF0aW5nIHNlY29uZGFyeSB2ZXJzaW9uIGZpbGVzLi4uIgogICAgICAgIHdoaWxlIElGUz0gcmVhZCAtciBmaWxlX2NvbmZpZzsgZG8KICAgICAgICAgICAgaWYgW1sgLW4gIiRmaWxlX2NvbmZpZyIgXV07IHRoZW4KICAgICAgICAgICAgICAgIElGUz0nOicgcmVhZCAtcmEgY29uZmlnX3BhcnRzIDw8PCAiJGZpbGVfY29uZmlnIgogICAgICAgICAgICAgICAgbG9jYWwgc2VjX2ZpbGU9IiR7Y29uZmlnX3BhcnRzWzBdfSIKICAgICAgICAgICAgICAgIGxvY2FsIHNlY190eXBlPSIke2NvbmZpZ19wYXJ0c1sxXTotdHh0fSIKICAgICAgICAgICAgICAgIGxvY2FsIHNlY19saW5lX3N0YXJ0PSIke2NvbmZpZ19wYXJ0c1syXTotfSIKICAgICAgICAgICAgICAgICMgVHJhY2sgd2hpY2ggZmlsZXMgd2VyZSBleGVjdXRhYmxlIGJlZm9yZQogICAgICAgICAgICAgICAgd2FzX2V4ZWN1dGFibGU9JCh0ZXN0IC14ICIkc2VjX2ZpbGUiICYmIGVjaG8gInllcyIgfHwgZWNobyAibm8iKQogICAgICAgICAgICAgICAgcHJpbnRfaW5mbyAiVXBkYXRpbmcgJHNlY19maWxlLCBhcyAkc2VjX3R5cGUiICJkZWJ1ZyIKCiAgICAgICAgICAgICAgICBpZiB1cGRhdGVfdmVyc2lvbl9pbl9maWxlICIkc2VjX2ZpbGUiICIkc2VjX3R5cGUiICIkc2VjX2xpbmVfc3RhcnQiICIkbmV3dmVyc2lvbiI7IHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBbWyAiJHdhc19leGVjdXRhYmxlIiA9PSAieWVzIiBdXTsgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBjaG1vZCAreCAiJHNlY19maWxlIgogICAgICAgICAgICAgICAgICAgICAgICBwcmludF9pbmZvICJSZXN0b3JlZCAreCBvbiAkc2VjX2ZpbGUiCiAgICAgICAgICAgICAgICAgICAgZmkKICAgICAgICAgICAgICAgICAgICBwcmludF9zdWNjZXNzICJVcGRhdGVkIHZlcnNpb24gdG8gJG5ld3ZlcnNpb24gaW4gJHNlY19maWxlIgogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHByaW50X3dhcm5pbmcgIkZhaWxlZCB0byB1cGRhdGUgdmVyc2lvbiBpbiAkc2VjX2ZpbGUiCiAgICAgICAgICAgICAgICBmaQogICAgICAgICAgICBmaQogICAgICAgIGRvbmUgPDw8ICIkKHBhcnNlX3NlY29uZGFyeV92ZXJzaW9uX2ZpbGVzICIkdmVyc2lvbl9zZWNvbmRhcnlfZmlsZXMiKSIKICAgIGZpCgogICAgIyBVcGRhdGUgV29yZFByZXNzIGZpbGVzIGlmIGFwcGxpY2FibGUgKGxlZ2FjeSBzdXBwb3J0KQogICAgaWYgW1sgLW4gIiR3b3JkcHJlc3NfZmlsZXNfcGF0aCIgXV07IHRoZW4KICAgICAgICBpZiBzZWRfaW5wbGFjZSAicy9WZXJzaW9uOiAuKi9WZXJzaW9uOiAkbmV3dmVyc2lvbi8iICIkd29yZHByZXNzX2ZpbGVzX3BhdGgvc3R5bGUuY3NzIjsgdGhlbgogICAgICAgICAgICBwcmludF9zdWNjZXNzICJVcGRhdGVkIHZlcnNpb24gaW4gc3R5bGUuY3NzIgogICAgICAgIGZpCgogICAgICAgIGlmIHNlZF9pbnBsYWNlICJzL15kZWZpbmUuKi4kd3BWZXJzaW9uQ29uc3RhbnQuKi9kZWZpbmUoJyR3cFZlcnNpb25Db25zdGFudCcsJyRuZXd2ZXJzaW9uJyk7LyIgIiR3b3JkcHJlc3NfZmlsZXNfcGF0aC9mdW5jdGlvbnMucGhwIjsgdGhlbgogICAgICAgICAgICBwcmludF9zdWNjZXNzICJVcGRhdGVkIHZlcnNpb24gaW4gZnVuY3Rpb25zLnBocCIKICAgICAgICBmaQogICAgZmkKfQoKZmkgIyBfX1NSQ19fVm9sdW1lc19lbmlnbWFkZXZfZW5pZ21hZGV2X3N0YXRpY19tYWlhc3Nfd2hvbGVfYmFzaG1haWFzc19saWJfY29yZV92ZXJzaW9uX3NoCiMgLS0tIEVuZCBpbmxpbmVkOiAvVm9sdW1lcy9lbmlnbWFkZXYvZW5pZ21hZGV2L3N0YXRpYy9tYWlhc3Mtd2hvbGUvYmFzaG1haWFzcy9saWIvY29yZS92ZXJzaW9uLnNoIC0tLQoKIyAtLS0gQmVnaW4gaW5saW5lZDogL1ZvbHVtZXMvZW5pZ21hZGV2L2VuaWdtYWRldi9zdGF0aWMvbWFpYXNzLXdob2xlL2Jhc2htYWlhc3MvbGliL2NvcmUvbG9nZ2VyLnNoIC0tLQppZiBbWyAteiAiJHtfX1NSQ19fVm9sdW1lc19lbmlnbWFkZXZfZW5pZ21hZGV2X3N0YXRpY19tYWlhc3Nfd2hvbGVfYmFzaG1haWFzc19saWJfY29yZV9sb2dnZXJfc2g6LX0iIF1dOyB0aGVuIF9fU1JDX19Wb2x1bWVzX2VuaWdtYWRldl9lbmlnbWFkZXZfc3RhdGljX21haWFzc193aG9sZV9iYXNobWFpYXNzX2xpYl9jb3JlX2xvZ2dlcl9zaD0xCgpmaSAjIF9fU1JDX19Wb2x1bWVzX2VuaWdtYWRldl9lbmlnbWFkZXZfc3RhdGljX21haWFzc193aG9sZV9iYXNobWFpYXNzX2xpYl9jb3JlX2xvZ2dlcl9zaAojIC0tLSBFbmQgaW5saW5lZDogL1ZvbHVtZXMvZW5pZ21hZGV2L2VuaWdtYWRldi9zdGF0aWMvbWFpYXNzLXdob2xlL2Jhc2htYWlhc3MvbGliL2NvcmUvbG9nZ2VyLnNoIC0tLQoKIyAtLS0gQmVnaW4gaW5saW5lZDogL1ZvbHVtZXMvZW5pZ21hZGV2L2VuaWdtYWRldi9zdGF0aWMvbWFpYXNzLXdob2xlL2Jhc2htYWlhc3MvbGliL3V0aWxzL2hlbHBlcnMuc2ggLS0tCmlmIFtbIC16ICIke19fU1JDX19Wb2x1bWVzX2VuaWdtYWRldl9lbmlnbWFkZXZfc3RhdGljX21haWFzc193aG9sZV9iYXNobWFpYXNzX2xpYl91dGlsc19oZWxwZXJzX3NoOi19IiBdXTsgdGhlbiBfX1NSQ19fVm9sdW1lc19lbmlnbWFkZXZfZW5pZ21hZGV2X3N0YXRpY19tYWlhc3Nfd2hvbGVfYmFzaG1haWFzc19saWJfdXRpbHNfaGVscGVyc19zaD0xCgojIENyb3NzLXBsYXRmb3JtIHNlZCAtaSBoZWxwZXIgZnVuY3Rpb24gd2l0aCBmaWxlIGV4aXN0ZW5jZSBjaGVjawojIFVzYWdlOiBzZWRfaW5wbGFjZSAncGF0dGVybicgZmlsZQojIFJldHVybnMgMCBpZiBzdWNjZXNzZnVsLCAxIGlmIGZpbGUgZG9lc24ndCBleGlzdCAobm9uLWZhdGFsKQpzZWRfaW5wbGFjZSgpIHsKICAgIGxvY2FsIHBhdHRlcm49IiQxIgogICAgbG9jYWwgZmlsZT0iJDIiCgogICAgIyBDaGVjayBpZiBmaWxlIGV4aXN0cyAtIHJldHVybiBzaWxlbnRseSBpZiBub3QgKGV4cGVjdGVkIGZvciBkaXZlcnNlIHJlcG9zKQogICAgaWYgWyAhIC1mICIkZmlsZSIgXTsgdGhlbgogICAgICAgIHJldHVybiAxCiAgICBmaQoKICAgIGlmIHNlZCAtLXZlcnNpb24gPi9kZXYvbnVsbCAyPiYxOyB0aGVuCiAgICAgICAgIyBHTlUgc2VkIChMaW51eCkKICAgICAgICBzZWQgLWkgIiRwYXR0ZXJuIiAiJGZpbGUiCiAgICBlbHNlCiAgICAgICAgIyBCU0Qgc2VkIChtYWNPUykKICAgICAgICBzZWQgLWkgJycgIiRwYXR0ZXJuIiAiJGZpbGUiCiAgICBmaQp9CgpvcGVuX3VybCgpIHsKICBsb2NhbCB1cmw9IiQxIgogICMgaWYgTUFJQVNTX0JST1dTRVIgaXMgZW1wdHksIHVzZSB0aGUgZGVmYXVsdCBicm93c2VyCiAgaWYgWyAteiAiJE1BSUFTU19CUk9XU0VSIiBdOyB0aGVuCiAgICBvcGVuICIkdXJsIgogICAgcmV0dXJuCiAgZmkKCiAgIyBTZXQgZGVmYXVsdHMgaWYgdmFyaWFibGVzIGFyZSB1bnNldAogIGxvY2FsIGJyb3dzZXI9IiR7TUFJQVNTX0JST1dTRVI6LUdvb2dsZSBDaHJvbWV9IgogIGxvY2FsIHByb2ZpbGU9IiR7TUFJQVNTX0JST1dTRVJfUFJPRklMRTotRGVmYXVsdH0iCgogICMgTWFwIGtub3duIGJyb3dzZXIgbmFtZXMgdG8gdGhlaXIgYXBwIHBhdGhzIGFuZCBiaW5hcnkgcGF0aHMKICBsb2NhbCBhcHBfcGF0aD0iIgogIGxvY2FsIGJpbmFyeV9wYXRoPSIiCgogIGNhc2UgIiRicm93c2VyIiBpbgogICAgIkJyYXZlIEJyb3dzZXIiKQogICAgICBhcHBfcGF0aD0iL0FwcGxpY2F0aW9ucy9Hb29nbGUgQ2hyb21lLmFwcCIKICAgICAgYmluYXJ5X3BhdGg9IiRhcHBfcGF0aC9Db250ZW50cy9NYWNPUy9CcmF2ZSBCcm93c2VyIgogICAgICA7OwogICAgIkdvb2dsZSBDaHJvbWUiKQogICAgICBhcHBfcGF0aD0iL0FwcGxpY2F0aW9ucy9Hb29nbGUgQ2hyb21lLmFwcCIKICAgICAgYmluYXJ5X3BhdGg9IiRhcHBfcGF0aC9Db250ZW50cy9NYWNPUy9Hb29nbGUgQ2hyb21lIgogICAgICA7OwogICAgIkZpcmVmb3giKQogICAgICBhcHBfcGF0aD0iL0FwcGxpY2F0aW9ucy9GaXJlZm94LmFwcCIKICAgICAgYmluYXJ5X3BhdGg9IiRhcHBfcGF0aC9Db250ZW50cy9NYWNPUy9maXJlZm94IgogICAgICA7OwogICAgIlNjcmliZSIpCiAgICAgIGFwcF9wYXRoPSIvQXBwbGljYXRpb25zL1NjcmliZS5hcHAiCiAgICAgIGJpbmFyeV9wYXRoPSIkYXBwX3BhdGgvQ29udGVudHMvTWFjT1MvU2NyaWJlIgogICAgICA7OwogICAgIlNhZmFyaSIpCiAgICAgIG9wZW4gLWEgIlNhZmFyaSIgIiR1cmwiCiAgICAgIHJldHVybgogICAgICA7OwogICAgKikKICAgICAgZWNobyAiVW5zdXBwb3J0ZWQgYnJvd3NlcjogJGJyb3dzZXIiCiAgICAgIHJldHVybiAxCiAgICAgIDs7CiAgZXNhYwoKICAjIEZvciBicm93c2VycyB0aGF0IHN1cHBvcnQgcHJvZmlsZXMgdmlhIENMSQogIGlmIFtbICIkYnJvd3NlciIgPT0gIkZpcmVmb3giIF1dOyB0aGVuCiAgICAiJGJpbmFyeV9wYXRoIiAtUCAiJHByb2ZpbGUiIC1uby1yZW1vdGUgIiR1cmwiICYKICBlbHNlCiAgICAiJGJpbmFyeV9wYXRoIiAtLXByb2ZpbGUtZGlyZWN0b3J5PSIkcHJvZmlsZSIgIiR1cmwiICYKICBmaQp9CgojIEdlbmVyYXRlIHNpZ24tb2ZmIG1lc3NhZ2Ugd2l0aCBvcHRpb25hbCB0b3AtdXAgVVJMCnByaW50X3NpZ25vZmZfd2l0aF90b3B1cCgpIHsKICBlY2hvICIiCiAgcHJpbnRfaW5mbyAiJHtCR3JlZW594pyFIERvbmUhJHtDb2xvcl9PZmZ9ICR7QXF1YX1Zb3UgYXJlIG9uICR7QldoaXRlfSRicmFuY2hfbmFtZSR7QXF1YX0gYnJhbmNoIiAiYnJpZWYiCiAgIyBSZWFkIHNlc3Npb24gZGF0YSBmcm9tIHRlbXAgZmlsZSBpZiBpdCBleGlzdHMKICBsb2NhbCBjcmVkaXRzX3VzZWQgY3JlZGl0c19yZW1haW5pbmcgYWlfd2FybmluZ3MgYWlfbW9kZWwKICBpZiBbWyAtZiAiL3RtcC9tYWlhc3Nfc2Vzc2lvbl9kYXRhLnRtcCIgXV07IHRoZW4KICAgICMgU291cmNlIHRoZSBmaWxlIHRvIGdldCB2YXJpYWJsZXMKICAgIHdoaWxlIElGUz0nPScgcmVhZCAtciBrZXkgdmFsdWU7IGRvCiAgICAgIGNhc2UgIiRrZXkiIGluCiAgICAgICAgIkNSRURJVFNfVVNFRCIpIGNyZWRpdHNfdXNlZD0iJHZhbHVlIiA7OwogICAgICAgICJDUkVESVRTX1JFTUFJTklORyIpIGNyZWRpdHNfcmVtYWluaW5nPSIkdmFsdWUiIDs7CiAgICAgICAgIkFJX01PREVMIikgYWlfbW9kZWw9IiR2YWx1ZSIgOzsKICAgICAgZXNhYwogICAgZG9uZSA8IC90bXAvbWFpYXNzX3Nlc3Npb25fZGF0YS50bXAKICAgIAogICAgIyBSZWFkIEFJIHdhcm5pbmdzIChoYW5kbGUgbXVsdGlsaW5lKQogICAgaWYgZ3JlcCAtcSAiQUlfV0FSTklOR1M8PEVPRiIgL3RtcC9tYWlhc3Nfc2Vzc2lvbl9kYXRhLnRtcDsgdGhlbgogICAgICBhaV93YXJuaW5ncz0kKHNlZCAtbiAnL0FJX1dBUk5JTkdTPDxFT0YvLC9FT0YvcCcgL3RtcC9tYWlhc3Nfc2Vzc2lvbl9kYXRhLnRtcCB8IHNlZCAnMWQ7JGQnKQogICAgZmkKICBmaQogIAogICMgRGlzcGxheSBjcmVkaXQgc3VtbWFyeSBpZiBhdmFpbGFibGUgZnJvbSBBSSBvcGVyYXRpb25zCiAgaWYgW1sgLW4gIiRjcmVkaXRzX3VzZWQiIHx8IC1uICIkY3JlZGl0c19yZW1haW5pbmciIF1dOyB0aGVuCiAgICBlY2hvICLwn5OKIENyZWRpdCBTdW1tYXJ5OiIKICAgIGlmIFtbIC1uICIkY3JlZGl0c191c2VkIiBdXTsgdGhlbgogICAgICBpZiBbWyAtbiAiJGFpX21vZGVsIiBdXTsgdGhlbgogICAgICAgIGVjaG8gLWUgIiAgIENyZWRpdHMgdXNlZCB0aGlzIHNlc3Npb246ICR7U29mdFBpbmt9JGNyZWRpdHNfdXNlZCR7Q29sb3JfT2ZmfSAoJGFpX21vZGVsKSIKICAgICAgZWxzZQogICAgICAgIGVjaG8gLWUgIiAgIENyZWRpdHMgdXNlZCB0aGlzIHNlc3Npb246ICR7U29mdFBpbmt9JGNyZWRpdHNfdXNlZCR7Q29sb3JfT2ZmfSIKICAgICAgZmkKICAgIGZpCiAgICBpZiBbWyAtbiAiJGNyZWRpdHNfcmVtYWluaW5nIiBdXTsgdGhlbgogICAgICAgIHByaW50X2NyZWRpdF9jb2xvciAkY3JlZGl0c19yZW1haW5pbmcgIkNyZWRpdHMgcmVtYWluaW5nOiAkY3JlZGl0c19yZW1haW5pbmciCiAgICBmaQogIGZpCiAgCiAgIyBEaXNwbGF5IEFJIHdhcm5pbmcgbWVzc2FnZXMgaWYgYW55CiAgaWYgW1sgLW4gIiRhaV93YXJuaW5ncyIgXV07IHRoZW4KICAgICMgZWNobyAi4pqg77iPICBBSSBTZXJ2aWNlIE5vdGlmaWNhdGlvbnM6IgogICAgIyBIYW5kbGUgbXVsdGlwbGUgd2FybmluZyBtZXNzYWdlcwogICAgd2hpbGUgSUZTPSByZWFkIC1yIHdhcm5pbmdfbGluZTsgZG8KICAgICAgaWYgW1sgLW4gIiR3YXJuaW5nX2xpbmUiICYmICIkd2FybmluZ19saW5lIiAhPSAiZW1wdHkiICYmICIkd2FybmluZ19saW5lIiAhPSAibnVsbCIgXV07IHRoZW4KICAgICAgICBlY2hvICIgICAkd2FybmluZ19saW5lIgogICAgICBmaQogICAgZG9uZSA8PDwgIiRhaV93YXJuaW5ncyIKICAgIGVjaG8gIiIKICBmaQogICMgIlRoYW5rIHlvdSBmb3IgdXNpbmcgTUFJQVNTISIgd2l0aCBib2xkIHllbGxvdyBhbmQgZ3JlZW4gTUFJQVNTCgogIHByaW50X2dyYWRpZW50X2xpbmUgNDAKICBwcmludF90aGFua3MKICBwcmludF9ncmFkaWVudF9saW5lIDQwCiAgICAjIENoZWNrIGlmIHdlIGhhdmUgYSBzdG9yZWQgdG9wLXVwIGVuZHBvaW50IGZyb20gaW5pdAogIGlmIFtbIC1uICIkTUFJQVNTX1NVQlNDUklQVElPTl9JRCIgXV07IHRoZW4KICAgIGVjaG8gLWUgIvCfkrMgJHtZZWxsb3d9TmVlZCBtb3JlIGNyZWRpdHM/IgogICAgZWNobyAtZSAiJHtCQmx1ZX0ke21haWFzc190b3B1cF9lbmRwb2ludH0vJE1BSUFTU19TVUJTQ1JJUFRJT05fSUQke0NvbG9yX09mZn0iCiAgZWxzZQogICBlY2hvIC1lICLwn5KzICR7WWVsbG93fU5lZWQgbW9yZSBjcmVkaXRzPyIKICAgZWNobyAtZSAiJHtCQmx1ZX0ke21haWFzc190b3B1cF9lbmRwb2ludH0ke0NvbG9yX09mZn0iCiAgZmkKICAKICAjIERlYnVnOiBDaGVjayB0b3B1cCBVUkwgdmFyaWFibGVzCiAgI3ByaW50X2RlYnVnICJERUJVRyBTSUdOT0ZGOiBtYWlhc3NfdG9wdXBfZW5kcG9pbnQ9JyR7bWFpYXNzX3RvcHVwX2VuZHBvaW50Oi19JyIKICAjcHJpbnRfZGVidWcgIkRFQlVHIFNJR05PRkY6IE1BSUFTU19TVUJTQ1JJUFRJT05fSUQ9JyR7TUFJQVNTX1NVQlNDUklQVElPTl9JRDotfSciCiAgCiAgIyBDbGVhbiB1cCBzZXNzaW9uIGRhdGEgZmlsZQogIGlmIFtbIC1mICIvdG1wL21haWFzc19zZXNzaW9uX2RhdGEudG1wIiBdXTsgdGhlbgogICAgcm0gLWYgL3RtcC9tYWlhc3Nfc2Vzc2lvbl9kYXRhLnRtcAogIGZpCn0KCmdlbmVyYXRlX21hY2hpbmVfZmluZ2VycHJpbnQoKSB7CiAgIyBHZXQgTUFDIGFkZHJlc3MKICBnZXRfbWFjX2FkZHJlc3MoKSB7CiAgICBpZiBjb21tYW5kIC12IGlwICY+L2Rldi9udWxsOyB0aGVuCiAgICAgIGlwIGxpbmsgfCBhd2sgJy9ldGhlci8ge3ByaW50ICQyOyBleGl0fScKICAgIGVsc2UKICAgICAgIyBtYWNPUyBmYWxsYmFjawogICAgICBuZXR3b3Jrc2V0dXAgLWxpc3RhbGxoYXJkd2FyZXBvcnRzIHwgXAogICAgICAgIGF3ayAnL0RldmljZXxFdGhlcm5ldCBBZGRyZXNzLyB7CiAgICAgICAgICBpZiAoJDEgPT0gIkRldmljZToiKSBkZXY9JDI7CiAgICAgICAgICBlbHNlIGlmICgkMSA9PSAiRXRoZXJuZXQiKSB7CiAgICAgICAgICAgIHByaW50ICQzOwogICAgICAgICAgICBleGl0CiAgICAgICAgICB9CiAgICAgICAgfScKICAgIGZpCiAgfQoKICAjIEdldCBDUFUgaW5mbwogIGdldF9jcHVfaW5mbygpIHsKICAgIGlmIFtbICIkT1NUWVBFIiA9PSAiZGFyd2luIiogXV07IHRoZW4KICAgICAgc3lzY3RsIC1uIG1hY2hkZXAuY3B1LmJyYW5kX3N0cmluZwogICAgZWxzZQogICAgICBncmVwIC1tMSAnbW9kZWwgbmFtZScgL3Byb2MvY3B1aW5mbyB8IGN1dCAtZCAnOicgLWYgMiB8IHhhcmdzCiAgICBmaQogIH0KCiAgIyBHZXQgZGlzayBJRCBvciB2b2x1bWUgVVVJRAogIGdldF9kaXNrX2lkZW50aWZpZXIoKSB7CiAgICBpZiBbWyAiJE9TVFlQRSIgPT0gImRhcndpbiIqIF1dOyB0aGVuCiAgICAgIGRpc2t1dGlsIGluZm8gLyB8IGF3ayAtRic6ICcgJy9Wb2x1bWUgVVVJRC8ge3ByaW50ICQyOyBleGl0fScKICAgIGVsc2UKICAgICAgcm9vdF9kaXNrPSQoZGYgLyB8IHRhaWwgLTEgfCBhd2sgJ3twcmludCAkMX0nIHwgc2VkICdzL1swLTldKiQvLycpCiAgICAgIGxzYmxrIC1ubyBTRVJJQUwgIiRyb290X2Rpc2siIDI+L2Rldi9udWxsIHx8IGVjaG8gInVua25vd24tc2VyaWFsIgogICAgZmkKICB9CgogICMgS2VybmVsIGluZm8KICBnZXRfa2VybmVsX2luZm8oKSB7CiAgICB1bmFtZSAtc3JtCiAgfQoKICAjIEhhc2hpbmcgaGVscGVyCiAgaGFzaF9maW5nZXJwcmludCgpIHsKICAgIGlmIGNvbW1hbmQgLXYgc2hhMjU2c3VtICY+L2Rldi9udWxsOyB0aGVuCiAgICAgIHNoYTI1NnN1bQogICAgZWxzZQogICAgICBzaGFzdW0gLWEgMjU2CiAgICBmaQogIH0KCiAgIyBNYWluIGZpbmdlcnByaW50IGdlbmVyYXRpb24KICBtYWM9JChnZXRfbWFjX2FkZHJlc3MpCiAgY3B1PSQoZ2V0X2NwdV9pbmZvKQogIGRpc2s9JChnZXRfZGlza19pZGVudGlmaWVyKQogIGtlcm5lbD0kKGdldF9rZXJuZWxfaW5mbykKCiAgZmluZ2VycHJpbnRfaW5wdXQ9IiR7bWFjfXwke2NwdX18JHtkaXNrfXwke2tlcm5lbH0iCiAgZWNobyAiJGZpbmdlcnByaW50X2lucHV0IiB8IGhhc2hfZmluZ2VycHJpbnQgfCBhd2sgJ3twcmludCAkMX0nCn0KCmZpICMgX19TUkNfX1ZvbHVtZXNfZW5pZ21hZGV2X2VuaWdtYWRldl9zdGF0aWNfbWFpYXNzX3dob2xlX2Jhc2htYWlhc3NfbGliX3V0aWxzX2hlbHBlcnNfc2gKIyAtLS0gRW5kIGlubGluZWQ6IC9Wb2x1bWVzL2VuaWdtYWRldi9lbmlnbWFkZXYvc3RhdGljL21haWFzcy13aG9sZS9iYXNobWFpYXNzL2xpYi91dGlscy9oZWxwZXJzLnNoIC0tLQoKIyAtLS0gQmVnaW4gaW5saW5lZDogL1ZvbHVtZXMvZW5pZ21hZGV2L2VuaWdtYWRldi9zdGF0aWMvbWFpYXNzLXdob2xlL2Jhc2htYWlhc3MvbGliL2NvcmUvZ2l0LnNoIC0tLQppZiBbWyAteiAiJHtfX1NSQ19fVm9sdW1lc19lbmlnbWFkZXZfZW5pZ21hZGV2X3N0YXRpY19tYWlhc3Nfd2hvbGVfYmFzaG1haWFzc19saWJfY29yZV9naXRfc2g6LX0iIF1dOyB0aGVuIF9fU1JDX19Wb2x1bWVzX2VuaWdtYWRldl9lbmlnbWFkZXZfc3RhdGljX21haWFzc193aG9sZV9iYXNobWFpYXNzX2xpYl9jb3JlX2dpdF9zaD0xCgojIEVycm9yIGhhbmRsaW5nIGZvciBnaXQgb3BlcmF0aW9ucwpmdW5jdGlvbiBjaGVja19naXRfc3VjY2VzcygpIHsKICAgIGlmIFsgJD8gLW5lIDAgXTsgdGhlbgogICAgICAgIHByaW50X2Vycm9yICJHaXQgb3BlcmF0aW9uIGZhaWxlZCIKICAgICAgICBwcmludF9lcnJvciAiUGxlYXNlIGNvbXBsZXRlIHRoaXMgcHJvY2VzcyBtYW51YWxseSIKICAgICAgICBpZiBnaXQgcmV2LXBhcnNlIC0tdmVyaWZ5IEhFQUQgPi9kZXYvbnVsbCAyPiYxOyB0aGVuCiAgICAgICAgICAgIHByaW50X2luZm8gIllvdSBhcmUgY3VycmVudGx5IG9uIGJyYW5jaDogJChnaXQgcmV2LXBhcnNlIC0tYWJicmV2LXJlZiBIRUFEKSIKICAgICAgICBlbHNlCiAgICAgICAgICAgIHByaW50X2luZm8gIllvdSBhcmUgY3VycmVudGx5IG9uIGJyYW5jaDogJChnaXQgc3ltYm9saWMtcmVmIC0tc2hvcnQgSEVBRCAyPi9kZXYvbnVsbCB8fCBlY2hvICJ1bmtub3duIikiCiAgICAgICAgZmkKICAgICAgICBleGl0IDEKICAgIGZpCn0KCiMgRXhlY3V0ZSBnaXQgY29tbWFuZCB3aXRoIHZlcmJvc2l0eS1jb250cm9sbGVkIG91dHB1dAojIFVzYWdlOiBydW5fZ2l0X2NvbW1hbmQgImdpdCBjb21tYW5kIiBbc2hvd19vdXRwdXRfbGV2ZWxdCiMgc2hvd19vdXRwdXRfbGV2ZWw6IGJyaWVmLCBub3JtYWwsIGRlYnVnIChkZWZhdWx0OiBub3JtYWwpCnJ1bl9naXRfY29tbWFuZCgpIHsKICAgIGxvY2FsIGdpdF9jbWQ9IiQxIgogICAgbG9jYWwgc2hvd19sZXZlbD0iJHsyOi1ub3JtYWx9IgoKICAgICMgRm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHksIHRyZWF0IGRlYnVnX21vZGU9dHJ1ZSBhcyB2ZXJib3NpdHlfbGV2ZWw9ZGVidWcKICAgIGlmIFtbICIkZGVidWdfbW9kZSIgPT0gInRydWUiICYmICIkdmVyYm9zaXR5X2xldmVsIiAhPSAiZGVidWciIF1dOyB0aGVuCiAgICAgICAgIyBPbmx5IGxvZyB0aGlzIHdoZW4gbm90IGFscmVhZHkgaW4gZGVidWcgdmVyYm9zaXR5IHRvIGF2b2lkIG5vaXNlCiAgICAgICAgbG9nX21lc3NhZ2UgIkRFUFJFQ0FURUQ6IFVzaW5nIGRlYnVnX21vZGU9dHJ1ZSBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIE1BSUFTU19WRVJCT1NJVFk9ZGVidWcgaW5zdGVhZC4iCiAgICAgICAgIyBUcmVhdCBhcyBpZiB2ZXJib3NpdHlfbGV2ZWwgaXMgZGVidWcKICAgICAgICBsb2NhbCBlZmZlY3RpdmVfdmVyYm9zaXR5PSJkZWJ1ZyIKICAgIGVsc2UKICAgICAgICBsb2NhbCBlZmZlY3RpdmVfdmVyYm9zaXR5PSIkdmVyYm9zaXR5X2xldmVsIgogICAgZmkKCiAgICAjIElmIGhpZGVnaXQgaXMgZW5hYmxlZCwgY2FwdHVyZSBvdXRwdXQgZm9yIGxvZ2dpbmcgYnV0IGRvbid0IHNob3cgdG8gdXNlcgogICAgaWYgW1sgIiRoaWRlZ2l0IiA9PSAidHJ1ZSIgXV07IHRoZW4KICAgICAgICBsb2NhbCB0ZW1wX291dHB1dAogICAgICAgIHRlbXBfb3V0cHV0PSQoZXZhbCAiJGdpdF9jbWQiIDI+JjEpCiAgICAgICAgbG9jYWwgZXhpdF9jb2RlPSQ/CiAgICAgICAgCiAgICAgICAgIyBMb2cgdGhlIG91dHB1dCBpZiBsb2dnaW5nIGlzIGVuYWJsZWQKICAgICAgICBpZiBbWyAiJGVuYWJsZV9sb2dnaW5nIiA9PSAidHJ1ZSIgJiYgLW4gIiR0ZW1wX291dHB1dCIgXV07IHRoZW4KICAgICAgICAgICAgbG9nX21lc3NhZ2UgIkdJVCBPVVRQVVQ6ICRnaXRfY21kIgogICAgICAgICAgICBsb2dfbWVzc2FnZSAiJHRlbXBfb3V0cHV0IgogICAgICAgIGZpCiAgICAgICAgCiAgICAgICAgcmV0dXJuICRleGl0X2NvZGUKICAgIGZpCgogICAgIyBDb250cm9sIG91dHB1dCBiYXNlZCBvbiB2ZXJib3NpdHkgbGV2ZWwgKG9yaWdpbmFsIGJlaGF2aW9yIHdoZW4gaGlkZWdpdD1mYWxzZSkKICAgIGNhc2UgIiRlZmZlY3RpdmVfdmVyYm9zaXR5IiBpbgogICAgICAgICJicmllZiIpCiAgICAgICAgICAgIGlmIFtbICIkc2hvd19sZXZlbCIgPT0gImJyaWVmIiBdXTsgdGhlbgogICAgICAgICAgICAgICAgZXZhbCAiJGdpdF9jbWQiCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGV2YWwgIiRnaXRfY21kIiA+L2Rldi9udWxsIDI+JjEKICAgICAgICAgICAgZmkKICAgICAgICAgICAgOzsKICAgICAgICAibm9ybWFsIikKICAgICAgICAgICAgaWYgW1sgIiRzaG93X2xldmVsIiA9PSAiZGVidWciIF1dOyB0aGVuCiAgICAgICAgICAgICAgICBldmFsICIkZ2l0X2NtZCIgPi9kZXYvbnVsbCAyPiYxCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGV2YWwgIiRnaXRfY21kIgogICAgICAgICAgICBmaQogICAgICAgICAgICA7OwogICAgICAgICJkZWJ1ZyIpCiAgICAgICAgICAgIGV2YWwgIiRnaXRfY21kIgogICAgICAgICAgICA7OwogICAgZXNhYwoKICAgIHJldHVybiAkPwp9CgojIENoZWNrIGFuZCBoYW5kbGUgLmdpdGlnbm9yZSBmb3IgbG9nIGZpbGVzCmNoZWNrX2dpdGlnbm9yZV9mb3JfbG9ncygpIHsKICAgIGlmIFtbICIkZW5hYmxlX2xvZ2dpbmciICE9ICJ0cnVlIiBdXTsgdGhlbgogICAgICAgIHJldHVybiAwCiAgICBmaQoKICAgIGxvY2FsIGdpdGlnbm9yZV9maWxlPSIuZ2l0aWdub3JlIgogICAgbG9jYWwgbG9nX3BhdHRlcm5fZm91bmQ9ZmFsc2UKCiAgICAjIENoZWNrIGlmIC5naXRpZ25vcmUgZXhpc3RzIGFuZCBjb250YWlucyBsb2cgZmlsZSBwYXR0ZXJucwogICAgaWYgW1sgLWYgIiRnaXRpZ25vcmVfZmlsZSIgXV07IHRoZW4KICAgICAgICAjIENoZWNrIGZvciBzcGVjaWZpYyBsb2cgZmlsZSBvciAqLmxvZyBwYXR0ZXJuCiAgICAgICAgaWYgZ3JlcCAtcSAiXiR7bG9nX2ZpbGV9JCIgIiRnaXRpZ25vcmVfZmlsZSIgMj4vZGV2L251bGwgfHwgXAogICAgICAgICAgIGdyZXAgLXEgIl5cKi5sb2ckIiAiJGdpdGlnbm9yZV9maWxlIiAyPi9kZXYvbnVsbCB8fCBcCiAgICAgICAgICAgZ3JlcCAtcSAiXlwqXC5sb2ckIiAiJGdpdGlnbm9yZV9maWxlIiAyPi9kZXYvbnVsbDsgdGhlbgogICAgICAgICAgICBsb2dfcGF0dGVybl9mb3VuZD10cnVlCiAgICAgICAgZmkKICAgIGZpCgogICAgIyBJZiBsb2cgZmlsZSBpcyBub3QgaWdub3JlZCwgd2FybiB1c2VyIGFuZCBvZmZlciB0byBhZGQgaXQKICAgIGlmIFtbICIkbG9nX3BhdHRlcm5fZm91bmQiID09ICJmYWxzZSIgXV07IHRoZW4KICAgICAgICBwcmludF93YXJuaW5nICJMb2cgZmlsZSAnJGxvZ19maWxlJyBpcyBub3QgaW4gLmdpdGlnbm9yZSIKICAgICAgICBlY2hvIC1uICJBZGQgJyRsb2dfZmlsZScgdG8gLmdpdGlnbm9yZSB0byBhdm9pZCBjb21taXR0aW5nIGxvZyBmaWxlcz8gW1kvbl06ICIKICAgICAgICByZWFkIC1yIGFkZF90b19naXRpZ25vcmUKCiAgICAgICAgaWYgW1sgIiRhZGRfdG9fZ2l0aWdub3JlIiA9fiBeW05uXSQgXV07IHRoZW4KICAgICAgICAgICAgcHJpbnRfaW5mbyAiQ29udGludWluZyB3aXRob3V0IGFkZGluZyB0byAuZ2l0aWdub3JlIiAiYnJpZWYiCiAgICAgICAgZWxzZQogICAgICAgICAgICAjIEFkZCBsb2cgZmlsZSB0byAuZ2l0aWdub3JlCiAgICAgICAgICAgIGlmIFtbICEgLWYgIiRnaXRpZ25vcmVfZmlsZSIgXV07IHRoZW4KICAgICAgICAgICAgICAgIGVjaG8gIiMgTG9nIGZpbGVzIiA+ICIkZ2l0aWdub3JlX2ZpbGUiCiAgICAgICAgICAgICAgICBlY2hvICIkbG9nX2ZpbGUiID4+ICIkZ2l0aWdub3JlX2ZpbGUiCiAgICAgICAgICAgICAgICBwcmludF9zdWNjZXNzICJDcmVhdGVkIC5naXRpZ25vcmUgYW5kIGFkZGVkICckbG9nX2ZpbGUnIgogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBlY2hvICIiID4+ICIkZ2l0aWdub3JlX2ZpbGUiCiAgICAgICAgICAgICAgICBlY2hvICIjIE1BSUFTUyBsb2cgZmlsZSIgPj4gIiRnaXRpZ25vcmVfZmlsZSIKICAgICAgICAgICAgICAgIGVjaG8gIiRsb2dfZmlsZSIgPj4gIiRnaXRpZ25vcmVfZmlsZSIKICAgICAgICAgICAgICAgIHByaW50X3N1Y2Nlc3MgIkFkZGVkICckbG9nX2ZpbGUnIHRvIC5naXRpZ25vcmUiCiAgICAgICAgICAgIGZpCiAgICAgICAgZmkKICAgIGZpCn0KCiMgQ2hlY2sgYW5kIGhhbmRsZSAuZ2l0aWdub3JlIGZvciBlbnZpcm9ubWVudCBmaWxlcwpjaGVja19naXRpZ25vcmVfZm9yX2VudigpIHsKICAgIGxvY2FsIGdpdGlnbm9yZV9maWxlPSIuZ2l0aWdub3JlIgogICAgbG9jYWwgZW52X3BhdHRlcm5fZm91bmQ9ZmFsc2UKCiAgICAjIENoZWNrIGlmIC5naXRpZ25vcmUgZXhpc3RzIGFuZCBjb250YWlucyBlbnYgZmlsZSBwYXR0ZXJucwogICAgaWYgW1sgLWYgIiRnaXRpZ25vcmVfZmlsZSIgXV07IHRoZW4KICAgICAgICAjIENoZWNrIGZvciAuZW52Lm1haWFzcywgLmVudi5tYWlhc3MqLCAuZW52Kiwgb3IgLmVudi4qIHBhdHRlcm5zCiAgICAgICAgaWYgZ3JlcCAtcSAiXlwuZW52XC5tYWlhc3MkIiAiJGdpdGlnbm9yZV9maWxlIiAyPi9kZXYvbnVsbCB8fCBcCiAgICAgICAgICAgZ3JlcCAtcSAiXlwuZW52XC5tYWlhc3NcKiQiICIkZ2l0aWdub3JlX2ZpbGUiIDI+L2Rldi9udWxsIHx8IFwKICAgICAgICAgICBncmVwIC1xICJeXC5lbnZcKiQiICIkZ2l0aWdub3JlX2ZpbGUiIDI+L2Rldi9udWxsIHx8IFwKICAgICAgICAgICBncmVwIC1xICJeXC5lbnZcLlwqJCIgIiRnaXRpZ25vcmVfZmlsZSIgMj4vZGV2L251bGw7IHRoZW4KICAgICAgICAgICAgZW52X3BhdHRlcm5fZm91bmQ9dHJ1ZQogICAgICAgIGZpCiAgICBmaQoKICAgICMgSWYgLmVudi5tYWlhc3MgaXMgbm90IGlnbm9yZWQsIHdhcm4gdXNlciBhbmQgb2ZmZXIgdG8gYWRkIGl0CiAgICBpZiBbWyAiJGVudl9wYXR0ZXJuX2ZvdW5kIiA9PSAiZmFsc2UiICYmIC1mICIuZW52Lm1haWFzcyIgXV07IHRoZW4KICAgICAgICBwcmludF93YXJuaW5nICJFbnZpcm9ubWVudCBmaWxlICcuZW52Lm1haWFzcycgaXMgbm90IGluIC5naXRpZ25vcmUiCiAgICAgICAgZWNobyAtbiAiQWRkICcuZW52Lm1haWFzcycgdG8gLmdpdGlnbm9yZSB0byBhdm9pZCBjb21taXR0aW5nIGVudmlyb25tZW50IGZpbGVzPyBbWS9uXTogIgogICAgICAgIHJlYWQgLXIgYWRkX3RvX2dpdGlnbm9yZQoKICAgICAgICBpZiBbWyAiJGFkZF90b19naXRpZ25vcmUiID1+IF5bTm5dJCBdXTsgdGhlbgogICAgICAgICAgICBwcmludF9pbmZvICJDb250aW51aW5nIHdpdGhvdXQgYWRkaW5nIHRvIC5naXRpZ25vcmUiICJicmllZiIKICAgICAgICBlbHNlCiAgICAgICAgICAgICMgQWRkIC5lbnYubWFpYXNzIHRvIC5naXRpZ25vcmUKICAgICAgICAgICAgaWYgW1sgISAtZiAiJGdpdGlnbm9yZV9maWxlIiBdXTsgdGhlbgogICAgICAgICAgICAgICAgZWNobyAiIyBFbnZpcm9ubWVudCBmaWxlcyIgPiAiJGdpdGlnbm9yZV9maWxlIgogICAgICAgICAgICAgICAgZWNobyAiLmVudi5tYWlhc3MiID4+ICIkZ2l0aWdub3JlX2ZpbGUiCiAgICAgICAgICAgICAgICBwcmludF9zdWNjZXNzICJDcmVhdGVkIC5naXRpZ25vcmUgYW5kIGFkZGVkICcuZW52Lm1haWFzcyciCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGVjaG8gIiIgPj4gIiRnaXRpZ25vcmVfZmlsZSIKICAgICAgICAgICAgICAgIGVjaG8gIiMgTUFJQVNTIGVudmlyb25tZW50IGZpbGUiID4+ICIkZ2l0aWdub3JlX2ZpbGUiCiAgICAgICAgICAgICAgICBlY2hvICIuZW52Lm1haWFzcyIgPj4gIiRnaXRpZ25vcmVfZmlsZSIKICAgICAgICAgICAgICAgIHByaW50X3N1Y2Nlc3MgIkFkZGVkICcuZW52Lm1haWFzcycgdG8gLmdpdGlnbm9yZSIKICAgICAgICAgICAgZmkKICAgICAgICBmaQogICAgZmkKfQoKIyBHZXQgdGhlIGxhdGVzdCB2ZXJzaW9uIGZyb20gZ2l0IHRhZ3MKIyBSZXR1cm5zIHRoZSBoaWdoZXN0IHNlbWFudGljIHZlcnNpb24gdGFnLCBvciBlbXB0eSBzdHJpbmcgaWYgbm8gdGFncyBmb3VuZApnZXRfbGF0ZXN0X3ZlcnNpb25fZnJvbV90YWdzKCkgewogICAgbG9jYWwgbGF0ZXN0X3RhZwogICAgIyBHZXQgYWxsIHRhZ3MgdGhhdCBtYXRjaCBzZW1hbnRpYyB2ZXJzaW9uaW5nIHBhdHRlcm4sIHNvcnQgdGhlbSwgYW5kIGdldCB0aGUgbGF0ZXN0CiAgICBsYXRlc3RfdGFnPSQoZ2l0IHRhZyAtbCB8IGdyZXAgLUUgJ15bMC05XStcLlswLTldK1wuWzAtOV0rJCcgfCBzb3J0IC1WIHwgdGFpbCAtMSkKICAgIGVjaG8gIiRsYXRlc3RfdGFnIgp9CgojIENoZWNrIGlmIGEgZ2l0IGJyYW5jaCBleGlzdHMgbG9jYWxseQpicmFuY2hfZXhpc3RzKCkgewogICAgbG9jYWwgYnJhbmNoX25hbWU9IiQxIgogICAgZ2l0IHNob3ctcmVmIC0tdmVyaWZ5IC0tcXVpZXQgInJlZnMvaGVhZHMvJGJyYW5jaF9uYW1lIgp9CgojIENoZWNrIGlmIGEgZ2l0IHJlbW90ZSBleGlzdHMKcmVtb3RlX2V4aXN0cygpIHsKICAgIGxvY2FsIHJlbW90ZV9uYW1lPSIkezE6LW9yaWdpbn0iCiAgICBnaXQgcmVtb3RlIHwgZ3JlcCAtcSAiXiRyZW1vdGVfbmFtZSQiCn0KCiMgQ2hlY2sgaWYgd2UgY2FuIHB1c2ggdG8gYSByZW1vdGUgKHRlc3RzIGNvbm5lY3Rpdml0eSkKY2FuX3B1c2hfdG9fcmVtb3RlKCkgewogICAgbG9jYWwgcmVtb3RlX25hbWU9IiR7MTotb3JpZ2lufSIKICAgIGlmICEgcmVtb3RlX2V4aXN0cyAiJHJlbW90ZV9uYW1lIjsgdGhlbgogICAgICAgIHJldHVybiAxCiAgICBmaQogICAgIyBUZXN0IGlmIHdlIGNhbiByZWFjaCB0aGUgcmVtb3RlICh0aGlzIGlzIGEgZHJ5LXJ1bikKICAgIGdpdCBscy1yZW1vdGUgIiRyZW1vdGVfbmFtZSIgPi9kZXYvbnVsbCAyPiYxCn0KCiMgUGVyZm9ybSBtZXJnZSBvcGVyYXRpb24gYmV0d2VlbiB0d28gYnJhbmNoZXMgd2l0aCByZW1vdGUgYW5kIFBSIHN1cHBvcnQKcGVyZm9ybV9tZXJnZV9vcGVyYXRpb24oKSB7CiAgICBsb2NhbCBzb3VyY2VfYnJhbmNoPSIkMSIKICAgIGxvY2FsIHRhcmdldF9icmFuY2g9IiQyIgoKICAgIGlmIFtbIC16ICIkc291cmNlX2JyYW5jaCIgfHwgLXogIiR0YXJnZXRfYnJhbmNoIiBdXTsgdGhlbgogICAgICAgIHByaW50X2Vycm9yICJTb3VyY2UgYW5kIHRhcmdldCBicmFuY2hlcyBtdXN0IGJlIHNwZWNpZmllZCIKICAgICAgICByZXR1cm4gMQogICAgZmkKCiAgICAjIE5vdGU6IFRhZ3MgYXJlIGNyZWF0ZWQgZHVyaW5nIHZlcnNpb24gYnVtcCB3b3JrZmxvdywgbm90IGR1cmluZyBtZXJnZSBvcGVyYXRpb25zCgogICAgIyBEZXRlcm1pbmUgd2hpY2ggcHVsbCByZXF1ZXN0IHNldHRpbmcgdG8gdXNlIGJhc2VkIG9uIHRhcmdldCBicmFuY2gKICAgIGxvY2FsIHVzZV9wdWxscmVxdWVzdD0ib2ZmIgogICAgaWYgW1sgIiR0YXJnZXRfYnJhbmNoIiA9PSAiJHN0YWdpbmdicmFuY2giIF1dOyB0aGVuCiAgICAgICAgdXNlX3B1bGxyZXF1ZXN0PSIkc3RhZ2luZ19wdWxscmVxdWVzdHMiCiAgICBlbGlmIFtbICIkdGFyZ2V0X2JyYW5jaCIgPT0gIiRtYWluYnJhbmNoIiBdXTsgdGhlbgogICAgICAgIHVzZV9wdWxscmVxdWVzdD0iJG1haW5fcHVsbHJlcXVlc3RzIgogICAgZmkKCiAgICAjIEhhbmRsZSBwdWxsIHJlcXVlc3RzIHZzIGRpcmVjdCBtZXJnZQogICAgaWYgW1sgIiR1c2VfcHVsbHJlcXVlc3QiID09ICJvbiIgXV0gJiYgY2FuX3B1c2hfdG9fcmVtb3RlICJvcmlnaW4iOyB0aGVuCiAgICAgICAgcHJpbnRfaW5mbyAiQ3JlYXRpbmcgcHVsbCByZXF1ZXN0IGZvciBtZXJnZSIKCiAgICAgICAgIyBFbnN1cmUgc291cmNlIGJyYW5jaCBpcyBwdXNoZWQKICAgICAgICBydW5fZ2l0X2NvbW1hbmQgImdpdCBwdXNoIC0tc2V0LXVwc3RyZWFtIG9yaWdpbiAnJHNvdXJjZV9icmFuY2gnIiAibm9ybWFsIiB8fCBydW5fZ2l0X2NvbW1hbmQgImdpdCBwdXNoIG9yaWdpbiAnJHNvdXJjZV9icmFuY2gnIiAibm9ybWFsIgogICAgICAgIGNoZWNrX2dpdF9zdWNjZXNzCgogICAgICAgICMgQ3JlYXRlIHB1bGwgcmVxdWVzdCBVUkwKICAgICAgICBpZiBbWyAiJFJFUE9fUFJPVklERVIiID09ICJiaXRidWNrZXQiIF1dOyB0aGVuCiAgICAgICAgICAgIG9wZW5fdXJsICJodHRwczovL2JpdGJ1Y2tldC5vcmcvJEJJVEJVQ0tFVF9XT1JLU1BBQ0UvJEJJVEJVQ0tFVF9SRVBPX1NMVUcvcHVsbC1yZXF1ZXN0cy9uZXc/c291cmNlPSRzb3VyY2VfYnJhbmNoJmRlc3Q9JHRhcmdldF9icmFuY2gmdGl0bGU9UmVsZWFzZSUyMCR7bmV3dmVyc2lvbjotbWVyZ2V9IgogICAgICAgIGVsaWYgW1sgIiRSRVBPX1BST1ZJREVSIiA9PSAiZ2l0aHViIiBdXTsgdGhlbgogICAgICAgICAgICBvcGVuX3VybCAiaHR0cHM6Ly9naXRodWIuY29tLyRHSVRIVUJfT1dORVIvJEdJVEhVQl9SRVBPL2NvbXBhcmUvJHRhcmdldF9icmFuY2guLi4kc291cmNlX2JyYW5jaD9xdWlja19wdWxsPTEmdGl0bGU9UmVsZWFzZSUyMCR7bmV3dmVyc2lvbjotbWVyZ2V9IgogICAgICAgIGVsc2UKICAgICAgICAgICAgcHJpbnRfd2FybmluZyAiVW5rbm93biByZXBvc2l0b3J5IHByb3ZpZGVyLiBDYW5ub3QgY3JlYXRlIHB1bGwgcmVxdWVzdCBVUkwuIgogICAgICAgIGZpCgogICAgICAgIGxvZ3RoaXMgIkNyZWF0ZWQgcHVsbCByZXF1ZXN0IGZvciAke25ld3ZlcnNpb246LW1lcmdlfSIKICAgIGVsc2UKICAgICAgICAjIERpcmVjdCBtZXJnZQogICAgICAgIHByaW50X2luZm8gIlBlcmZvcm1pbmcgZGlyZWN0IG1lcmdlOiAkc291cmNlX2JyYW5jaCDihpIgJHRhcmdldF9icmFuY2giCgogICAgICAgIHJ1bl9naXRfY29tbWFuZCAiZ2l0IGNoZWNrb3V0ICckdGFyZ2V0X2JyYW5jaCciICJub3JtYWwiCiAgICAgICAgY2hlY2tfZ2l0X3N1Y2Nlc3MKCiAgICAgICAgIyBQdWxsIGxhdGVzdCBjaGFuZ2VzIGlmIHJlbW90ZSBhdmFpbGFibGUKICAgICAgICBpZiByZW1vdGVfZXhpc3RzICJvcmlnaW4iOyB0aGVuCiAgICAgICAgICAgICMgQ2hlY2sgaWYgY3VycmVudCBicmFuY2ggaGFzIHVwc3RyZWFtIHRyYWNraW5nCiAgICAgICAgICAgIGlmIGdpdCByZXYtcGFyc2UgLS1hYmJyZXYtcmVmIC0tc3ltYm9saWMtZnVsbC1uYW1lICdAe3V9JyA+L2Rldi9udWxsIDI+JjE7IHRoZW4KICAgICAgICAgICAgICAgIHJ1bl9naXRfY29tbWFuZCAiZ2l0IHB1bGwiICJub3JtYWwiIHx8IHByaW50X3dhcm5pbmcgIkNvdWxkIG5vdCBwdWxsIGxhdGVzdCBjaGFuZ2VzIChjb250aW51aW5nIGFueXdheSkiCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICMgVHJ5IHRvIHNldCB1cCB0cmFja2luZyBpZiByZW1vdGUgYnJhbmNoIGV4aXN0cwogICAgICAgICAgICAgICAgaWYgZ2l0IGxzLXJlbW90ZSAtLWhlYWRzIG9yaWdpbiAiJHRhcmdldF9icmFuY2giIHwgZ3JlcCAtcSAiJHRhcmdldF9icmFuY2giOyB0aGVuCiAgICAgICAgICAgICAgICAgICAgcHJpbnRfaW5mbyAiU2V0dGluZyB1cCB0cmFja2luZyBmb3IgJHRhcmdldF9icmFuY2ggd2l0aCBvcmlnaW4vJHRhcmdldF9icmFuY2giCiAgICAgICAgICAgICAgICAgICAgcnVuX2dpdF9jb21tYW5kICJnaXQgYnJhbmNoIC0tc2V0LXVwc3RyZWFtLXRvPW9yaWdpbi8nJHRhcmdldF9icmFuY2gnICckdGFyZ2V0X2JyYW5jaCciICJub3JtYWwiCiAgICAgICAgICAgICAgICAgICAgcnVuX2dpdF9jb21tYW5kICJnaXQgcHVsbCIgIm5vcm1hbCIgfHwgcHJpbnRfd2FybmluZyAiQ291bGQgbm90IHB1bGwgbGF0ZXN0IGNoYW5nZXMgKGNvbnRpbnVpbmcgYW55d2F5KSIKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBwcmludF9pbmZvICJSZW1vdGUgYnJhbmNoIG9yaWdpbi8kdGFyZ2V0X2JyYW5jaCBkb2Vzbid0IGV4aXN0IC0gc2tpcHBpbmcgcHVsbCIKICAgICAgICAgICAgICAgIGZpCiAgICAgICAgICAgIGZpCiAgICAgICAgZmkKCiAgICAgICAgcnVuX2dpdF9jb21tYW5kICJnaXQgbWVyZ2UgJyRzb3VyY2VfYnJhbmNoJyIgImRlYnVnIgogICAgICAgIGNoZWNrX2dpdF9zdWNjZXNzCgogICAgICAgICMgUHVzaCB0byByZW1vdGUgaWYgYXZhaWxhYmxlCiAgICAgICAgaWYgY2FuX3B1c2hfdG9fcmVtb3RlICJvcmlnaW4iOyB0aGVuCiAgICAgICAgICAgICMgQ2hlY2sgaWYgY3VycmVudCBicmFuY2ggaGFzIHVwc3RyZWFtIHRyYWNraW5nLCBpZiBub3Qgc2V0IGl0IHVwCiAgICAgICAgICAgIGlmICEgZ2l0IHJldi1wYXJzZSAtLWFiYnJldi1yZWYgLS1zeW1ib2xpYy1mdWxsLW5hbWUgJ0B7dX0nID4vZGV2L251bGwgMj4mMTsgdGhlbgogICAgICAgICAgICAgICAgcHJpbnRfaW5mbyAiU2V0dGluZyB1cCB1cHN0cmVhbSB0cmFja2luZyBmb3IgJHRhcmdldF9icmFuY2giCiAgICAgICAgICAgICAgICBydW5fZ2l0X2NvbW1hbmQgImdpdCBwdXNoIC0tc2V0LXVwc3RyZWFtIG9yaWdpbiAnJHRhcmdldF9icmFuY2gnIiAiZGVidWciCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHJ1bl9naXRfY29tbWFuZCAiZ2l0IHB1c2giICJkZWJ1ZyIKICAgICAgICAgICAgZmkKICAgICAgICAgICAgY2hlY2tfZ2l0X3N1Y2Nlc3MKICAgICAgICBmaQoKICAgICAgICBwcmludF9zdWNjZXNzICJNZXJnZWQgJHNvdXJjZV9icmFuY2ggaW50byAkdGFyZ2V0X2JyYW5jaCIKICAgICAgICBsb2d0aGlzICJNZXJnZWQgJHNvdXJjZV9icmFuY2ggaW50byAkdGFyZ2V0X2JyYW5jaCIKICAgIGZpCn0KCmZ1bmN0aW9uIGdldEJpdGJ1Y2tldFVybCgpewogICAgcHJpbnRfc2VjdGlvbiAiR2V0dGluZyBCaXRidWNrZXQgVVJMIgogICAgUkVNT1RFX1VSTD0kKGdpdCByZW1vdGUgZ2V0LXVybCBvcmlnaW4pCiAgICBpZiBbWyAiJFJFTU9URV9VUkwiID1+IGJpdGJ1Y2tldC5vcmdbOi9dKFteL10rKS8oW14vLl0rKSBdXTsgdGhlbgogICAgICAgIFdPUktTUEFDRT0iJHtCQVNIX1JFTUFUQ0hbMV19IgogICAgICAgIFJFUE89IiR7QkFTSF9SRU1BVENIWzJdfSIKICAgIGVsc2UKICAgICAgICBlY2hvICJGYWlsZWQgdG8gZXh0cmFjdCB3b3Jrc3BhY2UgYW5kIHJlcG8gZnJvbSByZW1vdGUgVVJMIgogICAgICAgIGV4aXQgMQogICAgZmkKfQoKZnVuY3Rpb24gYnJhbmNoRGV0ZWN0aW9uKCkgewogICAgcHJpbnRfZGVidWcgIkJyYW5jaCBEZXRlY3Rpb24iCiAgICBwcmludF9pbmZvICJDdXJyZW50bHkgb24gYnJhbmNoOiAke0JXaGl0ZX0kYnJhbmNoX25hbWUke0NvbG9yX09mZn0iICJicmllZiIKICAgIAogICAgIyBJbiBBSS1vbmx5IG1vZGUsIHN0aWxsIHNob3cgYnJhbmNoIGluZm8gYW5kIG9mZmVyIGRldmVsb3Agc3dpdGNoaW5nIGZvciBiZXR0ZXIgd29ya2Zsb3cKICAgICMgYnV0IHNraXAgdGhlIGNvbXBsZXggdmVyc2lvbiBtYW5hZ2VtZW50IGJyYW5jaCBsb2dpYyBsYXRlcgogICAgaWYgW1sgIiRhaV9jb21taXRzX29ubHkiID09ICJ0cnVlIiBdXTsgdGhlbgogICAgICAgIHByaW50X2RlYnVnICJBSS1vbmx5IG1vZGU6IFNpbXBsaWZpZWQgYnJhbmNoIGRldGVjdGlvbiIKICAgICAgICAjIFN0aWxsIG9mZmVyIGRldmVsb3AgYnJhbmNoIHN3aXRjaGluZyBpZiBvbiBtYWluL21hc3RlciBhbmQgZGV2ZWxvcCBleGlzdHMKICAgICAgICBpZiBbWyAiJGJyYW5jaF9uYW1lIiA9PSAiJG1haW5icmFuY2giIHx8ICIkYnJhbmNoX25hbWUiID09ICJtYXN0ZXIiIHx8ICIkYnJhbmNoX25hbWUiID09ICJtYWluIiBdXTsgdGhlbgogICAgICAgICAgICBpZiBnaXQgc2hvdy1yZWYgLS12ZXJpZnkgLS1xdWlldCAicmVmcy9oZWFkcy9kZXZlbG9wIjsgdGhlbgogICAgICAgICAgICAgICAgcHJpbnRfaW5mbyAiWW91J3JlIG9uICRicmFuY2hfbmFtZSBicmFuY2gsIGJ1dCAnZGV2ZWxvcCcgYnJhbmNoIGV4aXN0cyIKICAgICAgICAgICAgICAgIGVjaG8gLW4gLWUgIiR7QlllbGxvd31Td2l0Y2ggdG8gZGV2ZWxvcCBicmFuY2ggZm9yIGRldmVsb3BtZW50IHdvcms/IFt5L05dOiR7Q29sb3JfT2ZmfSAiCiAgICAgICAgICAgICAgICByZWFkIC1yIHN3aXRjaF90b19kZXYKICAgICAgICAgICAgICAgIGlmIFtbICIkc3dpdGNoX3RvX2RldiIgPX4gXltZeV0kIF1dOyB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgZ2l0IGNoZWNrb3V0IGRldmVsb3AgMj4vZGV2L251bGw7IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgYnJhbmNoX25hbWU9ImRldmVsb3AiCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50X3N1Y2Nlc3MgIlN3aXRjaGVkIHRvIGRldmVsb3AgYnJhbmNoIgogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRfd2FybmluZyAiQ291bGQgbm90IHN3aXRjaCB0byBkZXZlbG9wIGJyYW5jaCIKICAgICAgICAgICAgICAgICAgICBmaQogICAgICAgICAgICAgICAgZmkKICAgICAgICAgICAgZmkKICAgICAgICBmaQogICAgICAgIHJldHVybiAwCiAgICBmaQogICAgCiAgICAjIGlmIHdlIGFyZSBvbiB0aGUgbWFpbiBicmFuY2gsIGFkdmlzZSB1c2VyIG5vdCB0byB1c2UgdGhpcyBzY3JpcHQgZm9yIGhvdCBmaXhlcwogICAgIyBpZiBvbiBtYWluIG9yIGEgcmVsZWFzZSBicmFuY2gsIGFkdmlzZSB0aGUgdXNlcgogICAgaWYgW1sgIiRicmFuY2hfbmFtZSIgPT0gIiRtYWluYnJhbmNoIiB8fCAiJGJyYW5jaF9uYW1lIiA9PSByZWxlYXNlLyogfHwgIiRicmFuY2hfbmFtZSIgPT0gcmVsZWFzZXMvKiBdXTsgdGhlbgogICAgICAgIHByaW50X3dhcm5pbmcgIllvdSBhcmUgY3VycmVudGx5IG9uIHRoZSAkYnJhbmNoX25hbWUgYnJhbmNoIgogICAgICAgIHJlYWQgLW4gMSAtcyAtcCAiJChlY2hvIC1lICR7QlllbGxvd31EbyB5b3Ugd2FudCB0byBjb250aW51ZSBvbiAkZGV2ZWxvcGJyYW5jaD8gW3kvTl0ke0NvbG9yX09mZn0gKSIgUkVQTFkKICAgICAgICBlY2hvCiAgICAgICAgaWYgW1sgISAkUkVQTFkgPX4gXltZeV0kIF1dOyB0aGVuCiAgICAgICAgICAgIHByaW50X2Vycm9yICJPcGVyYXRpb24gY2FuY2VsbGVkIGJ5IHVzZXIiCiAgICAgICAgICAgIGV4aXQgMQogICAgICAgIGZpCiAgICBmaQogICAgIyBpZiBicmFuY2ggc3RhcnRzIHdpdGggcmVsZWFzZS8gb3IgcmVsZWFzZXMvIG9mZmVyIGRvIHNhbWUgYXMgbWFpbmJyYW5jaAoKICAgICMgaWYgd2UgYXJlIG9uIHRoZSBtYWluIG9yIHN0YWdpbmcgYnJhbmNoLCBzd2l0Y2ggdG8gZGV2ZWxvcAogICAgaWYgWyAiJGJyYW5jaF9uYW1lIiA9PSAiJG1haW5icmFuY2giIF0gfHwgWyAiJGJyYW5jaF9uYW1lIiA9PSAiJHN0YWdpbmdicmFuY2giIF07IHRoZW4KICAgICAgICAjIENoZWNrIGlmIGRldmVsb3AgYnJhbmNoIGV4aXN0cyBiZWZvcmUgYXR0ZW1wdGluZyB0byBzd2l0Y2gKICAgICAgICBpZiBnaXQgc2hvdy1yZWYgLS12ZXJpZnkgLS1xdWlldCAicmVmcy9oZWFkcy8kZGV2ZWxvcGJyYW5jaCI7IHRoZW4KICAgICAgICAgICAgcHJpbnRfaW5mbyAiU3dpdGNoaW5nIHRvICRkZXZlbG9wYnJhbmNoIGJyYW5jaC4uLiIKICAgICAgICAgICAgcnVuX2dpdF9jb21tYW5kICJnaXQgY2hlY2tvdXQgJyRkZXZlbG9wYnJhbmNoJyIgIm5vcm1hbCIKICAgICAgICAgICAgY2hlY2tfZ2l0X3N1Y2Nlc3MKICAgICAgICAgICAgYnJhbmNoX25hbWU9IiRkZXZlbG9wYnJhbmNoIgogICAgICAgICAgICBwcmludF9zdWNjZXNzICJTd2l0Y2hlZCB0byAkZGV2ZWxvcGJyYW5jaCBicmFuY2giCiAgICAgICAgZWxpZiBnaXQgbHMtcmVtb3RlIC0taGVhZHMgb3JpZ2luICIkZGV2ZWxvcGJyYW5jaCIgMj4vZGV2L251bGwgfCBncmVwIC1xICIkZGV2ZWxvcGJyYW5jaCI7IHRoZW4KICAgICAgICAgICAgIyBCcmFuY2ggZXhpc3RzIG9uIHJlbW90ZSBidXQgbm90IGxvY2FsbHkKICAgICAgICAgICAgcHJpbnRfaW5mbyAiRm91bmQgJyRkZXZlbG9wYnJhbmNoJyBicmFuY2ggb24gcmVtb3RlIgogICAgICAgICAgICBlY2hvIC1uICJDaGVjayBvdXQgcmVtb3RlICckZGV2ZWxvcGJyYW5jaCcgYnJhbmNoPyBbWS9uXTogIgogICAgICAgICAgICByZWFkIC1yIGNoZWNrb3V0X3JlbW90ZQogICAgICAgICAgICBpZiBbWyAhICIkY2hlY2tvdXRfcmVtb3RlIiA9fiBeW05uXSQgXV07IHRoZW4KICAgICAgICAgICAgICAgIHByaW50X2luZm8gIkNoZWNraW5nIG91dCAkZGV2ZWxvcGJyYW5jaCBmcm9tIHJlbW90ZS4uLiIKICAgICAgICAgICAgICAgIHJ1bl9naXRfY29tbWFuZCAiZ2l0IGNoZWNrb3V0IC1iICckZGV2ZWxvcGJyYW5jaCcgJ29yaWdpbi8kZGV2ZWxvcGJyYW5jaCciICJub3JtYWwiCiAgICAgICAgICAgICAgICBpZiBbICQ/IC1lcSAwIF07IHRoZW4KICAgICAgICAgICAgICAgICAgICBicmFuY2hfbmFtZT0iJGRldmVsb3BicmFuY2giCiAgICAgICAgICAgICAgICAgICAgcHJpbnRfc3VjY2VzcyAiQ2hlY2tlZCBvdXQgJGRldmVsb3BicmFuY2ggZnJvbSByZW1vdGUiCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgcHJpbnRfZXJyb3IgIkZhaWxlZCB0byBjaGVjayBvdXQgcmVtb3RlIGJyYW5jaCIKICAgICAgICAgICAgICAgICAgICBwcmludF9pbmZvICJDb250aW51aW5nIG9uIGN1cnJlbnQgYnJhbmNoOiAkYnJhbmNoX25hbWUiCiAgICAgICAgICAgICAgICBmaQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBwcmludF9pbmZvICJDb250aW51aW5nIG9uIGN1cnJlbnQgYnJhbmNoOiAkYnJhbmNoX25hbWUiCiAgICAgICAgICAgIGZpCiAgICAgICAgZWxzZQogICAgICAgICAgICAjIE5vIGRldmVsb3AgYnJhbmNoIGZvdW5kIGxvY2FsbHkgb3IgcmVtb3RlbHkKICAgICAgICAgICAgcHJpbnRfd2FybmluZyAi4pqgIERldmVsb3BtZW50IGJyYW5jaCAnJGRldmVsb3BicmFuY2gnIG5vdCBmb3VuZCBsb2NhbGx5IG9yIG9uIHJlbW90ZSIKICAgICAgICAgICAgcHJpbnRfaW5mbyAiXG5GdWxsIHZlcnNpb24gbWFuYWdlbWVudCByZXF1aXJlcyBhIGRldmVsb3BtZW50IGJyYW5jaCBmb3IgR2l0IEZsb3cgd29ya2Zsb3cuIgogICAgICAgICAgICBlY2hvICIiCiAgICAgICAgICAgIGVjaG8gIldvdWxkIHlvdSBsaWtlIHRvOiIKICAgICAgICAgICAgZWNobyAiMSkgQ3JlYXRlICckZGV2ZWxvcGJyYW5jaCcgYnJhbmNoIG5vdyBhbmQgY29udGludWUgKHJlY29tbWVuZGVkKSIKICAgICAgICAgICAgZWNobyAiMikgQ29udGludWUgY29tbWl0IChjb21taXQtb25seSBtb2RlLCBubyB2ZXJzaW9uaW5nKSIKICAgICAgICAgICAgZWNobyAiMykgRXhpdCIKICAgICAgICAgICAgZWNobyAtbiAiRW50ZXIgY2hvaWNlIFsxLTMsIGRlZmF1bHQ6IDFdOiAiCiAgICAgICAgICAgIHJlYWQgLXIgYnJhbmNoX2Nob2ljZQogICAgICAgICAgICAKICAgICAgICAgICAgY2FzZSAiJGJyYW5jaF9jaG9pY2UiIGluCiAgICAgICAgICAgICAgICAyKQogICAgICAgICAgICAgICAgICAgIHByaW50X2luZm8gIkNvbnRpbnVpbmcgaW4gY29tbWl0LW9ubHkgbW9kZSBvbiAkYnJhbmNoX25hbWUiCiAgICAgICAgICAgICAgICAgICAgcHJpbnRfaW5mbyAiTm90ZTogVmVyc2lvbiBtYW5hZ2VtZW50IGFuZCBicmFuY2ggbWVyZ2luZyB3aWxsIGJlIHNraXBwZWQiCiAgICAgICAgICAgICAgICAgICAgIyBTZXQgYSBmbGFnIHRvIGluZGljYXRlIGNvbW1pdC1vbmx5IG1vZGUKICAgICAgICAgICAgICAgICAgICBleHBvcnQgTUFJQVNTX0NPTU1JVF9PTkxZX01PREU9InRydWUiCiAgICAgICAgICAgICAgICAgICAgOzsKICAgICAgICAgICAgICAgIDMpCiAgICAgICAgICAgICAgICAgICAgcHJpbnRfaW5mbyAiRXhpdGluZy4gUnVuICdtYWlhc3MgLS1ib290c3RyYXAnIHRvIGNvbmZpZ3VyZSB5b3VyIHByb2plY3QgcHJvcGVybHkiCiAgICAgICAgICAgICAgICAgICAgZXhpdCAwCiAgICAgICAgICAgICAgICAgICAgOzsKICAgICAgICAgICAgICAgICopCiAgICAgICAgICAgICAgICAgICAgIyBDcmVhdGUgZGV2ZWxvcCBicmFuY2ggKGRlZmF1bHQpCiAgICAgICAgICAgICAgICAgICAgcHJpbnRfaW5mbyAiQ3JlYXRpbmcgJyRkZXZlbG9wYnJhbmNoJyBicmFuY2guLi4iCiAgICAgICAgICAgICAgICAgICAgcnVuX2dpdF9jb21tYW5kICJnaXQgY2hlY2tvdXQgLWIgJyRkZXZlbG9wYnJhbmNoJyIgIm5vcm1hbCIKICAgICAgICAgICAgICAgICAgICBpZiBbICQ/IC1lcSAwIF07IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgYnJhbmNoX25hbWU9IiRkZXZlbG9wYnJhbmNoIgogICAgICAgICAgICAgICAgICAgICAgICBwcmludF9zdWNjZXNzICLinJMgQ3JlYXRlZCBhbmQgc3dpdGNoZWQgdG8gJyRkZXZlbG9wYnJhbmNoJyBicmFuY2giCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50X2luZm8gIkNvbnNpZGVyIHVwZGF0aW5nIHlvdXIgLmVudi5tYWlhc3MgZmlsZSB0byByZWZsZWN0IHRoaXMgY29uZmlndXJhdGlvbiIKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50X2Vycm9yICJGYWlsZWQgdG8gY3JlYXRlICckZGV2ZWxvcGJyYW5jaCcgYnJhbmNoIgogICAgICAgICAgICAgICAgICAgICAgICBwcmludF9pbmZvICJGYWxsaW5nIGJhY2sgdG8gY29tbWl0LW9ubHkgbW9kZSBvbiAkYnJhbmNoX25hbWUiCiAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydCBNQUlBU1NfQ09NTUlUX09OTFlfTU9ERT0idHJ1ZSIKICAgICAgICAgICAgICAgICAgICBmaQogICAgICAgICAgICAgICAgICAgIDs7CiAgICAgICAgICAgIGVzYWMKICAgICAgICBmaQogICAgZmkKICAjIGdldCB0aGUgamlyYSB0aWNrZXQgbnVtYmVyIGZyb20gdGhlIGJyYW5jaAogIGlmIGdpdCByZXYtcGFyc2UgLS12ZXJpZnkgSEVBRCA+L2Rldi9udWxsIDI+JjE7IHRoZW4KICAgIGJyYW5jaF9uYW1lPSQoZ2l0IHJldi1wYXJzZSAtLWFiYnJldi1yZWYgSEVBRCkKICBlbHNlCiAgICBicmFuY2hfbmFtZT0kKGdpdCBzeW1ib2xpYy1yZWYgLS1zaG9ydCBIRUFEIDI+L2Rldi9udWxsIHx8IGVjaG8gIm1haW4iKQogIGZpCiAgamlyYV90aWNrZXRfbnVtYmVyPSQoZWNobyAiJGJyYW5jaF9uYW1lIiB8IGdyZXAgLW9FICdbQS1aXSstWzAtOV0rJykKICAjIGdldCB0aGUgcHJvamVjdCBhcyB0aGUgamlyYSB0aWNrZXQgbnVtYmVyIHdpdGhvdXQgdGhlIGRhc2ggYW5kIG51bWJlcgogIHByb2plY3RfbmFtZT0kKGVjaG8gIiRqaXJhX3RpY2tldF9udW1iZXIiIHwgY3V0IC1kJy0nIC1mMSkKICAjIGdldCB0aGUgY2xpZW50IG5hbWUgZnJvbSB0aGUgcmVtb3RlCiAgY2xpZW50X25hbWU9JChnaXQgY29uZmlnIC0tZ2V0IHJlbW90ZS5vcmlnaW4udXJsIHwgZ3JlcCAtb0UgJ1teL10rXC5naXQkJyB8IHNlZCAncy9cLmdpdCQvLycpCiAgZXhwb3J0IGJyYW5jaF9uYW1lIGppcmFfdGlja2V0X251bWJlciBwcm9qZWN0X25hbWUgY2xpZW50X25hbWUKCn0KCmhhc19zdGFnZWRfY2hhbmdlcygpIHsKICBbIC1uICIkKGdpdCBkaWZmIC0tY2FjaGVkKSIgXQp9CgpoYXNfdW5jb21taXR0ZWRfY2hhbmdlcygpIHsKICBbIC1uICIkKGdpdCBzdGF0dXMgLS1wb3JjZWxhaW4pIiBdCn0KCmhhc191bnN0YWdlZF9jaGFuZ2VzKCkgewogIFsgLW4gIiQoZ2l0IHN0YXR1cyAtLXBvcmNlbGFpbiB8IGdyZXAgLUUgJ14uW15bOnNwYWNlOl1dJykiIF0KfQoKZnVuY3Rpb24gY2hhbmdlTWFuYWdlbWVudCgpewogIGNoZWNrVW5jb21taXR0ZWRDaGFuZ2VzCn0KCmZ1bmN0aW9uIG1lcmdlRGV2ZWxvcCgpIHsKICBsb2NhbCBoYXNfdmVyc2lvbl9maWxlcz0iJHsxOi10cnVlfSIgICMgRGVmYXVsdCB0byB0cnVlIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5CiAgc2hpZnQgICMgUmVtb3ZlIHRoZSBmaXJzdCBhcmd1bWVudCBzbyByZW1haW5pbmcgYXJncyBjYW4gYmUgcGFzc2VkIHRvIGdldFZlcnNpb24KCiAgcHJpbnRfZGVidWcgIkdpdCBXb3JrZmxvdyIKCiAgIyBDaGVjayBmb3IgdW5jb21taXR0ZWQgY2hhbmdlcyBmaXJzdAogIGlmIGhhc191bmNvbW1pdHRlZF9jaGFuZ2VzOyB0aGVuCiAgICBwcmludF93YXJuaW5nICJZb3UgaGF2ZSB1bmNvbW1pdHRlZCBjaGFuZ2VzLiIKICAgIHJlYWQgLW4gMSAtcyAtcCAiJChlY2hvIC1lICR7QlllbGxvd31EbyB5b3Ugd2FudCB0byBjb21taXQgdGhlbSBub3c/IFt5L05dJHtDb2xvcl9PZmZ9ICkiIFJFUExZCiAgICBlY2hvCiAgICBpZiBbWyAkUkVQTFkgPX4gXltZeV0kIF1dOyB0aGVuCiAgICAgIGhhbmRsZV9zdGFnZWRfY29tbWl0CiAgICAgICMgQ2hlY2sgYWdhaW4gaWYgdGhlcmUgYXJlIHN0aWxsIHVuY29tbWl0dGVkIGNoYW5nZXMKICAgICAgaWYgaGFzX3VuY29tbWl0dGVkX2NoYW5nZXM7IHRoZW4KICAgICAgICBwcmludF9lcnJvciAiU3RpbGwgaGF2ZSB1bmNvbW1pdHRlZCBjaGFuZ2VzLiBQbGVhc2UgY29tbWl0IG9yIHN0YXNoIHRoZW0gZmlyc3QuIgogICAgICAgIGV4aXQgMQogICAgICBmaQogICAgZWxzZQogICAgICBwcmludF9lcnJvciAiQ2Fubm90IHByb2NlZWQgd2l0aCB1bmNvbW1pdHRlZCBjaGFuZ2VzLiBQbGVhc2UgY29tbWl0IG9yIHN0YXNoIHRoZW0gZmlyc3QuIgogICAgICBleGl0IDEKICAgIGZpCiAgZmkKCiAgIyBHZXQgY3VycmVudCBicmFuY2ggbmFtZQogIGxvY2FsIGN1cnJlbnRfYnJhbmNoCiAgaWYgZ2l0IHJldi1wYXJzZSAtLXZlcmlmeSBIRUFEID4vZGV2L251bGwgMj4mMTsgdGhlbgogICAgY3VycmVudF9icmFuY2g9JChnaXQgcmV2LXBhcnNlIC0tYWJicmV2LXJlZiBIRUFEKQogIGVsc2UKICAgIGN1cnJlbnRfYnJhbmNoPSQoZ2l0IHN5bWJvbGljLXJlZiAtLXNob3J0IEhFQUQgMj4vZGV2L251bGwgfHwgZWNobyAibWFpbiIpCiAgZmkKCiAgIyBDaGVjayBpZiB3ZSdyZSBhbHJlYWR5IG9uIGRldmVsb3Agb3IgbmVlZCB0byBtZXJnZQogIGlmIFsgIiRjdXJyZW50X2JyYW5jaCIgIT0gIiRkZXZlbG9wYnJhbmNoIiBdOyB0aGVuCiAgICBwcmludF9pbmZvICJOb3Qgb24gJGRldmVsb3BicmFuY2ggYnJhbmNoIChjdXJyZW50bHkgb24gJGN1cnJlbnRfYnJhbmNoKSIKICAgIHJlYWQgLW4gMSAtcyAtcCAiJChlY2hvIC1lICR7WWVsbG93fURvIHlvdSB3YW50IHRvIG1lcmdlICR7QkdyZWVufSRjdXJyZW50X2JyYW5jaCR7WWVsbG93fSBpbnRvICR7QkdyZWVufSRkZXZlbG9wYnJhbmNoJHtZZWxsb3d9PyBbeS9OXSR7Q29sb3JfT2ZmfSApIiBSRVBMWQogICAgZWNobwogICAgaWYgW1sgISAkUkVQTFkgPX4gXltZeV0kIF1dOyB0aGVuCiAgICAgIHByaW50X2luZm8gIlVzZXIgY2hvc2Ugbm90IHRvIG1lcmdlIGludG8gJGRldmVsb3BicmFuY2guIFN0YXlpbmcgb24gJGN1cnJlbnRfYnJhbmNoLiIKICAgICAgIyBwcmludF9pbmZvICJBbGwgZG9uZS4gWW91IGFyZSBvbiBicmFuY2g6ICR7QldoaXRlfSRjdXJyZW50X2JyYW5jaCR7Q29sb3JfT2ZmfSIKICAgICAgcHJpbnRfc2lnbm9mZl93aXRoX3RvcHVwCiAgICAgIGV4aXQgMAogICAgZmkKCiAgICAjIENoZWNrb3V0IGRldmVsb3AgYW5kIHVwZGF0ZSBpdAogICAgcnVuX2dpdF9jb21tYW5kICJnaXQgY2hlY2tvdXQgJyRkZXZlbG9wYnJhbmNoJyIgIm5vcm1hbCIKICAgIGNoZWNrX2dpdF9zdWNjZXNzCgogICAgIyBQdWxsIGxhdGVzdCBjaGFuZ2VzCiAgICBpZiByZW1vdGVfZXhpc3RzICJvcmlnaW4iOyB0aGVuCiAgICAgIHByaW50X2luZm8gIlB1bGxpbmcgbGF0ZXN0IGNoYW5nZXMgZnJvbSAkZGV2ZWxvcGJyYW5jaC4uLiIKICAgICAgcnVuX2dpdF9jb21tYW5kICJnaXQgcHVsbCBvcmlnaW4gJyRkZXZlbG9wYnJhbmNoJyIgIm5vcm1hbCIKICAgICAgY2hlY2tfZ2l0X3N1Y2Nlc3MKICAgIGZpCgogICAgIyBNZXJnZSB0aGUgYnJhbmNoCiAgICBydW5fZ2l0X2NvbW1hbmQgImdpdCBtZXJnZSAtLW5vLWZmIC1tICdNZXJnZSAkY3VycmVudF9icmFuY2ggaW50byAkZGV2ZWxvcGJyYW5jaCcgJyRjdXJyZW50X2JyYW5jaCciICJub3JtYWwiCiAgICBjaGVja19naXRfc3VjY2VzcwogICAgbG9ndGhpcyAiTWVyZ2VkICRjdXJyZW50X2JyYW5jaCBpbnRvICRkZXZlbG9wYnJhbmNoIgogIGVsc2UKICAgICMgT24gZGV2ZWxvcCwganVzdCBwdWxsIGxhdGVzdAogICAgaWYgcmVtb3RlX2V4aXN0cyAib3JpZ2luIjsgdGhlbgogICAgICBwcmludF9pbmZvICJQdWxsaW5nIGxhdGVzdCBjaGFuZ2VzIGZyb20gJGRldmVsb3BicmFuY2guLi4iCiAgICAgIHJ1bl9naXRfY29tbWFuZCAiZ2l0IHB1bGwgb3JpZ2luICckZGV2ZWxvcGJyYW5jaCciICJub3JtYWwiCiAgICAgIGNoZWNrX2dpdF9zdWNjZXNzCiAgICBmaQogIGZpCgogICMgT25seSBwcm9jZWVkIHdpdGggdmVyc2lvbiBtYW5hZ2VtZW50IGlmIHZlcnNpb24gZmlsZXMgZXhpc3QgYW5kIHdlJ3JlIG9uIGRldmVsb3AKICBsb2NhbCBjdXJyZW50X2JyYW5jaF9jaGVjawogIGlmIGdpdCByZXYtcGFyc2UgLS12ZXJpZnkgSEVBRCA+L2Rldi9udWxsIDI+JjE7IHRoZW4KICAgIGN1cnJlbnRfYnJhbmNoX2NoZWNrPSQoZ2l0IHJldi1wYXJzZSAtLWFiYnJldi1yZWYgSEVBRCkKICBlbHNlCiAgICBjdXJyZW50X2JyYW5jaF9jaGVjaz0kKGdpdCBzeW1ib2xpYy1yZWYgLS1zaG9ydCBIRUFEIDI+L2Rldi9udWxsIHx8IGVjaG8gIm1haW4iKQogIGZpCiAgCiAgaWYgW1sgIiRoYXNfdmVyc2lvbl9maWxlcyIgPT0gInRydWUiICYmICIkY3VycmVudF9icmFuY2hfY2hlY2siID09ICIkZGV2ZWxvcGJyYW5jaCIgXV07IHRoZW4KICAgICMgR2V0IHRoZSB2ZXJzaW9uIGJ1bXAgdHlwZSAobWFqb3IsIG1pbm9yLCBwYXRjaCkKICAgIGxvY2FsIGJ1bXBfdHlwZT0iJHsxOi1wYXRjaH0iICAjIERlZmF1bHQgdG8gcGF0Y2ggaWYgbm90IHNwZWNpZmllZAogICAgc2hpZnQKCiAgICAjIEJ1bXAgdGhlIHZlcnNpb24KICAgIGdldFZlcnNpb24gIiRidW1wX3R5cGUiCgogICAgIyBEZXRlcm1pbmUgaWYgd2Ugc2hvdWxkIGNyZWF0ZSBhIHJlbGVhc2UgYnJhbmNoIGFuZCB0YWcKICAgIGxvY2FsIGNyZWF0ZV9yZWxlYXNlPXRydWUKICAgIGlmIFsgIiRidW1wX3R5cGUiID09ICJwYXRjaCIgXTsgdGhlbgogICAgICByZWFkIC1uIDEgLXMgLXAgIiQoZWNobyAtZSAke0JZZWxsb3d9VGhpcyBpcyBhIHBhdGNoIHZlcnNpb24uIENyZWF0ZSBhIHJlbGVhc2UgYnJhbmNoIGFuZCB0YWc/IFt5L05dJHtDb2xvcl9PZmZ9ICkiIFJFUExZCiAgICAgIGVjaG8KICAgICAgaWYgW1sgJFJFUExZID1+IF5bWXldJCBdXTsgdGhlbgogICAgICAgIGNyZWF0ZV9yZWxlYXNlPXRydWUKICAgICAgZWxzZQogICAgICAgIGNyZWF0ZV9yZWxlYXNlPWZhbHNlCiAgICAgIGZpCiAgICBmaQoKICAgIGlmIFsgIiRjcmVhdGVfcmVsZWFzZSIgPT0gdHJ1ZSBdOyB0aGVuCiAgICAgICMgQ3JlYXRlIHJlbGVhc2UgYnJhbmNoCiAgICAgIHJ1bl9naXRfY29tbWFuZCAiZ2l0IGNoZWNrb3V0IC1iICdyZWxlYXNlLyRuZXd2ZXJzaW9uJyIgIm5vcm1hbCIKICAgICAgY2hlY2tfZ2l0X3N1Y2Nlc3MKCiAgICAgICMgVXBkYXRlIHZlcnNpb24gYW5kIGNoYW5nZWxvZwogICAgICBidW1wVmVyc2lvbgogICAgICB1cGRhdGVDaGFuZ2Vsb2cgIiRjaGFuZ2Vsb2dfcGF0aCIgIiRuZXd2ZXJzaW9uIgoKICAgICAgIyBDb21taXQgY2hhbmdlcwogICAgICBydW5fZ2l0X2NvbW1hbmQgImdpdCBhZGQgLUEiICJub3JtYWwiCiAgICAgIHJ1bl9naXRfY29tbWFuZCAiZ2l0IGNvbW1pdCAtbSAnQnVtcGVkIHZlcnNpb24gdG8gJG5ld3ZlcnNpb24nIiAibm9ybWFsIgogICAgICBjaGVja19naXRfc3VjY2VzcwoKICAgICAgIyBDcmVhdGUgdGFnCiAgICAgIGlmICEgZ2l0IHRhZyAtbCAiJG5ld3ZlcnNpb24iIHwgZ3JlcCAtcSAiXiRuZXd2ZXJzaW9uJCI7IHRoZW4KICAgICAgICBydW5fZ2l0X2NvbW1hbmQgImdpdCB0YWcgLWEgJyRuZXd2ZXJzaW9uJyAtbSAnUmVsZWFzZSB2ZXJzaW9uICRuZXd2ZXJzaW9uJyIgIm5vcm1hbCIKICAgICAgICBjaGVja19naXRfc3VjY2VzcwogICAgICAgIHByaW50X3N1Y2Nlc3MgIkNyZWF0ZWQgcmVsZWFzZSB0YWcgJG5ld3ZlcnNpb24iCiAgICAgIGVsc2UKICAgICAgICBwcmludF93YXJuaW5nICJUYWcgJG5ld3ZlcnNpb24gYWxyZWFkeSBleGlzdHMiCiAgICAgIGZpCgogICAgICAjIFB1c2ggdGhlIHJlbGVhc2UgYnJhbmNoIGFuZCB0YWcgaWYgcmVtb3RlIGV4aXN0cwogICAgICBpZiByZW1vdGVfZXhpc3RzICJvcmlnaW4iOyB0aGVuCiAgICAgICAgcnVuX2dpdF9jb21tYW5kICJnaXQgcHVzaCAtdSBvcmlnaW4gJ3JlbGVhc2UvJG5ld3ZlcnNpb24nIiAibm9ybWFsIgogICAgICAgIHJ1bl9naXRfY29tbWFuZCAiZ2l0IHB1c2ggb3JpZ2luICckbmV3dmVyc2lvbiciICJub3JtYWwiCiAgICAgIGZpCgogICAgICAjIEdvIGJhY2sgdG8gZGV2ZWxvcAogICAgICBydW5fZ2l0X2NvbW1hbmQgImdpdCBjaGVja291dCAnJGRldmVsb3BicmFuY2gnIiAibm9ybWFsIgogICAgICBjaGVja19naXRfc3VjY2VzcwoKICAgICAgIyBNZXJnZSByZWxlYXNlIGJyYW5jaCBpbnRvIGRldmVsb3AKICAgICAgcnVuX2dpdF9jb21tYW5kICJnaXQgbWVyZ2UgLS1uby1mZiAtbSAnTWVyZ2UgcmVsZWFzZS8kbmV3dmVyc2lvbiBpbnRvICRkZXZlbG9wYnJhbmNoJyAncmVsZWFzZS8kbmV3dmVyc2lvbiciICJub3JtYWwiCiAgICAgIGNoZWNrX2dpdF9zdWNjZXNzCgogICAgICBwcmludF9zdWNjZXNzICJNZXJnZWQgcmVsZWFzZS8kbmV3dmVyc2lvbiBpbnRvICRkZXZlbG9wYnJhbmNoIgogICAgICAjIFB1c2ggZGV2ZWxvcAogICAgICBpZiByZW1vdGVfZXhpc3RzICJvcmlnaW4iOyB0aGVuCiAgICAgICAgcnVuX2dpdF9jb21tYW5kICJnaXQgcHVzaCBvcmlnaW4gJyRkZXZlbG9wYnJhbmNoJyIgIm5vcm1hbCIKICAgICAgZmkKCiAgICAgIGNoZWNrX2dpdF9zdWNjZXNzCiAgICBlbHNlCiAgICAgICMgRm9yIHBhdGNoIHZlcnNpb25zIHdpdGhvdXQgcmVsZWFzZSBicmFuY2gsIHVwZGF0ZSBkaXJlY3RseSBvbiBkZXZlbG9wCiAgICAgIHByaW50X2luZm8gIlVwZGF0aW5nIHZlcnNpb24gYW5kIGNoYW5nZWxvZyBkaXJlY3RseSBvbiAkZGV2ZWxvcGJyYW5jaC4uLiIKICAgICAgYnVtcFZlcnNpb24KICAgICAgdXBkYXRlQ2hhbmdlbG9nICIkY2hhbmdlbG9nX3BhdGgiICIkbmV3dmVyc2lvbiIKCiAgICAgICMgQ29tbWl0IGNoYW5nZXMKICAgICAgcnVuX2dpdF9jb21tYW5kICJnaXQgYWRkIC1BIiAibm9ybWFsIgogICAgICBydW5fZ2l0X2NvbW1hbmQgImdpdCBjb21taXQgLW0gJ0J1bXAgdmVyc2lvbiB0byAkbmV3dmVyc2lvbiAobm8gcmVsZWFzZSknIiAibm9ybWFsIgogICAgICBjaGVja19naXRfc3VjY2VzcwoKICAgICAgIyBQdXNoIGNoYW5nZXMgaWYgcmVtb3RlIGV4aXN0cwogICAgICBpZiByZW1vdGVfZXhpc3RzICJvcmlnaW4iOyB0aGVuCiAgICAgICAgcnVuX2dpdF9jb21tYW5kICJnaXQgcHVzaCBvcmlnaW4gJyRkZXZlbG9wYnJhbmNoJyIgIm5vcm1hbCIKICAgICAgZmkKCiAgICAgIHByaW50X3N1Y2Nlc3MgIlZlcnNpb24gdXBkYXRlZCB0byAkbmV3dmVyc2lvbiBvbiAkZGV2ZWxvcGJyYW5jaCIKICAgIGZpCiAgZWxzZQogICAgIyBKdXN0IGRvIHRoZSBnaXQgd29ya2Zsb3cgd2l0aG91dCB2ZXJzaW9uIG1hbmFnZW1lbnQKICAgIHByaW50X2luZm8gIlNraXBwaW5nIHZlcnNpb24gYnVtcCBhbmQgY2hhbmdlbG9nIHVwZGF0ZSAobm8gdmVyc2lvbiBmaWxlcykiCiAgICAjIE9ubHkgc2hvdyBtZXJnZSBzdWNjZXNzIGlmIGRldmVsb3AgYnJhbmNoIGV4aXN0cwogICAgaWYgYnJhbmNoX2V4aXN0cyAiJGRldmVsb3BicmFuY2giOyB0aGVuCiAgICAgIHByaW50X3N1Y2Nlc3MgIk1lcmdlZCAkYnJhbmNoX25hbWUgaW50byAkZGV2ZWxvcGJyYW5jaCIKICAgIGVsc2UKICAgICAgcHJpbnRfaW5mbyAiQ29tcGxldGVkIHdvcmtmbG93IG9uIGN1cnJlbnQgYnJhbmNoIChubyBkZXZlbG9wIGJyYW5jaCkiCiAgICBmaQogIGZpCn0KCiMgZnVuY3Rpb24gdG8gc2hvdyBkZXBsb3kgb3B0aW9ucwpmdW5jdGlvbiBkZXBsb3lPcHRpb25zKCkgewogICMgQ2hlY2sgd2hhdCBicmFuY2hlcyBhcmUgYXZhaWxhYmxlIGFuZCBhZGFwdCBvcHRpb25zIGFjY29yZGluZ2x5CiAgbG9jYWwgaGFzX2RldmVsb3AgaGFzX3N0YWdpbmcgaGFzX21haW4gaGFzX3JlbW90ZQogIGhhc19kZXZlbG9wPSQoYnJhbmNoX2V4aXN0cyAiJGRldmVsb3BicmFuY2giICYmIGVjaG8gInRydWUiIHx8IGVjaG8gImZhbHNlIikKICBoYXNfc3RhZ2luZz0kKGJyYW5jaF9leGlzdHMgIiRzdGFnaW5nYnJhbmNoIiAmJiBlY2hvICJ0cnVlIiB8fCBlY2hvICJmYWxzZSIpCiAgaGFzX21haW49JChicmFuY2hfZXhpc3RzICIkbWFpbmJyYW5jaCIgJiYgZWNobyAidHJ1ZSIgfHwgZWNobyAiZmFsc2UiKQogIGhhc19yZW1vdGU9JChyZW1vdGVfZXhpc3RzICJvcmlnaW4iICYmIGVjaG8gInRydWUiIHx8IGVjaG8gImZhbHNlIikKCiAgZWNobyAtZSAiJHtCWWVsbG93fVdoYXQgd291bGQgeW91IGxpa2UgdG8gZG8/JHtTb2Z0UGlua30iCgogICMgQnVpbGQgZHluYW1pYyBtZW51IGJhc2VkIG9uIGF2YWlsYWJsZSBicmFuY2hlcwogIGxvY2FsIG9wdGlvbl9jb3VudD0wCiAgbG9jYWwgb3B0aW9ucz0oKQoKICBpZiBbWyAiJGhhc19kZXZlbG9wIiA9PSAidHJ1ZSIgJiYgIiRoYXNfc3RhZ2luZyIgPT0gInRydWUiIF1dOyB0aGVuCiAgICAoKG9wdGlvbl9jb3VudCsrKSkKICAgIG9wdGlvbnNbIiRvcHRpb25fY291bnQiXT0ibWVyZ2VfZGV2ZWxvcF90b19zdGFnaW5nIgogICAgZWNobyAiJG9wdGlvbl9jb3VudCkgTWVyZ2UgJGRldmVsb3BicmFuY2ggdG8gJHN0YWdpbmdicmFuY2giCiAgZmkKCiAgaWYgW1sgIiRoYXNfc3RhZ2luZyIgPT0gInRydWUiIF1dOyB0aGVuCiAgICAoKG9wdGlvbl9jb3VudCsrKSkKICAgIG9wdGlvbnNbIiRvcHRpb25fY291bnQiXT0ibWVyZ2VfY3VycmVudF90b19zdGFnaW5nIgogICAgZWNobyAiJG9wdGlvbl9jb3VudCkgTWVyZ2UgJGJyYW5jaF9uYW1lIHRvICRzdGFnaW5nYnJhbmNoIgogIGZpCgogICMgT25seSBzaG93IGRpcmVjdCBtZXJnZSB0byBtYWluIGlmIG5vIHN0YWdpbmcgYnJhbmNoIGV4aXN0cyAocHJvcGVyIEdpdCBGbG93KQogIGlmIFtbICIkaGFzX21haW4iID09ICJ0cnVlIiAmJiAiJGhhc19zdGFnaW5nIiA9PSAiZmFsc2UiIF1dOyB0aGVuCiAgICAoKG9wdGlvbl9jb3VudCsrKSkKICAgIG9wdGlvbnNbIiRvcHRpb25fY291bnQiXT0ibWVyZ2VfdG9fbWFpbiIKICAgIGlmIFtbICIkaGFzX2RldmVsb3AiID09ICJ0cnVlIiBdXTsgdGhlbgogICAgICBlY2hvICIkb3B0aW9uX2NvdW50KSBNZXJnZSAkZGV2ZWxvcGJyYW5jaCB0byAkbWFpbmJyYW5jaCIKICAgIGVsc2UKICAgICAgZWNobyAiJG9wdGlvbl9jb3VudCkgTWVyZ2UgJGJyYW5jaF9uYW1lIHRvICRtYWluYnJhbmNoIgogICAgZmkKICBmaQoKICBpZiBbWyAiJGhhc19yZW1vdGUiID09ICJ0cnVlIiBdXTsgdGhlbgogICAgKChvcHRpb25fY291bnQrKykpCiAgICBvcHRpb25zWyIkb3B0aW9uX2NvdW50Il09InB1c2hfY3VycmVudCIKICAgIGVjaG8gIiRvcHRpb25fY291bnQpIFB1c2ggY3VycmVudCBicmFuY2ggdG8gcmVtb3RlIgogIGZpCgogICgob3B0aW9uX2NvdW50KyspKQogIG9wdGlvbnNbIiRvcHRpb25fY291bnQiXT0iZG9fbm90aGluZyIKICBlY2hvICIkb3B0aW9uX2NvdW50KSBEbyBub3RoaW5nIChmaW5pc2ggaGVyZSkiCgogIGlmIFtbICRvcHRpb25fY291bnQgLWVxIDEgXV07IHRoZW4KICAgIHByaW50X3dhcm5pbmcgIkxpbWl0ZWQgb3B0aW9ucyBhdmFpbGFibGUgZHVlIHRvIHJlcG9zaXRvcnkgc3RydWN0dXJlIgogIGZpCgogIHJlYWQgLXAgIiQoZWNobyAtZSAke0JZZWxsb3d9RW50ZXIgY2hvaWNlIFsxLSRvcHRpb25fY291bnQsIEVudGVyIGZvciAkb3B0aW9uX2NvdW50XTogJHtDb2xvcl9PZmZ9KSIgY2hvaWNlCgogICMgRGVmYXVsdCB0byAiZG8gbm90aGluZyIgaWYgdXNlciBqdXN0IGhpdHMgRW50ZXIKICBpZiBbWyAteiAiJGNob2ljZSIgXV07IHRoZW4KICAgIGNob2ljZT0iJG9wdGlvbl9jb3VudCIgICMgImRvIG5vdGhpbmciIGlzIGFsd2F5cyB0aGUgbGFzdCBvcHRpb24KICBmaQoKICAjIEhhbmRsZSB1c2VyIGNob2ljZSBiYXNlZCBvbiBhdmFpbGFibGUgb3B0aW9ucwogIGlmIFtbICIkY2hvaWNlIiA9fiBeWzAtOV0rJCBdXSAmJiBbWyAiJGNob2ljZSIgLWdlIDEgXV0gJiYgW1sgIiRjaG9pY2UiIC1sZSAiJG9wdGlvbl9jb3VudCIgXV07IHRoZW4KICAgIGxvY2FsIHNlbGVjdGVkX2FjdGlvbj0iJHtvcHRpb25zWyRjaG9pY2VdfSIKCiAgICBjYXNlICIkc2VsZWN0ZWRfYWN0aW9uIiBpbgogICAgICAibWVyZ2VfZGV2ZWxvcF90b19zdGFnaW5nIikKICAgICAgICBwcmludF9pbmZvICJNZXJnaW5nICRkZXZlbG9wYnJhbmNoIHRvICRzdGFnaW5nYnJhbmNoIgogICAgICAgIHBlcmZvcm1fbWVyZ2Vfb3BlcmF0aW9uICIkZGV2ZWxvcGJyYW5jaCIgIiRzdGFnaW5nYnJhbmNoIgogICAgICAgIDs7CiAgICAgICJtZXJnZV9jdXJyZW50X3RvX3N0YWdpbmciKQogICAgICAgIHByaW50X2luZm8gIk1lcmdpbmcgJGJyYW5jaF9uYW1lIHRvICRzdGFnaW5nYnJhbmNoIgogICAgICAgIHBlcmZvcm1fbWVyZ2Vfb3BlcmF0aW9uICIkYnJhbmNoX25hbWUiICIkc3RhZ2luZ2JyYW5jaCIKICAgICAgICA7OwogICAgICAibWVyZ2VfdG9fbWFpbiIpCiAgICAgICAgbG9jYWwgc291cmNlX2JyYW5jaAogICAgICAgIGlmIFtbICIkaGFzX2RldmVsb3AiID09ICJ0cnVlIiBdXTsgdGhlbgogICAgICAgICAgc291cmNlX2JyYW5jaD0iJGRldmVsb3BicmFuY2giCiAgICAgICAgZWxzZQogICAgICAgICAgc291cmNlX2JyYW5jaD0iJGJyYW5jaF9uYW1lIgogICAgICAgIGZpCiAgICAgICAgcHJpbnRfaW5mbyAiTWVyZ2luZyAkc291cmNlX2JyYW5jaCB0byAkbWFpbmJyYW5jaCIKICAgICAgICBwZXJmb3JtX21lcmdlX29wZXJhdGlvbiAiJHNvdXJjZV9icmFuY2giICIkbWFpbmJyYW5jaCIKICAgICAgICA7OwogICAgICAicHVzaF9jdXJyZW50IikKICAgICAgICBwcmludF9pbmZvICJQdXNoaW5nIGN1cnJlbnQgYnJhbmNoIHRvIHJlbW90ZSIKICAgICAgICBpZiBjYW5fcHVzaF90b19yZW1vdGUgIm9yaWdpbiI7IHRoZW4KICAgICAgICAgIHJ1bl9naXRfY29tbWFuZCAiZ2l0IHB1c2ggLS1zZXQtdXBzdHJlYW0gb3JpZ2luICckYnJhbmNoX25hbWUnIiAibm9ybWFsIiB8fCBydW5fZ2l0X2NvbW1hbmQgImdpdCBwdXNoIG9yaWdpbiAnJGJyYW5jaF9uYW1lJyIgIm5vcm1hbCIKICAgICAgICAgIGNoZWNrX2dpdF9zdWNjZXNzCiAgICAgICAgICBwcmludF9zdWNjZXNzICJQdXNoZWQgJGJyYW5jaF9uYW1lIHRvIHJlbW90ZSIKICAgICAgICBlbHNlCiAgICAgICAgICBwcmludF9lcnJvciAiQ2Fubm90IHB1c2ggdG8gcmVtb3RlIgogICAgICAgIGZpCiAgICAgICAgOzsKICAgICAgImRvX25vdGhpbmciKQogICAgICAgIHByaW50X2luZm8gIk5vIGFjdGlvbiBzZWxlY3RlZCAtIGZpbmlzaGluZyBoZXJlIgogICAgICAgIDs7CiAgICAgICopCiAgICAgICAgcHJpbnRfZXJyb3IgIkludmFsaWQgc2VsZWN0aW9uIgogICAgICAgIDs7CiAgICBlc2FjCiAgZWxzZQogICAgcHJpbnRfZXJyb3IgIkludmFsaWQgY2hvaWNlLiBQbGVhc2Ugc2VsZWN0IGEgbnVtYmVyIGJldHdlZW4gMSBhbmQgJG9wdGlvbl9jb3VudCIKICBmaQoKICBydW5fZ2l0X2NvbW1hbmQgImdpdCBjaGVja291dCAnJGJyYW5jaF9uYW1lJyIgIm5vcm1hbCIKCiAgIyBwcmludF9pbmZvICJBbGwgZG9uZS4gWW91IGFyZSBvbiBicmFuY2g6ICR7QldoaXRlfSRicmFuY2hfbmFtZSR7Q29sb3JfT2ZmfSIKICBpZiB0eXBlIC10IHByaW50X3NpZ25vZmZfd2l0aF90b3B1cCA+L2Rldi9udWxsIDI+JjE7IHRoZW4KICAgIHByaW50X3NpZ25vZmZfd2l0aF90b3B1cAogIGZpCgogICMgQ2xlYW4gdXAKICB1bnNldCBHSVRfTUVSR0VfQVVUT0VESVQKICB1bnNldCB0YWdtZXNzYWdlCn0KCiMgRnVuY3Rpb24gdG8gY2hlY2sgaWYgd2UncmUgaW4gYSBnaXQgcmVwb3NpdG9yeQpjaGVja19naXRfcmVwb3NpdG9yeSgpIHsKICBpZiAhIGdpdCByZXYtcGFyc2UgLS1naXQtZGlyID4vZGV2L251bGwgMj4mMTsgdGhlbgogICAgcHJpbnRfZXJyb3IgIlRoaXMgZGlyZWN0b3J5IGlzIG5vdCBhIGdpdCByZXBvc2l0b3J5ISIKICAgIHByaW50X2Vycm9yICJQbGVhc2UgcnVuIHRoaXMgc2NyaXB0IGZyb20gd2l0aGluIGEgZ2l0IHJlcG9zaXRvcnkuIgogICAgZXhpdCAxCiAgZmkKCiAgIyBHZXQgdGhlIHJlcG9zaXRvcnkgcm9vdCBkaXJlY3RvcnkKICBsb2NhbCBnaXRfcm9vdAogIGdpdF9yb290PSQoZ2l0IHJldi1wYXJzZSAtLXNob3ctdG9wbGV2ZWwgMj4vZGV2L251bGwpCiAgaWYgW1sgLXogIiRnaXRfcm9vdCIgXV07IHRoZW4KICAgIHByaW50X2Vycm9yICJVbmFibGUgdG8gZGV0ZXJtaW5lIGdpdCByZXBvc2l0b3J5IHJvb3QhIgogICAgZXhpdCAxCiAgZmkKCiAgZXhwb3J0IGdpdF9yb290CiAgcHJpbnRfZGVidWcgIkdpdCByZXBvc2l0b3J5IGRldGVjdGVkOiAkZ2l0X3Jvb3QiCgp9CgpmaSAjIF9fU1JDX19Wb2x1bWVzX2VuaWdtYWRldl9lbmlnbWFkZXZfc3RhdGljX21haWFzc193aG9sZV9iYXNobWFpYXNzX2xpYl9jb3JlX2dpdF9zaAojIC0tLSBFbmQgaW5saW5lZDogL1ZvbHVtZXMvZW5pZ21hZGV2L2VuaWdtYWRldi9zdGF0aWMvbWFpYXNzLXdob2xlL2Jhc2htYWlhc3MvbGliL2NvcmUvZ2l0LnNoIC0tLQoKIyAtLS0gQmVnaW4gaW5saW5lZDogL1ZvbHVtZXMvZW5pZ21hZGV2L2VuaWdtYWRldi9zdGF0aWMvbWFpYXNzLXdob2xlL2Jhc2htYWlhc3MvbGliL2NvcmUvY2hhbmdlbG9nLnNoIC0tLQppZiBbWyAteiAiJHtfX1NSQ19fVm9sdW1lc19lbmlnbWFkZXZfZW5pZ21hZGV2X3N0YXRpY19tYWlhc3Nfd2hvbGVfYmFzaG1haWFzc19saWJfY29yZV9jaGFuZ2Vsb2dfc2g6LX0iIF1dOyB0aGVuIF9fU1JDX19Wb2x1bWVzX2VuaWdtYWRldl9lbmlnbWFkZXZfc3RhdGljX21haWFzc193aG9sZV9iYXNobWFpYXNzX2xpYl9jb3JlX2NoYW5nZWxvZ19zaD0xCgpmdW5jdGlvbiB1cGRhdGVDaGFuZ2Vsb2coKSB7CiAgICBsb2NhbCBjaGFuZ2Vsb2dwYXRoPSIkMSIKICAgIGxvY2FsIHZlcnNpb249IiQyIgogICAgWyAteiAiJGNoYW5nZWxvZ3BhdGgiIF0gJiYgY2hhbmdlbG9ncGF0aD0iLiIKCiAgICAjIERldGVybWluZSBjaGFuZ2Vsb2cgcmFuZ2UgZnJvbSBsYXRlc3QgdmVyc2lvbiBlbnRyeSBpbiB0aGUgY2hhbmdlbG9nCiAgICBpZiBbIC1mICIkY2hhbmdlbG9ncGF0aC8kY2hhbmdlbG9nX25hbWUiIF07IHRoZW4KICAgICAgICBsYXN0X3ZlcnNpb249JChncmVwIC1tMSAnXiMjICcgIiRjaGFuZ2Vsb2dwYXRoLyRjaGFuZ2Vsb2dfbmFtZSIgfCBzZWQgJ3MvXiMjIC8vJykKICAgICAgICBsYXN0X2NoYW5nZWxvZ19jb21taXQ9JChnaXQgbG9nIC0xIC0tZm9ybWF0PSIlSCIgLVMiIyMgJGxhc3RfdmVyc2lvbiIgLS0gIiRjaGFuZ2Vsb2dwYXRoLyRjaGFuZ2Vsb2dfbmFtZSIpCiAgICBmaQoKICAgIGlmIFsgLXogIiRsYXN0X2NoYW5nZWxvZ19jb21taXQiIF07IHRoZW4KICAgICAgICBpZiBnaXQgcmV2LXBhcnNlIC0tdmVyaWZ5IEhFQUQgPi9kZXYvbnVsbCAyPiYxOyB0aGVuCiAgICAgICAgICAgIGxhc3RfY2hhbmdlbG9nX2NvbW1pdD0kKGdpdCByZXYtbGlzdCAtLW1heC1wYXJlbnRzPTAgSEVBRCkKICAgICAgICBlbHNlCiAgICAgICAgICAgICMgTm8gY29tbWl0cyB5ZXQsIHNraXAgY2hhbmdlbG9nIGdlbmVyYXRpb24KICAgICAgICAgICAgcmV0dXJuIDAKICAgICAgICBmaQogICAgZmkKCiAgICAjIFNraXAgY2hhbmdlbG9nIGlmIG5vIGNvbW1pdHMgZXhpc3QKICAgIGlmICEgZ2l0IHJldi1wYXJzZSAtLXZlcmlmeSBIRUFEID4vZGV2L251bGwgMj4mMTsgdGhlbgogICAgICAgIHJldHVybiAwCiAgICBmaQoKICAgIGxvZ19yYW5nZT0iJGxhc3RfY2hhbmdlbG9nX2NvbW1pdC4uSEVBRCIKCiAgICAgICAgIyBVc2Ugc2VkIHRvIHJlbW92ZSBKSVJBIHRpY2tldCBudW1iZXJzIGZyb20gY29tbWl0IG1lc3NhZ2VzIGJlZm9yZSBwcm9jZXNzaW5nIHdpdGggYXdrCiAgICAgICAgY2hhbmdlbG9nPSQoZ2l0IGxvZyAiJGxvZ19yYW5nZSIgLS1wcmV0dHk9Zm9ybWF0OiIlQiIgfAogICAgICAgIGdyZXAgLXZFaSAnXihuY2x8TWVyZ2V8QnVtcHxGaXhpbmcgbWVyZ2UgY29uZmxpY3RzKScgfAogICAgICAgIHNlZCAtRSAncy9eXFs/W0EtWl0rLVswLTldK1xdP1tbOnNwYWNlOl064oCULV0rLy8nIHwKICAgICAgICBhd2sgJwogICAgICAgIEJFR0lOIHsgY29tbWl0ID0gIiIgfQogICAgICAgIC9eJC8gewogICAgICAgICAgICBpZiAoY29tbWl0ICE9ICIiKSB7CiAgICAgICAgICAgICAgICBuID0gc3BsaXQoY29tbWl0LCBsaW5lcywgIlxuIikKICAgICAgICAgICAgICAgIGlmIChsaW5lc1sxXSAhPSAiIikgewogICAgICAgICAgICAgICAgICAgIHByaW50ICItICIgbGluZXNbMV0KICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAyOyBpIDw9IG47IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAobGluZXNbaV0gIT0gIiIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICJcdCIgbGluZXNbaV0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNvbW1pdCA9ICIiCiAgICAgICAgICAgIH0KICAgICAgICAgICAgbmV4dAogICAgICAgIH0KICAgICAgICB7CiAgICAgICAgICAgIGlmIChjb21taXQgPT0gIiIgJiYgJDAgPT0gIiIpIG5leHQKICAgICAgICAgICAgY29tbWl0ID0gY29tbWl0IChjb21taXQgPT0gIiIgPyAiIiA6ICJcbiIpICQwCiAgICAgICAgfQogICAgICAgIEVORCB7CiAgICAgICAgICAgIGlmIChjb21taXQgIT0gIiIpIHsKICAgICAgICAgICAgICAgIG4gPSBzcGxpdChjb21taXQsIGxpbmVzLCAiXG4iKQogICAgICAgICAgICAgICAgaWYgKGxpbmVzWzFdICE9ICIiKSB7CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgIi0gIiBsaW5lc1sxXQogICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDI7IGkgPD0gbjsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5lc1tpXSAhPSAiIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgIlx0IiBsaW5lc1tpXQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfScpCiAgICAgICAgIyByZW1vdmUgZG91YmxlIHRhYnMgYW5kIGVtcHR5IGxpbmVzCiAgICAgICAgY2hhbmdlbG9nPSQoZWNobyAiJGNoYW5nZWxvZyIgfCBzZWQgLWUgJ3MvXHRcdC9cdC9nJyAtZSAnL15bWzpzcGFjZTpdXSokL2QnKQogICAgICAgIAogICAgICAgICMgUmVtb3ZlIEpJUkEgdGlja2V0IG51bWJlciBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgZWFjaCBsaW5lIGlmIHNwZWNpZmllZAogICAgICAgIGlmIFsgLW4gIiRqaXJhX3RpY2tldF9udW1iZXIiIF07IHRoZW4KICAgICAgICAgICAgY2hhbmdlbG9nPSQoZWNobyAiJGNoYW5nZWxvZyIgfCBzZWQgLUUgInMvXiRqaXJhX3RpY2tldF9udW1iZXJbWzpzcGFjZTpdXSovL2ciKQogICAgICAgIGZpCiAgICAgICAgCiAgICAgICAgY2hhbmdlbG9nX2ludGVybmFsPSQoZ2l0IGxvZyAiJGxvZ19yYW5nZSIgLS1wcmV0dHk9Zm9ybWF0OiIlYW4lbiVCIiB8CiAgICAgICAgZ3JlcCAtdkVpICdeKG5jbHxNZXJnZXxCdW1wfEZpeGluZyBtZXJnZSBjb25mbGljdHMpJyB8CiAgICAgICAgYXdrICcKICAgICAgICBCRUdJTiB7IGNvbW1pdCA9ICIiIH0KCiAgICAgICAgIyBCbGFuayBsaW5lIHNpZ25hbHMgZW5kIG9mIGEgY29tbWl0CiAgICAgICAgL14kLyB7CiAgICAgICAgICAgIHByb2Nlc3NfY29tbWl0KCkKICAgICAgICAgICAgY29tbWl0ID0gIiIKICAgICAgICAgICAgbmV4dAogICAgICAgIH0KCiAgICAgICAgewogICAgICAgICAgICBjb21taXQgPSBjb21taXQgJDAgIlxuIgogICAgICAgIH0KCiAgICAgICAgRU5EIHsKICAgICAgICAgICAgcHJvY2Vzc19jb21taXQoKQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcHJvY2Vzc19jb21taXQoKSB7CiAgICAgICAgICAgIGlmIChjb21taXQgPT0gIiIpIHJldHVybgoKICAgICAgICAgICAgIyBSZW1vdmUgbGVhZGluZy90cmFpbGluZyBuZXdsaW5lcwogICAgICAgICAgICBnc3ViKC9eXG4rfFxuKyQvLCAiIiwgY29tbWl0KQoKICAgICAgICAgICAgIyBTcGxpdCBpbnRvIGxpbmVzCiAgICAgICAgICAgIG4gPSBzcGxpdChjb21taXQsIGxpbmVzLCAiXG4iKQogICAgICAgICAgICBhdXRob3IgPSBsaW5lc1sxXQogICAgICAgICAgICBzdWJqZWN0ID0gIiIKCiAgICAgICAgICAgICMgRmluZCB0aGUgZmlyc3Qgbm9uLWVtcHR5IGxpbmUgYWZ0ZXIgYXV0aG9yCiAgICAgICAgICAgIGZvciAoaiA9IDI7IGogPD0gbjsgaisrKSB7CiAgICAgICAgICAgIGlmIChsaW5lc1tqXSB+IC9bXls6c3BhY2U6XV0vKSB7CiAgICAgICAgICAgICAgICBzdWJqZWN0ID0gbGluZXNbal0KICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgIyBTa2lwIGlmIG5vIG1lYW5pbmdmdWwgc3ViamVjdAogICAgICAgICAgICBpZiAoc3ViamVjdCA9PSAiIikgcmV0dXJuCgogICAgICAgICAgICBwcmludGYoIi0gJXM6ICVzXG4iLCBhdXRob3IsIHN1YmplY3QpCgogICAgICAgICAgICAjIFByaW50IHJlc3Qgb2YgYm9keSBsaW5lcyAoc2tpcCBlbXB0eSBvbmVzIGFuZCB0cmltIHRyYWlsaW5nIGVtcHR5IGxpbmUpCiAgICAgICAgICAgIGZvciAoaSA9IGogKyAxOyBpIDw9IG47IGkrKykgewogICAgICAgICAgICBpZiAobGluZXNbaV0gfiAvW15bOnNwYWNlOl1dLykgewogICAgICAgICAgICAgICAgcHJpbnRmKCJcdCVzXG4iLCBsaW5lc1tpXSkKICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfScpCgogICAgICAgIGlmIFsgLW4gIiRqaXJhX3RpY2tldF9udW1iZXIiIF07IHRoZW4KICAgICAgICAgICAgY2hhbmdlbG9nPSQoZWNobyAiJGNoYW5nZWxvZyIgfCBzZWQgJ3MvXiRqaXJhX3RpY2tldF9udW1iZXIgLy9nJykKICAgICAgICAgICAgY2hhbmdlbG9nX2ludGVybmFsPSQoZWNobyAiJGNoYW5nZWxvZ19pbnRlcm5hbCIgfCBzZWQgJ3MvXiRqaXJhX3RpY2tldF9udW1iZXIgLy9nJykKICAgICAgICBmaQogICAgICAgIGNoYW5nZWxvZ19pbnRlcm5hbD0kKGVjaG8gIiRjaGFuZ2Vsb2dfaW50ZXJuYWwiIHwgc2VkIC1lICdzL1x0XHQvXHQvZycgLWUgJy9eW1s6c3BhY2U6XV0qJC9kJykKCiAgICBpZiBbIC16ICIkY2hhbmdlbG9nIiBdOyB0aGVuCiAgICAgICAgcHJpbnRfaW5mbyAiTm8gY2hhbmdlbG9nIHRvIGFkZCIKICAgIGVsc2UKICAgICAgICAjIFVzZSB0aGUgcHJvdmlkZWQgdmVyc2lvbiBvciBmYWxsIGJhY2sgdG8gJG5ld3ZlcnNpb24gZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkKICAgICAgICBsb2NhbCB2ZXJzaW9uX3RvX3VzZT0iJHt2ZXJzaW9uOi0kbmV3dmVyc2lvbn0iCiAgICAgICAgCiAgICAgICAgaWYgWyAteiAiJHZlcnNpb25fdG9fdXNlIiBdOyB0aGVuCiAgICAgICAgICAgIHByaW50X2Vycm9yICJObyB2ZXJzaW9uIHNwZWNpZmllZCBmb3IgY2hhbmdlbG9nIHVwZGF0ZSIKICAgICAgICAgICAgcmV0dXJuIDEKICAgICAgICBmaQogICAgICAgIAogICAgICAgIGlmIFsgLWYgIiRjaGFuZ2Vsb2dwYXRoLyRjaGFuZ2Vsb2dfbmFtZSIgXTsgdGhlbgogICAgICAgICAgICBpZiBbICIkKGhlYWQgLW4gMSAiJGNoYW5nZWxvZ3BhdGgvJGNoYW5nZWxvZ19uYW1lIiB8IHNlZCAncy8jIyAvLycgfCBjdXQgLWQuIC1mMSwyKSIgPT0gIiQoZWNobyAkdmVyc2lvbl90b191c2UgfCBjdXQgLWQuIC1mMSwyKSIgXTsgdGhlbgogICAgICAgICAgICAgICAgaWYgWyAiJChzZWQgLW4gJzJwJyAiJGNoYW5nZWxvZ3BhdGgvJGNoYW5nZWxvZ19uYW1lIikiID09ICIkaHVtYW5kYXRlIiBdOyB0aGVuCiAgICAgICAgICAgICAgICAgICAgc2VkX2lucGxhY2UgJzEsM2QnICIkY2hhbmdlbG9ncGF0aC8kY2hhbmdlbG9nX25hbWUiCiAgICAgICAgICAgICAgICAgICAgZWNobyAtZSAiIyMgJHZlcnNpb25fdG9fdXNlXG4kaHVtYW5kYXRlXG5cbiRjaGFuZ2Vsb2dcbiQoY2F0ICIkY2hhbmdlbG9ncGF0aC8kY2hhbmdlbG9nX25hbWUiKSIgPiAiJGNoYW5nZWxvZ3BhdGgvJGNoYW5nZWxvZ19uYW1lIgogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGVjaG8gLWUgIiMjICR2ZXJzaW9uX3RvX3VzZVxuJGh1bWFuZGF0ZVxuXG4kY2hhbmdlbG9nXG5cbiQoY2F0ICIkY2hhbmdlbG9ncGF0aC8kY2hhbmdlbG9nX25hbWUiKSIgPiAiJGNoYW5nZWxvZ3BhdGgvJGNoYW5nZWxvZ19uYW1lIgogICAgICAgICAgICAgICAgZmkKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgZWNobyAtZSAiIyMgJHZlcnNpb25fdG9fdXNlXG4kaHVtYW5kYXRlXG5cbiRjaGFuZ2Vsb2dcblxuJChjYXQgIiRjaGFuZ2Vsb2dwYXRoLyRjaGFuZ2Vsb2dfbmFtZSIpIiA+ICIkY2hhbmdlbG9ncGF0aC8kY2hhbmdlbG9nX25hbWUiCiAgICAgICAgICAgIGZpCiAgICAgICAgICAgIHByaW50X3N1Y2Nlc3MgIlVwZGF0ZWQgY2hhbmdlbG9nIGluICRjaGFuZ2Vsb2dwYXRoLyRjaGFuZ2Vsb2dfbmFtZSB0byB2ZXJzaW9uICR2ZXJzaW9uX3RvX3VzZSIKICAgICAgICBlbHNlCiAgICAgICAgICAgIGVjaG8gLWUgIiMjICR2ZXJzaW9uX3RvX3VzZVxuJGh1bWFuZGF0ZVxuXG4kY2hhbmdlbG9nIiA+ICIkY2hhbmdlbG9ncGF0aC8kY2hhbmdlbG9nX25hbWUiCiAgICAgICAgICAgIHByaW50X3N1Y2Nlc3MgIkNyZWF0ZWQgY2hhbmdlbG9nIGluICRjaGFuZ2Vsb2dwYXRoLyRjaGFuZ2Vsb2dfbmFtZSB3aXRoIHZlcnNpb24gJHZlcnNpb25fdG9fdXNlIgogICAgICAgIGZpCiAgICBmaQoKICAgIGlmIFsgLXogIiRjaGFuZ2Vsb2dfaW50ZXJuYWwiIF07IHRoZW4KICAgICAgICBwcmludF9pbmZvICJObyBpbnRlcm5hbCBjaGFuZ2Vsb2cgdG8gYWRkIgogICAgZWxpZiBbIC1mICIkY2hhbmdlbG9ncGF0aC8kY2hhbmdlbG9nX2ludGVybmFsX25hbWUiIF07IHRoZW4KICAgICAgICBpZiBbICIkKGhlYWQgLW4gMSAiJGNoYW5nZWxvZ3BhdGgvJGNoYW5nZWxvZ19pbnRlcm5hbF9uYW1lIiB8IHNlZCAncy8jIyAvLycgfCBjdXQgLWQuIC1mMSwyKSIgPT0gIiQoZWNobyAkbmV3dmVyc2lvbiB8IGN1dCAtZC4gLWYxLDIpIiBdOyB0aGVuCiAgICAgICAgICAgIGlmIFsgIiQoc2VkIC1uICcycCcgIiRjaGFuZ2Vsb2dwYXRoLyRjaGFuZ2Vsb2dfaW50ZXJuYWxfbmFtZSIpIiA9PSAiJGxvbmdodW1hbmRhdGUiIF07IHRoZW4KICAgICAgICAgICAgICAgIHNlZF9pbnBsYWNlICcxLDNkJyAiJGNoYW5nZWxvZ3BhdGgvJGNoYW5nZWxvZ19pbnRlcm5hbF9uYW1lIgogICAgICAgICAgICAgICAgZWNobyAtZSAiIyMgJG5ld3ZlcnNpb25cbiRsb25naHVtYW5kYXRlXG5cbiRjaGFuZ2Vsb2dfaW50ZXJuYWxcbiQoY2F0ICIkY2hhbmdlbG9ncGF0aC8kY2hhbmdlbG9nX2ludGVybmFsX25hbWUiKSIgPiAiJGNoYW5nZWxvZ3BhdGgvJGNoYW5nZWxvZ19pbnRlcm5hbF9uYW1lIgogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBlY2hvIC1lICIjIyAkbmV3dmVyc2lvblxuJGxvbmdodW1hbmRhdGVcblxuJGNoYW5nZWxvZ19pbnRlcm5hbFxuXG4kKGNhdCAiJGNoYW5nZWxvZ3BhdGgvJGNoYW5nZWxvZ19pbnRlcm5hbF9uYW1lIikiID4gIiRjaGFuZ2Vsb2dwYXRoLyRjaGFuZ2Vsb2dfaW50ZXJuYWxfbmFtZSIKICAgICAgICAgICAgZmkKICAgICAgICBlbHNlCiAgICAgICAgICAgIGVjaG8gLWUgIiMjICRuZXd2ZXJzaW9uXG4kbG9uZ2h1bWFuZGF0ZVxuXG4kY2hhbmdlbG9nX2ludGVybmFsXG5cbiQoY2F0ICIkY2hhbmdlbG9ncGF0aC8kY2hhbmdlbG9nX2ludGVybmFsX25hbWUiKSIgPiAiJGNoYW5nZWxvZ3BhdGgvJGNoYW5nZWxvZ19pbnRlcm5hbF9uYW1lIgogICAgICAgIGZpCiAgICAgICAgcHJpbnRfc3VjY2VzcyAiVXBkYXRlZCBjaGFuZ2Vsb2cgaW4gJGNoYW5nZWxvZ3BhdGgvJGNoYW5nZWxvZ19pbnRlcm5hbF9uYW1lIgogICAgZWxzZQogICAgICAgIHByaW50X2luZm8gIkludGVybmFsIGNoYW5nZWxvZyAkY2hhbmdlbG9ncGF0aC8kY2hhbmdlbG9nX2ludGVybmFsX25hbWUgZG9lcyBub3QgZXhpc3QsIHNraXBwaW5nIgogICAgZmkKfQoKZmkgIyBfX1NSQ19fVm9sdW1lc19lbmlnbWFkZXZfZW5pZ21hZGV2X3N0YXRpY19tYWlhc3Nfd2hvbGVfYmFzaG1haWFzc19saWJfY29yZV9jaGFuZ2Vsb2dfc2gKIyAtLS0gRW5kIGlubGluZWQ6IC9Wb2x1bWVzL2VuaWdtYWRldi9lbmlnbWFkZXYvc3RhdGljL21haWFzcy13aG9sZS9iYXNobWFpYXNzL2xpYi9jb3JlL2NoYW5nZWxvZy5zaCAtLS0KCiMgLS0tIEJlZ2luIGlubGluZWQ6IC9Wb2x1bWVzL2VuaWdtYWRldi9lbmlnbWFkZXYvc3RhdGljL21haWFzcy13aG9sZS9iYXNobWFpYXNzL2xpYi9jb3JlL2Jvb3RzdHJhcC5zaCAtLS0KaWYgW1sgLXogIiR7X19TUkNfX1ZvbHVtZXNfZW5pZ21hZGV2X2VuaWdtYWRldl9zdGF0aWNfbWFpYXNzX3dob2xlX2Jhc2htYWlhc3NfbGliX2NvcmVfYm9vdHN0cmFwX3NoOi19IiBdXTsgdGhlbiBfX1NSQ19fVm9sdW1lc19lbmlnbWFkZXZfZW5pZ21hZGV2X3N0YXRpY19tYWlhc3Nfd2hvbGVfYmFzaG1haWFzc19saWJfY29yZV9ib290c3RyYXBfc2g9MQoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBNQUlBU1MgQm9vdHN0cmFwIE1vZHVsZQojIEludGVyYWN0aXZlIHByb2plY3Qgc2V0dXAgYW5kIGNvbmZpZ3VyYXRpb24KIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiMgTG9hZCBleGlzdGluZyAuZW52Lm1haWFzcyB2YWx1ZXMgdG8gdXNlIGFzIGRlZmF1bHRzCmxvYWRfZXhpc3RpbmdfYm9vdHN0cmFwX3ZhbHVlcygpIHsKICAgIGlmIFtbIC1mICIuZW52Lm1haWFzcyIgXV07IHRoZW4KICAgICAgICBwcmludF9kZWJ1ZyAiTG9hZGluZyBleGlzdGluZyBjb25maWd1cmF0aW9uIHZhbHVlcyBhcyBkZWZhdWx0cyIKICAgICAgICAKICAgICAgICAjIFJlYWQgZXhpc3RpbmcgdmFsdWVzIHdpdGhvdXQgZXhlY3V0aW5nIHRoZW0gKHNlY3VyaXR5KQogICAgICAgIHdoaWxlIElGUz0gcmVhZCAtciBsaW5lIHx8IFtbIC1uICIkbGluZSIgXV07IGRvCiAgICAgICAgICAgICMgU2tpcCBjb21tZW50cyBhbmQgZW1wdHkgbGluZXMKICAgICAgICAgICAgW1sgLXogIiRsaW5lIiB8fCAiJGxpbmUiID09IFwjKiBdXSAmJiBjb250aW51ZQogICAgICAgICAgICAKICAgICAgICAgICAgIyBFeHRyYWN0IGtleT12YWx1ZSBwYWlycwogICAgICAgICAgICBpZiBbWyAiJGxpbmUiID1+IF4oW0EtWl9dKyk9KC4qKSQgXV07IHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIGtleT0iJHtCQVNIX1JFTUFUQ0hbMV19IgogICAgICAgICAgICAgICAgbG9jYWwgdmFsdWU9IiR7QkFTSF9SRU1BVENIWzJdfSIKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgIyBSZW1vdmUgcXVvdGVzIGlmIHByZXNlbnQKICAgICAgICAgICAgICAgIGlmIFtbICIkdmFsdWUiID09IFwiKlwiIHx8ICIkdmFsdWUiID09IFwnKlwnIF1dOyB0aGVuCiAgICAgICAgICAgICAgICAgICAgdmFsdWU9JChlY2hvICIkdmFsdWUiIHwgc2VkICdzL15bIidcJyddLy8nIHwgc2VkICdzL1siJ1wnJ10kLy8nKQogICAgICAgICAgICAgICAgZmkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgIyBNYXAgdG8gYm9vdHN0cmFwIHZhcmlhYmxlcwogICAgICAgICAgICAgICAgY2FzZSAiJGtleSIgaW4KICAgICAgICAgICAgICAgICAgICAiTUFJQVNTX1JFUE9fVFlQRSIpCiAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydCBFWElTVElOR19QUk9KRUNUX1RZUEU9IiR2YWx1ZSIKICAgICAgICAgICAgICAgICAgICAgICAgOzsKICAgICAgICAgICAgICAgICAgICAiTUFJQVNTX1dQX0ZJTEVTX1BBVEgiKQogICAgICAgICAgICAgICAgICAgICAgICBleHBvcnQgRVhJU1RJTkdfV1BfUEFUSD0iJHZhbHVlIgogICAgICAgICAgICAgICAgICAgICAgICA7OwogICAgICAgICAgICAgICAgICAgICJNQUlBU1NfVkVSU0lPTl9QUklNQVJZX0ZJTEUiKQogICAgICAgICAgICAgICAgICAgICAgICBleHBvcnQgRVhJU1RJTkdfVkVSU0lPTl9TT1VSQ0U9IiR2YWx1ZSIKICAgICAgICAgICAgICAgICAgICAgICAgOzsKICAgICAgICAgICAgICAgICAgICAiTUFJQVNTX01BSU5CUkFOQ0giKQogICAgICAgICAgICAgICAgICAgICAgICBleHBvcnQgRVhJU1RJTkdfTUFJTl9CUkFOQ0g9IiR2YWx1ZSIKICAgICAgICAgICAgICAgICAgICAgICAgOzsKICAgICAgICAgICAgICAgICAgICAiTUFJQVNTX0RFVkVMT1BCUkFOQ0giKQogICAgICAgICAgICAgICAgICAgICAgICBleHBvcnQgRVhJU1RJTkdfREVWRUxPUF9CUkFOQ0g9IiR2YWx1ZSIKICAgICAgICAgICAgICAgICAgICAgICAgOzsKICAgICAgICAgICAgICAgICAgICAiTUFJQVNTX01PREUiKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBbWyAiJHZhbHVlIiA9PSAiYWlfb25seSIgXV07IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydCBFWElTVElOR19GRUFUVVJFUz0iYWlfb25seSIKICAgICAgICAgICAgICAgICAgICAgICAgZmkKICAgICAgICAgICAgICAgICAgICAgICAgOzsKICAgICAgICAgICAgICAgIGVzYWMKICAgICAgICAgICAgZmkKICAgICAgICBkb25lIDwgIi5lbnYubWFpYXNzIgogICAgZmkKfQoKIyBNYWluIGJvb3RzdHJhcCBmdW5jdGlvbiAtIGNhbGxlZCBhZnRlciBnaXQgcmVwb3NpdG9yeSBkZXRlY3Rpb24KYm9vdHN0cmFwX3Byb2plY3QoKSB7CiAgICBsb2NhbCBuZWVkc19ib290c3RyYXA9ZmFsc2UKICAgIGxvY2FsIGlzX3JlY29uZmlndXJlPWZhbHNlCiAgICAKICAgICMgQ2hlY2sgaWYgLmVudi5tYWlhc3MgZXhpc3RzCiAgICBpZiBbWyAhIC1mICIuZW52Lm1haWFzcyIgXV07IHRoZW4KICAgICAgICBuZWVkc19ib290c3RyYXA9dHJ1ZQogICAgZWxpZiBbWyAiJHtNQUlBU1NfRk9SQ0VfQk9PVFNUUkFQOi1mYWxzZX0iID09ICJ0cnVlIiBdXTsgdGhlbgogICAgICAgIG5lZWRzX2Jvb3RzdHJhcD10cnVlCiAgICAgICAgaXNfcmVjb25maWd1cmU9dHJ1ZQogICAgZmkKICAgIAogICAgIyBJZiBubyBib290c3RyYXAgbmVlZGVkLCBleGl0IGVhcmx5CiAgICBpZiBbWyAiJG5lZWRzX2Jvb3RzdHJhcCIgPT0gImZhbHNlIiBdXTsgdGhlbgogICAgICAgIHByaW50X2RlYnVnICJQcm9qZWN0IGFscmVhZHkgY29uZmlndXJlZCAoLmVudi5tYWlhc3MgZXhpc3RzKSIKICAgICAgICByZXR1cm4gMAogICAgZmkKICAgIAogICAgIyBMb2FkIGV4aXN0aW5nIHZhbHVlcyBpZiByZWNvbmZpZ3VyaW5nCiAgICBpZiBbWyAiJGlzX3JlY29uZmlndXJlIiA9PSAidHJ1ZSIgXV07IHRoZW4KICAgICAgICBsb2FkX2V4aXN0aW5nX2Jvb3RzdHJhcF92YWx1ZXMKICAgIGZpCiAgICAKICAgIGlmIFtbICIkaXNfcmVjb25maWd1cmUiID09ICJ0cnVlIiBdXTsgdGhlbgogICAgICAgIHByaW50X2luZm8gIvCflKcgUmVjb25maWd1cmluZyBNQUlBU1MgZm9yIHRoaXMgcHJvamVjdC4iICJhbHdheXMiCiAgICAgICAgcHJpbnRfaW5mbyAiQ3VycmVudCB2YWx1ZXMgd2lsbCBiZSBzaG93biBhcyBkZWZhdWx0cy5cbiIgImFsd2F5cyIKICAgIGVsc2UKICAgICAgICBwcmludF9pbmZvICLwn5qAIFNldHRpbmcgdXAgTUFJQVNTIGZvciB0aGlzIHByb2plY3QuIiAiYWx3YXlzIgogICAgICAgIHByaW50X2luZm8gIlRoaXMgaXMgYSBvbmUtdGltZSBzZXR1cCB0aGF0IHdpbGwgbWFrZSBmdXR1cmUgcnVucyBzbW9vdGhlci5cbiIgImFsd2F5cyIKICAgIGZpCiAgICAKICAgICMgU3RlcCAxOiBDcmVhdGUgLmVudi5tYWlhc3MgZmlsZQogICAgc2V0dXBfZW52X2ZpbGUKICAgIAogICAgIyBTdGVwIDI6IERldGVjdCBhbmQgY29uZmlndXJlIHByb2plY3QgdHlwZQogICAgZGV0ZWN0X2FuZF9jb25maWd1cmVfcHJvamVjdF90eXBlCiAgICAKICAgICMgU3RlcCAzOiBDb25maWd1cmUgdmVyc2lvbiBzb3VyY2UKICAgIGNvbmZpZ3VyZV92ZXJzaW9uX3NvdXJjZQogICAgCiAgICAjIFN0ZXAgNDogQ2hvb3NlIE1BSUFTUyBmZWF0dXJlcwogICAgY2hvb3NlX21haWFzc19mZWF0dXJlcwogICAgCiAgICAjIFN0ZXAgNTogQ29uZmlndXJlIGJyYW5jaCBzdHJhdGVneQogICAgY29uZmlndXJlX2JyYW5jaF9zdHJhdGVneQogICAgCiAgICAjIFN0ZXAgNjogU2F2ZSBjb25maWd1cmF0aW9uCiAgICBzYXZlX2Jvb3RzdHJhcF9jb25maWcKICAgIAogICAgcHJpbnRfc3VjY2VzcyAi4pyFIFByb2plY3Qgc2V0dXAgY29tcGxldGUhIiAiYWx3YXlzIgogICAgcHJpbnRfaW5mbyAiWW91IGNhbiBtb2RpZnkgdGhlc2Ugc2V0dGluZ3MgYW55dGltZSBieSBlZGl0aW5nIC5lbnYubWFpYXNzIiAiYWx3YXlzIgogICAgcHJpbnRfaW5mbyAiUnVuICdtYWlhc3MnIGFnYWluIHRvIHN0YXJ0IHVzaW5nIHlvdXIgY29uZmlndXJlZCB3b3JrZmxvdy5cbiIgImFsd2F5cyIKICAgIAogICAgIyBFeGl0IGFmdGVyIGJvb3RzdHJhcCB0byBwcmV2ZW50IG1haW4gd29ya2Zsb3cgZnJvbSBydW5uaW5nCiAgICBleGl0IDAKfQoKIyBTdGVwIDE6IENyZWF0ZSAuZW52Lm1haWFzcyBmaWxlIGFuZCBoYW5kbGUgLmdpdGlnbm9yZQpzZXR1cF9lbnZfZmlsZSgpIHsKICAgIHByaW50X3NlY3Rpb24gIvCfk4QgQ29uZmlndXJhdGlvbiBGaWxlIFNldHVwIgogICAgCiAgICBpZiBbWyAiJHtNQUlBU1NfRk9SQ0VfQk9PVFNUUkFQOi1mYWxzZX0iID09ICJ0cnVlIiBdXTsgdGhlbgogICAgICAgIHByaW50X2luZm8gIlVwZGF0aW5nIGV4aXN0aW5nIC5lbnYubWFpYXNzIGZpbGUgd2l0aCBuZXcgY29uZmlndXJhdGlvbi4iICJhbHdheXMiCiAgICAgICAgZXhwb3J0IEJPT1RTVFJBUF9BRERfVE9fR0lUSUdOT1JFPSJ0cnVlIiAgIyBLZWVwIGV4aXN0aW5nIC5naXRpZ25vcmUgYmVoYXZpb3IKICAgICAgICByZXR1cm4gMAogICAgZmkKICAgIAogICAgcHJpbnRfaW5mbyAiTUFJQVNTIHVzZXMgYSAuZW52Lm1haWFzcyBmaWxlIHRvIHN0b3JlIHByb2plY3Qtc3BlY2lmaWMgc2V0dGluZ3MuIiAiYWx3YXlzIgogICAgZWNobyAtbiAiQ3JlYXRlIC5lbnYubWFpYXNzIGZpbGU/IFtZL25dOiAiCiAgICByZWFkIC1yIGNyZWF0ZV9lbnYKICAgIAogICAgaWYgW1sgIiRjcmVhdGVfZW52IiA9fiBeW05uXSQgXV07IHRoZW4KICAgICAgICBwcmludF93YXJuaW5nICJDYW5ub3QgcHJvY2VlZCB3aXRob3V0IGNvbmZpZ3VyYXRpb24gZmlsZS4gRXhpdGluZyBzZXR1cC4iICJhbHdheXMiCiAgICAgICAgZXhpdCAxCiAgICBmaQogICAgCiAgICAjIEFzayBhYm91dCAuZ2l0aWdub3JlCiAgICBwcmludF9pbmZvICJcblNob3VsZCAuZW52Lm1haWFzcyBiZSBhZGRlZCB0byAuZ2l0aWdub3JlPyIgImFsd2F5cyIKICAgIHByaW50X2luZm8gIiAgUmVjb21tZW5kZWQ6IFllcyAoa2VlcHMgbG9jYWwgc2V0dGluZ3MgcHJpdmF0ZSkiICJhbHdheXMiCiAgICBwcmludF9pbmZvICIgIEFsdGVybmF0aXZlOiBObyAoc2hhcmVzIHNldHRpbmdzIHdpdGggdGVhbSkiICJhbHdheXMiCiAgICBlY2hvIC1uICJBZGQgdG8gLmdpdGlnbm9yZT8gW1kvbl06ICIKICAgIHJlYWQgLXIgYWRkX3RvX2dpdGlnbm9yZQogICAgCiAgICBleHBvcnQgQk9PVFNUUkFQX0FERF9UT19HSVRJR05PUkU9InRydWUiCiAgICBpZiBbWyAiJGFkZF90b19naXRpZ25vcmUiID1+IF5bTm5dJCBdXTsgdGhlbgogICAgICAgIGV4cG9ydCBCT09UU1RSQVBfQUREX1RPX0dJVElHTk9SRT0iZmFsc2UiCiAgICBmaQogICAgCiAgICBwcmludF9zdWNjZXNzICLinJMgV2lsbCBjcmVhdGUgLmVudi5tYWlhc3MgZmlsZSIKfQoKIyBTdGVwIDI6IERldGVjdCBwcm9qZWN0IHR5cGUgKFdvcmRQcmVzcywgTm9kZS5qcywgZ2VuZXJpYykKZGV0ZWN0X2FuZF9jb25maWd1cmVfcHJvamVjdF90eXBlKCkgewogICAgcHJpbnRfc2VjdGlvbiAi8J+UjSBQcm9qZWN0IFR5cGUgRGV0ZWN0aW9uIgogICAgCiAgICBsb2NhbCBkZXRlY3RlZF90eXBlPSJnZW5lcmljIgogICAgbG9jYWwgd3BfcGF0aD0iIgogICAgCiAgICAjIElmIHJlY29uZmlndXJpbmcsIHNob3cgZXhpc3RpbmcgdHlwZSBhbmQgYXNrIGlmIHVzZXIgd2FudHMgdG8gY2hhbmdlIGl0CiAgICBpZiBbWyAtbiAiJEVYSVNUSU5HX1BST0pFQ1RfVFlQRSIgXV07IHRoZW4KICAgICAgICBwcmludF9pbmZvICJDdXJyZW50IHByb2plY3QgdHlwZTogJEVYSVNUSU5HX1BST0pFQ1RfVFlQRSIgImFsd2F5cyIKICAgICAgICBlY2hvIC1uICJDaGFuZ2UgcHJvamVjdCB0eXBlIGRldGVjdGlvbj8gW3kvTl06ICIKICAgICAgICByZWFkIC1yIGNoYW5nZV90eXBlCiAgICAgICAgCiAgICAgICAgaWYgW1sgISAiJGNoYW5nZV90eXBlIiA9fiBeW1l5XSQgXV07IHRoZW4KICAgICAgICAgICAgIyBLZWVwIGV4aXN0aW5nIGNvbmZpZ3VyYXRpb24KICAgICAgICAgICAgZXhwb3J0IEJPT1RTVFJBUF9QUk9KRUNUX1RZUEU9IiRFWElTVElOR19QUk9KRUNUX1RZUEUiCiAgICAgICAgICAgIGV4cG9ydCBCT09UU1RSQVBfV1BfUEFUSD0iJHtFWElTVElOR19XUF9QQVRIOi0ufSIKICAgICAgICAgICAgcHJpbnRfaW5mbyAi4pyTIEtlZXBpbmcgZXhpc3RpbmcgcHJvamVjdCB0eXBlOiAkRVhJU1RJTkdfUFJPSkVDVF9UWVBFIiAiYWx3YXlzIgogICAgICAgICAgICByZXR1cm4gMAogICAgICAgIGZpCiAgICBmaQogICAgCiAgICAjIFBlcmZvcm0gZnJlc2ggZGV0ZWN0aW9uCiAgICAjIENoZWNrIGZvciBXb3JkUHJlc3MKICAgIGlmIGRldGVjdF93b3JkcHJlc3NfcHJvamVjdDsgdGhlbgogICAgICAgIGRldGVjdGVkX3R5cGU9IndvcmRwcmVzcyIKICAgICAgICB3cF9wYXRoPSQoY29uZmlndXJlX3dvcmRwcmVzc19wcm9qZWN0KQogICAgIyBDaGVjayBmb3IgTm9kZS5qcwogICAgZWxpZiBbWyAtZiAicGFja2FnZS5qc29uIiBdXTsgdGhlbgogICAgICAgIGRldGVjdGVkX3R5cGU9Im5vZGVqcyIKICAgICAgICBwcmludF9pbmZvICLwn5OmIERldGVjdGVkIE5vZGUuanMgcHJvamVjdCAocGFja2FnZS5qc29uIGZvdW5kKSIgImFsd2F5cyIKICAgIGVsc2UKICAgICAgICBwcmludF9pbmZvICLwn5OBIEdlbmVyaWMgcHJvamVjdCBkZXRlY3RlZCIgImFsd2F5cyIKICAgIGZpCiAgICAKICAgIGV4cG9ydCBCT09UU1RSQVBfUFJPSkVDVF9UWVBFPSIkZGV0ZWN0ZWRfdHlwZSIKICAgIGV4cG9ydCBCT09UU1RSQVBfV1BfUEFUSD0iJHdwX3BhdGgiCn0KCiMgV29yZFByZXNzIHByb2plY3QgZGV0ZWN0aW9uIGFuZCBjb25maWd1cmF0aW9uCmRldGVjdF93b3JkcHJlc3NfcHJvamVjdCgpIHsKICAgIHByaW50X2RlYnVnICJERUJVRzogU3RhcnRpbmcgV29yZFByZXNzIGRldGVjdGlvbiIKICAgIAogICAgIyBMb29rIGZvciBkZWZpbml0aXZlIFdvcmRQcmVzcyBpbmRpY2F0b3JzCiAgICBpZiBbWyAtZiAid3AtY29uZmlnLnBocCIgXV07IHRoZW4KICAgICAgICBwcmludF9kZWJ1ZyAiREVCVUc6IEZvdW5kIHdwLWNvbmZpZy5waHAgLSBXb3JkUHJlc3MgZGV0ZWN0ZWQiCiAgICAgICAgcmV0dXJuIDAKICAgIGZpCiAgICAKICAgIGlmIFtbIC1kICJ3cC1jb250ZW50IiBdXTsgdGhlbgogICAgICAgIHByaW50X2RlYnVnICJERUJVRzogRm91bmQgd3AtY29udGVudCBkaXJlY3RvcnkgLSBXb3JkUHJlc3MgZGV0ZWN0ZWQiCiAgICAgICAgcmV0dXJuIDAKICAgIGZpCiAgICAKICAgICMgQ2hlY2sgZm9yIFdvcmRQcmVzcyB0aGVtZSAoYm90aCBmaWxlcyBtdXN0IGV4aXN0IGluIHNhbWUgZGlyZWN0b3J5KQogICAgaWYgW1sgLWYgInN0eWxlLmNzcyIgJiYgLWYgImZ1bmN0aW9ucy5waHAiIF1dOyB0aGVuCiAgICAgICAgcHJpbnRfZGVidWcgIkRFQlVHOiBGb3VuZCBzdHlsZS5jc3MgQU5EIGZ1bmN0aW9ucy5waHAgLSBXb3JkUHJlc3MgdGhlbWUgZGV0ZWN0ZWQiCiAgICAgICAgcmV0dXJuIDAKICAgIGZpCiAgICAKICAgICMgQ2hlY2sgZm9yIFdvcmRQcmVzcyBwbHVnaW4gaGVhZGVyIChtb3JlIHNwZWNpZmljIHNlYXJjaCkKICAgIGxvY2FsIHBsdWdpbl9jaGVjawogICAgcGx1Z2luX2NoZWNrPSQoZmluZCAuIC1tYXhkZXB0aCAyIC1uYW1lICIqLnBocCIgLWV4ZWMgZ3JlcCAtbCAiUGx1Z2luIE5hbWU6IiB7fSBcOyAyPi9kZXYvbnVsbCB8IGhlYWQgLTEpCiAgICBpZiBbWyAtbiAiJHBsdWdpbl9jaGVjayIgXV07IHRoZW4KICAgICAgICBwcmludF9kZWJ1ZyAiREVCVUc6IEZvdW5kIFdvcmRQcmVzcyBwbHVnaW4gaGVhZGVyIGluOiAkcGx1Z2luX2NoZWNrIgogICAgICAgIHJldHVybiAwCiAgICBmaQogICAgCiAgICAjIENoZWNrIGZvciBXb3JkUHJlc3MgdGhlbWUgaGVhZGVyIChtb3JlIHNwZWNpZmljIHNlYXJjaCkKICAgIGxvY2FsIHRoZW1lX2NoZWNrCiAgICB0aGVtZV9jaGVjaz0kKGZpbmQgLiAtbWF4ZGVwdGggMiAtbmFtZSAic3R5bGUuY3NzIiAtZXhlYyBncmVwIC1sICJUaGVtZSBOYW1lOiIge30gXDsgMj4vZGV2L251bGwgfCBoZWFkIC0xKQogICAgaWYgW1sgLW4gIiR0aGVtZV9jaGVjayIgXV07IHRoZW4KICAgICAgICBwcmludF9kZWJ1ZyAiREVCVUc6IEZvdW5kIFdvcmRQcmVzcyB0aGVtZSBoZWFkZXIgaW46ICR0aGVtZV9jaGVjayIKICAgICAgICByZXR1cm4gMAogICAgZmkKICAgIAogICAgcHJpbnRfZGVidWcgIkRFQlVHOiBObyBXb3JkUHJlc3MgaW5kaWNhdG9ycyBmb3VuZCIKICAgIHJldHVybiAxCn0KCmNvbmZpZ3VyZV93b3JkcHJlc3NfcHJvamVjdCgpIHsKICAgIHByaW50X2luZm8gIvCflIwgV29yZFByZXNzIHByb2plY3QgZGV0ZWN0ZWQhIiAiYWx3YXlzIgogICAgCiAgICBsb2NhbCB3cF90eXBlPSIiCiAgICBsb2NhbCB3cF9wYXRoPSIuIgogICAgCiAgICAjIERldGVybWluZSBXb3JkUHJlc3MgcHJvamVjdCB0eXBlCiAgICBpZiBbWyAtZiAid3AtY29uZmlnLnBocCIgXV0gfHwgW1sgLWQgIndwLWNvbnRlbnQiIF1dOyB0aGVuCiAgICAgICAgd3BfdHlwZT0ic2l0ZSIKICAgICAgICBwcmludF9pbmZvICJEZXRlY3RlZDogV29yZFByZXNzIHNpdGUgcm9vdCIgImFsd2F5cyIKICAgICAgICB3cF9wYXRoPSQoY29uZmlndXJlX3dvcmRwcmVzc19zaXRlKQogICAgZWxpZiBbWyAtZiAic3R5bGUuY3NzIiAmJiAtZiAiZnVuY3Rpb25zLnBocCIgXV07IHRoZW4KICAgICAgICB3cF90eXBlPSJ0aGVtZSIKICAgICAgICBwcmludF9pbmZvICJEZXRlY3RlZDogV29yZFByZXNzIHRoZW1lIiAiYWx3YXlzIgogICAgZWxpZiBmaW5kIC4gLW1heGRlcHRoIDEgLW5hbWUgIioucGhwIiAtZXhlYyBncmVwIC1sICJQbHVnaW4gTmFtZToiIHt9IFw7IDI+L2Rldi9udWxsIHwgaGVhZCAtMSA+L2Rldi9udWxsOyB0aGVuCiAgICAgICAgd3BfdHlwZT0icGx1Z2luIgogICAgICAgIHByaW50X2luZm8gIkRldGVjdGVkOiBXb3JkUHJlc3MgcGx1Z2luIiAiYWx3YXlzIgogICAgZWxzZQogICAgICAgICMgQXNrIHVzZXIgdG8gY2xhcmlmeQogICAgICAgIHByaW50X2luZm8gIldvcmRQcmVzcyBmaWxlcyBkZXRlY3RlZCwgYnV0IHR5cGUgdW5jbGVhci4iICJhbHdheXMiCiAgICAgICAgZWNobyAiV2hhdCB0eXBlIG9mIFdvcmRQcmVzcyBwcm9qZWN0IGlzIHRoaXM/IgogICAgICAgIGVjaG8gIjEpIFRoZW1lIChpbiB0aGVtZSBkaXJlY3RvcnkpIgogICAgICAgIGVjaG8gIjIpIFBsdWdpbiAoaW4gcGx1Z2luIGRpcmVjdG9yeSkiCiAgICAgICAgZWNobyAiMykgRnVsbCBzaXRlICh3cC1jb25maWcucGhwIGluIHJvb3QpIgogICAgICAgIGVjaG8gLW4gIkVudGVyIGNob2ljZSBbMS0zXTogIgogICAgICAgIHJlYWQgLXIgd3BfY2hvaWNlCiAgICAgICAgCiAgICAgICAgY2FzZSAiJHdwX2Nob2ljZSIgaW4KICAgICAgICAgICAgMSkgd3BfdHlwZT0idGhlbWUiIDs7CiAgICAgICAgICAgIDIpIHdwX3R5cGU9InBsdWdpbiIgOzsKICAgICAgICAgICAgMykgd3BfdHlwZT0ic2l0ZSI7IHdwX3BhdGg9JChjb25maWd1cmVfd29yZHByZXNzX3NpdGUpIDs7CiAgICAgICAgICAgICopIHdwX3R5cGU9InRoZW1lIiA7OwogICAgICAgIGVzYWMKICAgIGZpCiAgICAKICAgIGV4cG9ydCBCT09UU1RSQVBfV1BfVFlQRT0iJHdwX3R5cGUiCiAgICBlY2hvICIkd3BfcGF0aCIKfQoKY29uZmlndXJlX3dvcmRwcmVzc19zaXRlKCkgewogICAgcHJpbnRfaW5mbyAiXG5Gb3IgV29yZFByZXNzIHNpdGVzLCBNQUlBU1MgbmVlZHMgdG8ga25vdyB3aGljaCB0aGVtZS9wbHVnaW4gdG8gbWFuYWdlLiIgImFsd2F5cyIKICAgIGVjaG8gIlBsZWFzZSBzcGVjaWZ5IHRoZSBwYXRoIHRvIHlvdXIgYWN0aXZlIHRoZW1lIG9yIHBsdWdpbjoiCiAgICBlY2hvICJFeGFtcGxlczoiCiAgICBlY2hvICIgIHdwLWNvbnRlbnQvdGhlbWVzL215LXRoZW1lIgogICAgZWNobyAiICB3cC1jb250ZW50L3BsdWdpbnMvbXktcGx1Z2luIgogICAgCiAgICAjIFNob3cgZXhpc3RpbmcgdmFsdWUgaWYgYXZhaWxhYmxlCiAgICBpZiBbWyAtbiAiJEVYSVNUSU5HX1dQX1BBVEgiICYmICIkRVhJU1RJTkdfV1BfUEFUSCIgIT0gIi4iIF1dOyB0aGVuCiAgICAgICAgZWNobyAtbiAiUGF0aCBbY3VycmVudDogJEVYSVNUSU5HX1dQX1BBVEhdOiAiCiAgICBlbHNlCiAgICAgICAgZWNobyAtbiAiUGF0aDogIgogICAgZmkKICAgIHJlYWQgLXIgd3BfdGFyZ2V0X3BhdGgKICAgIAogICAgIyBVc2UgZXhpc3RpbmcgdmFsdWUgaWYgbm8gaW5wdXQgcHJvdmlkZWQKICAgIGlmIFtbIC16ICIkd3BfdGFyZ2V0X3BhdGgiICYmIC1uICIkRVhJU1RJTkdfV1BfUEFUSCIgXV07IHRoZW4KICAgICAgICB3cF90YXJnZXRfcGF0aD0iJEVYSVNUSU5HX1dQX1BBVEgiCiAgICBmaQogICAgCiAgICAjIFZhbGlkYXRlIHRoZSBwYXRoIGV4aXN0cwogICAgd2hpbGUgW1sgISAtZCAiJHdwX3RhcmdldF9wYXRoIiBdXTsgZG8KICAgICAgICBwcmludF93YXJuaW5nICJEaXJlY3RvcnkgJyR3cF90YXJnZXRfcGF0aCcgbm90IGZvdW5kLiIKICAgICAgICBlY2hvIC1uICJQbGVhc2UgZW50ZXIgYSB2YWxpZCBwYXRoOiAiCiAgICAgICAgcmVhZCAtciB3cF90YXJnZXRfcGF0aAogICAgZG9uZQogICAgCiAgICAjIENoZWNrIGlmIGl0J3MgYSB0aGVtZSBvciBwbHVnaW4KICAgIGlmIFtbIC1mICIkd3BfdGFyZ2V0X3BhdGgvc3R5bGUuY3NzIiAmJiAtZiAiJHdwX3RhcmdldF9wYXRoL2Z1bmN0aW9ucy5waHAiIF1dOyB0aGVuCiAgICAgICAgcHJpbnRfc3VjY2VzcyAi4pyTIFdvcmRQcmVzcyB0aGVtZSBjb25maXJtZWQ6ICR3cF90YXJnZXRfcGF0aCIKICAgICAgICBleHBvcnQgQk9PVFNUUkFQX1dQX1RZUEU9InRoZW1lIgogICAgZWxpZiBmaW5kICIkd3BfdGFyZ2V0X3BhdGgiIC1tYXhkZXB0aCAxIC1uYW1lICIqLnBocCIgLWV4ZWMgZ3JlcCAtbCAiUGx1Z2luIE5hbWU6IiB7fSBcOyAyPi9kZXYvbnVsbCB8IGhlYWQgLTEgPi9kZXYvbnVsbDsgdGhlbgogICAgICAgIHByaW50X3N1Y2Nlc3MgIuKckyBXb3JkUHJlc3MgcGx1Z2luIGNvbmZpcm1lZDogJHdwX3RhcmdldF9wYXRoIgogICAgICAgIGV4cG9ydCBCT09UU1RSQVBfV1BfVFlQRT0icGx1Z2luIgogICAgZWxzZQogICAgICAgIHByaW50X3dhcm5pbmcgIkNvdWxkIG5vdCBjb25maXJtIFdvcmRQcmVzcyB0aGVtZS9wbHVnaW4gaW4gJyR3cF90YXJnZXRfcGF0aCciCiAgICAgICAgcHJpbnRfaW5mbyAiQ29udGludWluZyB3aXRoIGdlbmVyaWMgY29uZmlndXJhdGlvbi4uLiIKICAgICAgICBleHBvcnQgQk9PVFNUUkFQX1dQX1RZUEU9ImdlbmVyaWMiCiAgICBmaQogICAgCiAgICBlY2hvICIkd3BfdGFyZ2V0X3BhdGgiCn0KCiMgU3RlcCAzOiBDb25maWd1cmUgdmVyc2lvbiBzb3VyY2UKY29uZmlndXJlX3ZlcnNpb25fc291cmNlKCkgewogICAgcHJpbnRfc2VjdGlvbiAi8J+TiyBWZXJzaW9uIFNvdXJjZSBDb25maWd1cmF0aW9uIgogICAgCiAgICBsb2NhbCB2ZXJzaW9uX3NvdXJjZXM9KCkKICAgIGxvY2FsIHJlY29tbWVuZGVkX3NvdXJjZT0iIgogICAgCiAgICAjIENoZWNrIHdoYXQgdmVyc2lvbiBmaWxlcyBleGlzdAogICAgaWYgW1sgLWYgInBhY2thZ2UuanNvbiIgXV07IHRoZW4KICAgICAgICB2ZXJzaW9uX3NvdXJjZXMrPSgicGFja2FnZS5qc29uIikKICAgICAgICByZWNvbW1lbmRlZF9zb3VyY2U9InBhY2thZ2UuanNvbiIKICAgIGZpCiAgICAKICAgIGlmIFtbIC1mICJWRVJTSU9OIiBdXTsgdGhlbgogICAgICAgIHZlcnNpb25fc291cmNlcys9KCJWRVJTSU9OIikKICAgICAgICBpZiBbWyAteiAiJHJlY29tbWVuZGVkX3NvdXJjZSIgXV07IHRoZW4KICAgICAgICAgICAgcmVjb21tZW5kZWRfc291cmNlPSJWRVJTSU9OIgogICAgICAgIGZpCiAgICBmaQogICAgCiAgICAjIENoZWNrIGZvciBXb3JkUHJlc3MgdmVyc2lvbiBmaWxlcyBpZiBhcHBsaWNhYmxlCiAgICBpZiBbWyAiJEJPT1RTVFJBUF9QUk9KRUNUX1RZUEUiID09ICJ3b3JkcHJlc3MiIF1dOyB0aGVuCiAgICAgICAgbG9jYWwgd3BfcGF0aD0iJHtCT09UU1RSQVBfV1BfUEFUSDotLn0iCiAgICAgICAgaWYgW1sgLWYgIiR3cF9wYXRoL3N0eWxlLmNzcyIgXV07IHRoZW4KICAgICAgICAgICAgdmVyc2lvbl9zb3VyY2VzKz0oIiR3cF9wYXRoL3N0eWxlLmNzcyIpCiAgICAgICAgICAgIGlmIFtbIC16ICIkcmVjb21tZW5kZWRfc291cmNlIiBdXTsgdGhlbgogICAgICAgICAgICAgICAgcmVjb21tZW5kZWRfc291cmNlPSIkd3BfcGF0aC9zdHlsZS5jc3MiCiAgICAgICAgICAgIGZpCiAgICAgICAgZmkKICAgIGZpCiAgICAKICAgIGlmIFtbICR7I3ZlcnNpb25fc291cmNlc1tAXX0gLWVxIDAgXV07IHRoZW4KICAgICAgICBwcmludF9pbmZvICJObyB2ZXJzaW9uIGZpbGVzIGZvdW5kLiBZb3UgY2FuOiIgImFsd2F5cyIKICAgICAgICBlY2hvICIxKSBDcmVhdGUgYSBWRVJTSU9OIGZpbGUgKHJlY29tbWVuZGVkIGZvciBzaW1wbGUgcHJvamVjdHMpIgogICAgICAgIGVjaG8gIjIpIENyZWF0ZSBhIHBhY2thZ2UuanNvbiBmaWxlIChyZWNvbW1lbmRlZCBmb3IgTm9kZS5qcyBwcm9qZWN0cykiCiAgICAgICAgZWNobyAiMykgU2tpcCB2ZXJzaW9uaW5nIChBSSBjb21taXRzIG9ubHkpIgogICAgICAgIGVjaG8gLW4gIkVudGVyIGNob2ljZSBbMS0zXTogIgogICAgICAgIHJlYWQgLXIgdmVyc2lvbl9jaG9pY2UKICAgICAgICAKICAgICAgICBjYXNlICIkdmVyc2lvbl9jaG9pY2UiIGluCiAgICAgICAgICAgIDEpIAogICAgICAgICAgICAgICAgZWNobyAiMS4wLjAiID4gVkVSU0lPTgogICAgICAgICAgICAgICAgcmVjb21tZW5kZWRfc291cmNlPSJWRVJTSU9OIgogICAgICAgICAgICAgICAgcHJpbnRfc3VjY2VzcyAi4pyTIENyZWF0ZWQgVkVSU0lPTiBmaWxlIHdpdGggaW5pdGlhbCB2ZXJzaW9uIDEuMC4wIgogICAgICAgICAgICAgICAgOzsKICAgICAgICAgICAgMikKICAgICAgICAgICAgICAgIGNyZWF0ZV9iYXNpY19wYWNrYWdlX2pzb24KICAgICAgICAgICAgICAgIHJlY29tbWVuZGVkX3NvdXJjZT0icGFja2FnZS5qc29uIgogICAgICAgICAgICAgICAgOzsKICAgICAgICAgICAgMykKICAgICAgICAgICAgICAgIGV4cG9ydCBCT09UU1RSQVBfVkVSU0lPTl9TT1VSQ0U9IiIKICAgICAgICAgICAgICAgIGV4cG9ydCBCT09UU1RSQVBfRkVBVFVSRVM9ImFpX29ubHkiCiAgICAgICAgICAgICAgICByZXR1cm4gMAogICAgICAgICAgICAgICAgOzsKICAgICAgICBlc2FjCiAgICBlbHNlCiAgICAgICAgcHJpbnRfaW5mbyAiRm91bmQgdmVyc2lvbiBmaWxlczogJHt2ZXJzaW9uX3NvdXJjZXNbKl19IiAiYWx3YXlzIgogICAgICAgIGlmIFtbIC1uICIkcmVjb21tZW5kZWRfc291cmNlIiBdXTsgdGhlbgogICAgICAgICAgICAjIFNob3cgZXhpc3RpbmcgdmFsdWUgaWYgYXZhaWxhYmxlCiAgICAgICAgICAgIGlmIFtbIC1uICIkRVhJU1RJTkdfVkVSU0lPTl9TT1VSQ0UiIF1dOyB0aGVuCiAgICAgICAgICAgICAgICBwcmludF9pbmZvICJDdXJyZW50OiAkRVhJU1RJTkdfVkVSU0lPTl9TT1VSQ0UiICJhbHdheXMiCiAgICAgICAgICAgICAgICBwcmludF9pbmZvICJSZWNvbW1lbmRlZDogJHJlY29tbWVuZGVkX3NvdXJjZSIgImFsd2F5cyIKICAgICAgICAgICAgICAgIGVjaG8gLW4gIlVzZSAkcmVjb21tZW5kZWRfc291cmNlIGFzIHZlcnNpb24gc291cmNlPyBbWS9uLCBFbnRlciB0byBrZWVwIGN1cnJlbnRdOiAiCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHByaW50X2luZm8gIlJlY29tbWVuZGVkOiAkcmVjb21tZW5kZWRfc291cmNlIiAiYWx3YXlzIgogICAgICAgICAgICAgICAgZWNobyAtbiAiVXNlICRyZWNvbW1lbmRlZF9zb3VyY2UgYXMgdmVyc2lvbiBzb3VyY2U/IFtZL25dOiAiCiAgICAgICAgICAgIGZpCiAgICAgICAgICAgIHJlYWQgLXIgdXNlX3JlY29tbWVuZGVkCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBbWyAteiAiJHVzZV9yZWNvbW1lbmRlZCIgJiYgLW4gIiRFWElTVElOR19WRVJTSU9OX1NPVVJDRSIgXV07IHRoZW4KICAgICAgICAgICAgICAgICMgS2VlcCBleGlzdGluZyB2YWx1ZQogICAgICAgICAgICAgICAgZXhwb3J0IEJPT1RTVFJBUF9WRVJTSU9OX1NPVVJDRT0iJEVYSVNUSU5HX1ZFUlNJT05fU09VUkNFIgogICAgICAgICAgICAgICAgcmV0dXJuIDAKICAgICAgICAgICAgZWxpZiBbWyAhICIkdXNlX3JlY29tbWVuZGVkIiA9fiBeW05uXSQgXV07IHRoZW4KICAgICAgICAgICAgICAgIGV4cG9ydCBCT09UU1RSQVBfVkVSU0lPTl9TT1VSQ0U9IiRyZWNvbW1lbmRlZF9zb3VyY2UiCiAgICAgICAgICAgICAgICByZXR1cm4gMAogICAgICAgICAgICBmaQogICAgICAgIGZpCiAgICAgICAgCiAgICAgICAgIyBMZXQgdXNlciBjaG9vc2UKICAgICAgICBlY2hvICJTZWxlY3QgdmVyc2lvbiBzb3VyY2U6IgogICAgICAgIGZvciBpIGluICIkeyF2ZXJzaW9uX3NvdXJjZXNbQF19IjsgZG8KICAgICAgICAgICAgZWNobyAiJCgoaSsxKSkpICR7dmVyc2lvbl9zb3VyY2VzW2ldfSIKICAgICAgICBkb25lCiAgICAgICAgZWNobyAtbiAiRW50ZXIgY2hvaWNlIFsxLSR7I3ZlcnNpb25fc291cmNlc1tAXX1dOiAiCiAgICAgICAgcmVhZCAtciBzb3VyY2VfY2hvaWNlCiAgICAgICAgCiAgICAgICAgaWYgW1sgIiRzb3VyY2VfY2hvaWNlIiA9fiBeWzAtOV0rJCBdXSAmJiBbWyAiJHNvdXJjZV9jaG9pY2UiIC1nZSAxIF1dICYmIFtbICIkc291cmNlX2Nob2ljZSIgLWxlICR7I3ZlcnNpb25fc291cmNlc1tAXX0gXV07IHRoZW4KICAgICAgICAgICAgZXhwb3J0IEJPT1RTVFJBUF9WRVJTSU9OX1NPVVJDRT0iJHt2ZXJzaW9uX3NvdXJjZXNbJCgoc291cmNlX2Nob2ljZS0xKSldfSIKICAgICAgICBlbHNlCiAgICAgICAgICAgIGV4cG9ydCBCT09UU1RSQVBfVkVSU0lPTl9TT1VSQ0U9IiRyZWNvbW1lbmRlZF9zb3VyY2UiCiAgICAgICAgZmkKICAgIGZpCiAgICAKICAgIHByaW50X3N1Y2Nlc3MgIuKckyBWZXJzaW9uIHNvdXJjZTogJHtCT09UU1RSQVBfVkVSU0lPTl9TT1VSQ0V9Igp9CgpjcmVhdGVfYmFzaWNfcGFja2FnZV9qc29uKCkgewogICAgbG9jYWwgcHJvamVjdF9uYW1lCiAgICBwcm9qZWN0X25hbWU9JChiYXNlbmFtZSAiJChwd2QpIikKICAgIGNhdCA+IHBhY2thZ2UuanNvbiA8PCBFT0YKewogICJuYW1lIjogIiRwcm9qZWN0X25hbWUiLAogICJ2ZXJzaW9uIjogIjEuMC4wIiwKICAiZGVzY3JpcHRpb24iOiAiIiwKICAibWFpbiI6ICJpbmRleC5qcyIsCiAgInNjcmlwdHMiOiB7CiAgICAidGVzdCI6ICJlY2hvIFwiRXJyb3I6IG5vIHRlc3Qgc3BlY2lmaWVkXCIgJiYgZXhpdCAxIgogIH0sCiAgImtleXdvcmRzIjogW10sCiAgImF1dGhvciI6ICIiLAogICJsaWNlbnNlIjogIklTQyIKfQpFT0YKICAgIHByaW50X3N1Y2Nlc3MgIuKckyBDcmVhdGVkIGJhc2ljIHBhY2thZ2UuanNvbiB3aXRoIHZlcnNpb24gMS4wLjAiCn0KCiMgU3RlcCA0OiBDaG9vc2UgTUFJQVNTIGZlYXR1cmVzCmNob29zZV9tYWlhc3NfZmVhdHVyZXMoKSB7CiAgICBwcmludF9zZWN0aW9uICLimpnvuI8gRmVhdHVyZSBTZWxlY3Rpb24iCiAgICAKICAgIGlmIFtbICIkQk9PVFNUUkFQX0ZFQVRVUkVTIiA9PSAiYWlfb25seSIgXV07IHRoZW4KICAgICAgICBwcmludF9pbmZvICJGZWF0dXJlczogQUkgY29tbWl0IG1lc3NhZ2VzIG9ubHkgKG5vIHZlcnNpb24gZmlsZXMpIiAiYWx3YXlzIgogICAgICAgIHJldHVybiAwCiAgICBmaQogICAgCiAgICBwcmludF9pbmZvICJXaGF0IE1BSUFTUyBmZWF0dXJlcyB3b3VsZCB5b3UgbGlrZSB0byB1c2U/IiAiYWx3YXlzIgogICAgZWNobyAiMSkgRnVsbCB3b3JrZmxvdyAodmVyc2lvbmluZyArIGNoYW5nZWxvZyArIEFJIGNvbW1pdHMpIgogICAgZWNobyAiMikgVmVyc2lvbmluZyBvbmx5ICh2ZXJzaW9uIGJ1bXBpbmcgd2l0aG91dCBjaGFuZ2Vsb2cpIgogICAgZWNobyAiMykgQUkgY29tbWl0IG1lc3NhZ2VzIG9ubHkiCiAgICAKICAgICMgU2hvdyBleGlzdGluZyB2YWx1ZSBpZiBhdmFpbGFibGUKICAgIGlmIFtbICIkRVhJU1RJTkdfRkVBVFVSRVMiID09ICJhaV9vbmx5IiBdXTsgdGhlbgogICAgICAgIGVjaG8gLW4gIkVudGVyIGNob2ljZSBbMS0zLCBjdXJyZW50OiAzXTogIgogICAgZWxzZQogICAgICAgIGVjaG8gLW4gIkVudGVyIGNob2ljZSBbMS0zLCBkZWZhdWx0OiAxXTogIgogICAgZmkKICAgIHJlYWQgLXIgZmVhdHVyZV9jaG9pY2UKICAgIAogICAgIyBVc2UgZXhpc3RpbmcgdmFsdWUgaWYgbm8gaW5wdXQgcHJvdmlkZWQKICAgIGlmIFtbIC16ICIkZmVhdHVyZV9jaG9pY2UiICYmICIkRVhJU1RJTkdfRkVBVFVSRVMiID09ICJhaV9vbmx5IiBdXTsgdGhlbgogICAgICAgIGZlYXR1cmVfY2hvaWNlPSIzIgogICAgZmkKICAgIAogICAgY2FzZSAiJGZlYXR1cmVfY2hvaWNlIiBpbgogICAgICAgIDIpIGV4cG9ydCBCT09UU1RSQVBfRkVBVFVSRVM9InZlcnNpb25pbmdfb25seSIgOzsKICAgICAgICAzKSBleHBvcnQgQk9PVFNUUkFQX0ZFQVRVUkVTPSJhaV9vbmx5IiA7OwogICAgICAgICopIGV4cG9ydCBCT09UU1RSQVBfRkVBVFVSRVM9ImZ1bGwiIDs7CiAgICBlc2FjCiAgICAKICAgIGxvY2FsIGZlYXR1cmVfZGVzYwogICAgY2FzZSAiJEJPT1RTVFJBUF9GRUFUVVJFUyIgaW4KICAgICAgICAidmVyc2lvbmluZ19vbmx5IikgZmVhdHVyZV9kZXNjPSJWZXJzaW9uaW5nIG9ubHkiIDs7CiAgICAgICAgImFpX29ubHkiKSBmZWF0dXJlX2Rlc2M9IkFJIGNvbW1pdCBtZXNzYWdlcyBvbmx5IiA7OwogICAgICAgICopIGZlYXR1cmVfZGVzYz0iRnVsbCB3b3JrZmxvdyAodmVyc2lvbmluZyArIGNoYW5nZWxvZyArIEFJKSIgOzsKICAgIGVzYWMKICAgIAogICAgcHJpbnRfc3VjY2VzcyAi4pyTIEZlYXR1cmVzOiAkZmVhdHVyZV9kZXNjIgp9CgojIFN0ZXAgNTogQ29uZmlndXJlIGJyYW5jaCBzdHJhdGVneQpjb25maWd1cmVfYnJhbmNoX3N0cmF0ZWd5KCkgewogICAgcHJpbnRfc2VjdGlvbiAi8J+MvyBCcmFuY2ggU3RyYXRlZ3kgQ29uZmlndXJhdGlvbiIKICAgIAogICAgIyBEZXRlY3QgbWFpbiBicmFuY2ggKG1haW4gdnMgbWFzdGVyKSAtIHVzZSBjdXJyZW50IGJyYW5jaCBpZiBubyBjb21taXRzIHlldAogICAgbG9jYWwgbWFpbl9icmFuY2g9IiIKICAgIGlmIGdpdCBzaG93LXJlZiAtLXZlcmlmeSAtLXF1aWV0IHJlZnMvaGVhZHMvbWFpbjsgdGhlbgogICAgICAgIG1haW5fYnJhbmNoPSJtYWluIgogICAgZWxpZiBnaXQgc2hvdy1yZWYgLS12ZXJpZnkgLS1xdWlldCByZWZzL2hlYWRzL21hc3RlcjsgdGhlbgogICAgICAgIG1haW5fYnJhbmNoPSJtYXN0ZXIiCiAgICBlbHNlCiAgICAgICAgIyBGb3IgZW1wdHkgcmVwb3MsIHVzZSB0aGUgY3VycmVudCBicmFuY2ggbmFtZQogICAgICAgIGxvY2FsIGN1cnJlbnRfYnJhbmNoCiAgICAgICAgY3VycmVudF9icmFuY2g9JChnaXQgc3ltYm9saWMtcmVmIC0tc2hvcnQgSEVBRCAyPi9kZXYvbnVsbCB8fCBlY2hvICJtYWluIikKICAgICAgICAKICAgICAgICAjIENoZWNrIHJlbW90ZSBpZiBhdmFpbGFibGUKICAgICAgICBpZiBnaXQgbHMtcmVtb3RlIC0taGVhZHMgb3JpZ2luICIkY3VycmVudF9icmFuY2giIDI+L2Rldi9udWxsIHwgZ3JlcCAtcSAiJGN1cnJlbnRfYnJhbmNoIjsgdGhlbgogICAgICAgICAgICBtYWluX2JyYW5jaD0iJGN1cnJlbnRfYnJhbmNoIgogICAgICAgIGVsaWYgZ2l0IGxzLXJlbW90ZSAtLWhlYWRzIG9yaWdpbiBtYWluIDI+L2Rldi9udWxsIHwgZ3JlcCAtcSBtYWluOyB0aGVuCiAgICAgICAgICAgIG1haW5fYnJhbmNoPSJtYWluIgogICAgICAgIGVsaWYgZ2l0IGxzLXJlbW90ZSAtLWhlYWRzIG9yaWdpbiBtYXN0ZXIgMj4vZGV2L251bGwgfCBncmVwIC1xIG1hc3RlcjsgdGhlbgogICAgICAgICAgICBtYWluX2JyYW5jaD0ibWFzdGVyIgogICAgICAgIGVsc2UKICAgICAgICAgICAgbWFpbl9icmFuY2g9IiRjdXJyZW50X2JyYW5jaCIgICMgVXNlIHdoYXRldmVyIGJyYW5jaCB3ZSdyZSBjdXJyZW50bHkgb24KICAgICAgICBmaQogICAgZmkKICAgIAogICAgIyBTaG93IGV4aXN0aW5nIHZhbHVlcyBpZiBhdmFpbGFibGUKICAgIGlmIFtbIC1uICIkRVhJU1RJTkdfTUFJTl9CUkFOQ0giIF1dOyB0aGVuCiAgICAgICAgcHJpbnRfaW5mbyAiQ3VycmVudCBtYWluIGJyYW5jaDogJEVYSVNUSU5HX01BSU5fQlJBTkNIIiAiYWx3YXlzIgogICAgICAgIHByaW50X2luZm8gIkRldGVjdGVkIG1haW4gYnJhbmNoOiAkbWFpbl9icmFuY2giICJhbHdheXMiCiAgICAgICAgaWYgW1sgIiRFWElTVElOR19NQUlOX0JSQU5DSCIgIT0gIiRtYWluX2JyYW5jaCIgXV07IHRoZW4KICAgICAgICAgICAgZWNobyAtbiAiVXBkYXRlIG1haW4gYnJhbmNoIHRvICRtYWluX2JyYW5jaD8gW3kvTl06ICIKICAgICAgICAgICAgcmVhZCAtciB1cGRhdGVfbWFpbgogICAgICAgICAgICBpZiBbWyAiJHVwZGF0ZV9tYWluIiA9fiBeW1l5XSQgXV07IHRoZW4KICAgICAgICAgICAgICAgIG1haW5fYnJhbmNoPSIkbWFpbl9icmFuY2giCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIG1haW5fYnJhbmNoPSIkRVhJU1RJTkdfTUFJTl9CUkFOQ0giCiAgICAgICAgICAgIGZpCiAgICAgICAgZWxzZQogICAgICAgICAgICBtYWluX2JyYW5jaD0iJEVYSVNUSU5HX01BSU5fQlJBTkNIIgogICAgICAgIGZpCiAgICBlbHNlCiAgICAgICAgcHJpbnRfaW5mbyAiRGV0ZWN0ZWQgbWFpbiBicmFuY2g6ICRtYWluX2JyYW5jaCIgImFsd2F5cyIKICAgIGZpCiAgICAKICAgICMgQ2hlY2sgaWYgdmVyc2lvbmluZyBmZWF0dXJlcyBhcmUgZW5hYmxlZAogICAgaWYgW1sgIiRCT09UU1RSQVBfRkVBVFVSRVMiID09ICJhaV9vbmx5IiBdXTsgdGhlbgogICAgICAgIHByaW50X2luZm8gIkFJLW9ubHkgbW9kZTogQnJhbmNoIHN0cmF0ZWd5IGlzIGZsZXhpYmxlIiAiYWx3YXlzIgogICAgICAgIGV4cG9ydCBCT09UU1RSQVBfTUFJTl9CUkFOQ0g9IiRtYWluX2JyYW5jaCIKICAgICAgICBleHBvcnQgQk9PVFNUUkFQX0RFVkVMT1BfQlJBTkNIPSIiCiAgICAgICAgcmV0dXJuIDAKICAgIGZpCiAgICAKICAgIHByaW50X2luZm8gIlxuVmVyc2lvbmluZyByZXF1aXJlcyBhIGRldmVsb3BtZW50IGJyYW5jaCBmb3IgdGhlIEdpdCBGbG93IHdvcmtmbG93LiIgImFsd2F5cyIKICAgIAogICAgIyBFbmhhbmNlZCBkZXZlbG9wIGJyYW5jaCBkZXRlY3Rpb24gLSBjaGVjayBsb2NhbCBhbmQgcmVtb3RlIGZvciBkZXZlbG9wL2RldgogICAgbG9jYWwgZGV2ZWxvcF9icmFuY2hfZm91bmQ9IiIKICAgIGxvY2FsIGRldmVsb3BfbG9jYXRpb249IiIKICAgIAogICAgIyBDaGVjayBsb2NhbCBicmFuY2hlcyBmaXJzdAogICAgaWYgZ2l0IHNob3ctcmVmIC0tdmVyaWZ5IC0tcXVpZXQgcmVmcy9oZWFkcy9kZXZlbG9wOyB0aGVuCiAgICAgICAgZGV2ZWxvcF9icmFuY2hfZm91bmQ9ImRldmVsb3AiCiAgICAgICAgZGV2ZWxvcF9sb2NhdGlvbj0ibG9jYWwiCiAgICAgICAgcHJpbnRfaW5mbyAi4pyTIEZvdW5kICdkZXZlbG9wJyBicmFuY2ggbG9jYWxseSIgImFsd2F5cyIKICAgIGVsaWYgZ2l0IHNob3ctcmVmIC0tdmVyaWZ5IC0tcXVpZXQgcmVmcy9oZWFkcy9kZXY7IHRoZW4KICAgICAgICBkZXZlbG9wX2JyYW5jaF9mb3VuZD0iZGV2IgogICAgICAgIGRldmVsb3BfbG9jYXRpb249ImxvY2FsIgogICAgICAgIHByaW50X2luZm8gIuKckyBGb3VuZCAnZGV2JyBicmFuY2ggbG9jYWxseSIgImFsd2F5cyIKICAgICMgQ2hlY2sgcmVtb3RlIGJyYW5jaGVzIGlmIG5vIGxvY2FsIGRldmVsb3AgYnJhbmNoIGZvdW5kCiAgICBlbGlmIGdpdCBscy1yZW1vdGUgLS1oZWFkcyBvcmlnaW4gZGV2ZWxvcCAyPi9kZXYvbnVsbCB8IGdyZXAgLXEgZGV2ZWxvcDsgdGhlbgogICAgICAgIGRldmVsb3BfYnJhbmNoX2ZvdW5kPSJkZXZlbG9wIgogICAgICAgIGRldmVsb3BfbG9jYXRpb249InJlbW90ZSIKICAgICAgICBwcmludF9pbmZvICLinJMgRm91bmQgJ2RldmVsb3AnIGJyYW5jaCBvbiByZW1vdGUiICJhbHdheXMiCiAgICBlbGlmIGdpdCBscy1yZW1vdGUgLS1oZWFkcyBvcmlnaW4gZGV2IDI+L2Rldi9udWxsIHwgZ3JlcCAtcSBkZXY7IHRoZW4KICAgICAgICBkZXZlbG9wX2JyYW5jaF9mb3VuZD0iZGV2IgogICAgICAgIGRldmVsb3BfbG9jYXRpb249InJlbW90ZSIKICAgICAgICBwcmludF9pbmZvICLinJMgRm91bmQgJ2RldicgYnJhbmNoIG9uIHJlbW90ZSIgImFsd2F5cyIKICAgIGZpCiAgICAKICAgICMgU2hvdyBleGlzdGluZyBkZXZlbG9wIGJyYW5jaCBpZiBhdmFpbGFibGUKICAgIGlmIFtbIC1uICIkRVhJU1RJTkdfREVWRUxPUF9CUkFOQ0giIF1dOyB0aGVuCiAgICAgICAgcHJpbnRfaW5mbyAiQ3VycmVudCBkZXZlbG9wIGJyYW5jaDogJEVYSVNUSU5HX0RFVkVMT1BfQlJBTkNIIiAiYWx3YXlzIgogICAgICAgIAogICAgICAgICMgQ2hlY2sgaWYgZXhpc3RpbmcgY29uZmlnIG1hdGNoZXMgd2hhdCB3ZSBmb3VuZAogICAgICAgIGlmIFtbIC1uICIkZGV2ZWxvcF9icmFuY2hfZm91bmQiICYmICIkRVhJU1RJTkdfREVWRUxPUF9CUkFOQ0giID09ICIkZGV2ZWxvcF9icmFuY2hfZm91bmQiIF1dOyB0aGVuCiAgICAgICAgICAgIGlmIFtbICIkZGV2ZWxvcF9sb2NhdGlvbiIgPT0gInJlbW90ZSIgXV07IHRoZW4KICAgICAgICAgICAgICAgIHByaW50X2luZm8gIkV4aXN0aW5nIGNvbmZpZyBtYXRjaGVzIHJlbW90ZSBicmFuY2ggJyRkZXZlbG9wX2JyYW5jaF9mb3VuZCciICJhbHdheXMiCiAgICAgICAgICAgICAgICBlY2hvIC1uICJDaGVjayBvdXQgcmVtb3RlICckZGV2ZWxvcF9icmFuY2hfZm91bmQnIGJyYW5jaCBsb2NhbGx5PyBbWS9uXTogIgogICAgICAgICAgICAgICAgcmVhZCAtciBjaGVja291dF9yZW1vdGUKICAgICAgICAgICAgICAgIGlmIFtbICEgIiRjaGVja291dF9yZW1vdGUiID1+IF5bTm5dJCBdXTsgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIGdpdCBjaGVja291dCAtYiAiJGRldmVsb3BfYnJhbmNoX2ZvdW5kIiAib3JpZ2luLyRkZXZlbG9wX2JyYW5jaF9mb3VuZCIgMj4vZGV2L251bGw7IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRfc3VjY2VzcyAi4pyTIENoZWNrZWQgb3V0ICckZGV2ZWxvcF9icmFuY2hfZm91bmQnIGZyb20gcmVtb3RlIgogICAgICAgICAgICAgICAgICAgICAgICBnaXQgY2hlY2tvdXQgLSA+L2Rldi9udWxsIDI+JjEKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50X3dhcm5pbmcgIkNvdWxkIG5vdCBjaGVjayBvdXQgcmVtb3RlIGJyYW5jaCIKICAgICAgICAgICAgICAgICAgICBmaQogICAgICAgICAgICAgICAgZmkKICAgICAgICAgICAgZmkKICAgICAgICAgICAgZXhwb3J0IEJPT1RTVFJBUF9ERVZFTE9QX0JSQU5DSD0iJEVYSVNUSU5HX0RFVkVMT1BfQlJBTkNIIgogICAgICAgICAgICBwcmludF9pbmZvICLinJMgVXNpbmcgZXhpc3RpbmcgZGV2ZWxvcCBicmFuY2g6ICRFWElTVElOR19ERVZFTE9QX0JSQU5DSCIgImFsd2F5cyIKICAgICAgICAgICAgZXhwb3J0IEJPT1RTVFJBUF9NQUlOX0JSQU5DSD0iJG1haW5fYnJhbmNoIgogICAgICAgICAgICByZXR1cm4gMAogICAgICAgIGVsaWYgW1sgLXogIiRkZXZlbG9wX2JyYW5jaF9mb3VuZCIgXV07IHRoZW4KICAgICAgICAgICAgcHJpbnRfd2FybmluZyAiQ29uZmlndXJhdGlvbiBzaG93cyAnJEVYSVNUSU5HX0RFVkVMT1BfQlJBTkNIJyBicmFuY2ggYnV0IGl0IGRvZXNuJ3QgZXhpc3QgbG9jYWxseSBvciByZW1vdGVseSIgImFsd2F5cyIKICAgICAgICAgICAgZWNobyAtbiAiQ3JlYXRlIG1pc3NpbmcgJyRFWElTVElOR19ERVZFTE9QX0JSQU5DSCcgYnJhbmNoPyBbWS9uXTogIgogICAgICAgICAgICByZWFkIC1yIGNyZWF0ZV9taXNzaW5nCiAgICAgICAgICAgIGlmIFtbICEgIiRjcmVhdGVfbWlzc2luZyIgPX4gXltObl0kIF1dOyB0aGVuCiAgICAgICAgICAgICAgICBpZiBnaXQgY2hlY2tvdXQgLWIgIiRFWElTVElOR19ERVZFTE9QX0JSQU5DSCIgMj4vZGV2L251bGw7IHRoZW4KICAgICAgICAgICAgICAgICAgICBwcmludF9zdWNjZXNzICLinJMgQ3JlYXRlZCBtaXNzaW5nICckRVhJU1RJTkdfREVWRUxPUF9CUkFOQ0gnIGJyYW5jaCIKICAgICAgICAgICAgICAgICAgICBleHBvcnQgQk9PVFNUUkFQX0RFVkVMT1BfQlJBTkNIPSIkRVhJU1RJTkdfREVWRUxPUF9CUkFOQ0giCiAgICAgICAgICAgICAgICAgICAgZ2l0IGNoZWNrb3V0IC0gPi9kZXYvbnVsbCAyPiYxCiAgICAgICAgICAgICAgICAgICAgZXhwb3J0IEJPT1RTVFJBUF9NQUlOX0JSQU5DSD0iJG1haW5fYnJhbmNoIgogICAgICAgICAgICAgICAgICAgIHJldHVybiAwCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgcHJpbnRfd2FybmluZyAiQ291bGQgbm90IGNyZWF0ZSAnJEVYSVNUSU5HX0RFVkVMT1BfQlJBTkNIJyBicmFuY2giCiAgICAgICAgICAgICAgICBmaQogICAgICAgICAgICBmaQogICAgICAgIGZpCiAgICBmaQogICAgCiAgICAjIEhhbmRsZSBjYXNlIHdoZXJlIHdlIGZvdW5kIGEgZGV2ZWxvcCBicmFuY2ggYnV0IG5vIGV4aXN0aW5nIGNvbmZpZwogICAgaWYgW1sgLW4gIiRkZXZlbG9wX2JyYW5jaF9mb3VuZCIgJiYgLXogIiRFWElTVElOR19ERVZFTE9QX0JSQU5DSCIgXV07IHRoZW4KICAgICAgICBpZiBbWyAiJGRldmVsb3BfbG9jYXRpb24iID09ICJyZW1vdGUiIF1dOyB0aGVuCiAgICAgICAgICAgIHByaW50X2luZm8gIkZvdW5kICckZGV2ZWxvcF9icmFuY2hfZm91bmQnIGJyYW5jaCBvbiByZW1vdGUiICJhbHdheXMiCiAgICAgICAgICAgIGVjaG8gLW4gIkNoZWNrIG91dCBhbmQgdXNlIHJlbW90ZSAnJGRldmVsb3BfYnJhbmNoX2ZvdW5kJyBicmFuY2g/IFtZL25dOiAiCiAgICAgICAgICAgIHJlYWQgLXIgdXNlX3JlbW90ZQogICAgICAgICAgICBpZiBbWyAhICIkdXNlX3JlbW90ZSIgPX4gXltObl0kIF1dOyB0aGVuCiAgICAgICAgICAgICAgICBpZiBnaXQgY2hlY2tvdXQgLWIgIiRkZXZlbG9wX2JyYW5jaF9mb3VuZCIgIm9yaWdpbi8kZGV2ZWxvcF9icmFuY2hfZm91bmQiIDI+L2Rldi9udWxsOyB0aGVuCiAgICAgICAgICAgICAgICAgICAgcHJpbnRfc3VjY2VzcyAi4pyTIENoZWNrZWQgb3V0ICckZGV2ZWxvcF9icmFuY2hfZm91bmQnIGZyb20gcmVtb3RlIgogICAgICAgICAgICAgICAgICAgIGV4cG9ydCBCT09UU1RSQVBfREVWRUxPUF9CUkFOQ0g9IiRkZXZlbG9wX2JyYW5jaF9mb3VuZCIKICAgICAgICAgICAgICAgICAgICBnaXQgY2hlY2tvdXQgLSA+L2Rldi9udWxsIDI+JjEKICAgICAgICAgICAgICAgICAgICBleHBvcnQgQk9PVFNUUkFQX01BSU5fQlJBTkNIPSIkbWFpbl9icmFuY2giCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDAKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBwcmludF93YXJuaW5nICJDb3VsZCBub3QgY2hlY2sgb3V0IHJlbW90ZSBicmFuY2giCiAgICAgICAgICAgICAgICBmaQogICAgICAgICAgICBmaQogICAgICAgIGVsc2UKICAgICAgICAgICAgIyBMb2NhbCBicmFuY2ggZm91bmQKICAgICAgICAgICAgZXhwb3J0IEJPT1RTVFJBUF9ERVZFTE9QX0JSQU5DSD0iJGRldmVsb3BfYnJhbmNoX2ZvdW5kIgogICAgICAgICAgICBwcmludF9zdWNjZXNzICLinJMgVXNpbmcgZXhpc3RpbmcgbG9jYWwgJyRkZXZlbG9wX2JyYW5jaF9mb3VuZCcgYnJhbmNoIiAiYWx3YXlzIgogICAgICAgICAgICBleHBvcnQgQk9PVFNUUkFQX01BSU5fQlJBTkNIPSIkbWFpbl9icmFuY2giCiAgICAgICAgICAgIHJldHVybiAwCiAgICAgICAgZmkKICAgIGZpCiAgICAKICAgICMgTm8gZGV2ZWxvcCBicmFuY2ggZm91bmQgLSBpbmZvcm0gdXNlciBhbmQgb2ZmZXIgdG8gY3JlYXRlIG9uZQogICAgaWYgW1sgLXogIiRkZXZlbG9wX2JyYW5jaF9mb3VuZCIgXV07IHRoZW4KICAgICAgICBwcmludF93YXJuaW5nICLimqAgTm8gZGV2ZWxvcG1lbnQgYnJhbmNoIGZvdW5kIChjaGVja2VkIGZvciAnZGV2ZWxvcCcgYW5kICdkZXYnIGxvY2FsbHkgYW5kIHJlbW90ZWx5KSIgImFsd2F5cyIKICAgICAgICBwcmludF9pbmZvICJcbk1BSUFTUyB2ZXJzaW9uIG1hbmFnZW1lbnQgcmVxdWlyZXMgYSBkZXZlbG9wbWVudCBicmFuY2ggZm9yIHByb3BlciBHaXQgRmxvdyB3b3JrZmxvdy4iICJhbHdheXMiCiAgICAgICAgcHJpbnRfaW5mbyAiVGhpcyBhbGxvd3Mgc2FmZSB2ZXJzaW9uIGJ1bXBpbmcgYW5kIG1lcmdpbmcgYmV0d2VlbiBtYWluIGFuZCBkZXZlbG9wbWVudCBicmFuY2hlcy4iICJhbHdheXMiCiAgICAgICAgZWNobyAiIgogICAgICAgIGVjaG8gIldvdWxkIHlvdSBsaWtlIHRvOiIKICAgICAgICBlY2hvICIxKSBDcmVhdGUgJ2RldmVsb3AnIGJyYW5jaCAocmVjb21tZW5kZWQgZm9yIEdpdCBGbG93KSIKICAgICAgICBlY2hvICIyKSBDcmVhdGUgJ2RldicgYnJhbmNoIChzaG9ydGVyIGFsdGVybmF0aXZlKSIKICAgICAgICBlY2hvICIzKSBVc2UgY3VycmVudCBicmFuY2ggYXMgZGV2ZWxvcG1lbnQgYnJhbmNoIgogICAgICAgIGVjaG8gIjQpIFNraXAgYnJhbmNoIHNldHVwIChjb25maWd1cmUgbWFudWFsbHkgbGF0ZXIpIgogICAgICAgIGVjaG8gLW4gIkVudGVyIGNob2ljZSBbMS00LCBkZWZhdWx0OiAxXTogIgogICAgICAgIHJlYWQgLXIgYnJhbmNoX2Nob2ljZQogICAgICAgIAogICAgICAgIGNhc2UgIiRicmFuY2hfY2hvaWNlIiBpbgogICAgICAgICAgICAyKQogICAgICAgICAgICAgICAgIyBDcmVhdGUgZGV2IGJyYW5jaAogICAgICAgICAgICAgICAgaWYgZ2l0IGNoZWNrb3V0IC1iIGRldiAyPi9kZXYvbnVsbDsgdGhlbgogICAgICAgICAgICAgICAgICAgIHByaW50X3N1Y2Nlc3MgIuKckyBDcmVhdGVkICdkZXYnIGJyYW5jaCIKICAgICAgICAgICAgICAgICAgICBleHBvcnQgQk9PVFNUUkFQX0RFVkVMT1BfQlJBTkNIPSJkZXYiCiAgICAgICAgICAgICAgICAgICAgZ2l0IGNoZWNrb3V0IC0gPi9kZXYvbnVsbCAyPiYxCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgcHJpbnRfd2FybmluZyAiQ291bGQgbm90IGNyZWF0ZSAnZGV2JyBicmFuY2giCiAgICAgICAgICAgICAgICAgICAgZXhwb3J0IEJPT1RTVFJBUF9ERVZFTE9QX0JSQU5DSD0iIgogICAgICAgICAgICAgICAgZmkKICAgICAgICAgICAgICAgIDs7CiAgICAgICAgICAgIDMpCiAgICAgICAgICAgICAgICBsb2NhbCBjdXJyZW50X2JyYW5jaAogICAgICAgICAgICAgICAgaWYgZ2l0IHJldi1wYXJzZSAtLXZlcmlmeSBIRUFEID4vZGV2L251bGwgMj4mMTsgdGhlbgogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfYnJhbmNoPSQoZ2l0IHJldi1wYXJzZSAtLWFiYnJldi1yZWYgSEVBRCkKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBjdXJyZW50X2JyYW5jaD0kKGdpdCBzeW1ib2xpYy1yZWYgLS1zaG9ydCBIRUFEIDI+L2Rldi9udWxsIHx8IGVjaG8gIm1haW4iKQogICAgICAgICAgICAgICAgZmkKICAgICAgICAgICAgICAgIGV4cG9ydCBCT09UU1RSQVBfREVWRUxPUF9CUkFOQ0g9IiRjdXJyZW50X2JyYW5jaCIKICAgICAgICAgICAgICAgIHByaW50X2luZm8gIuKckyBVc2luZyAnJGN1cnJlbnRfYnJhbmNoJyBhcyBkZXZlbG9wbWVudCBicmFuY2giICJhbHdheXMiCiAgICAgICAgICAgICAgICA7OwogICAgICAgICAgICA0KQogICAgICAgICAgICAgICAgZXhwb3J0IEJPT1RTVFJBUF9ERVZFTE9QX0JSQU5DSD0iIgogICAgICAgICAgICAgICAgcHJpbnRfd2FybmluZyAiQnJhbmNoIHNldHVwIHNraXBwZWQgLSB5b3UnbGwgbmVlZCB0byBjb25maWd1cmUgbWFudWFsbHkiICJhbHdheXMiCiAgICAgICAgICAgICAgICBwcmludF9pbmZvICJOb3RlOiBWZXJzaW9uIG1hbmFnZW1lbnQgbWF5IG5vdCB3b3JrIHByb3Blcmx5IHdpdGhvdXQgYSBkZXZlbG9wbWVudCBicmFuY2giICJhbHdheXMiCiAgICAgICAgICAgICAgICA7OwogICAgICAgICAgICAqKQogICAgICAgICAgICAgICAgIyBDcmVhdGUgZGV2ZWxvcCBicmFuY2ggKGRlZmF1bHQpCiAgICAgICAgICAgICAgICBpZiBnaXQgY2hlY2tvdXQgLWIgZGV2ZWxvcCAyPi9kZXYvbnVsbDsgdGhlbgogICAgICAgICAgICAgICAgICAgIHByaW50X3N1Y2Nlc3MgIuKckyBDcmVhdGVkICdkZXZlbG9wJyBicmFuY2giCiAgICAgICAgICAgICAgICAgICAgZXhwb3J0IEJPT1RTVFJBUF9ERVZFTE9QX0JSQU5DSD0iZGV2ZWxvcCIKICAgICAgICAgICAgICAgICAgICBnaXQgY2hlY2tvdXQgLSA+L2Rldi9udWxsIDI+JjEKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBwcmludF93YXJuaW5nICJDb3VsZCBub3QgY3JlYXRlICdkZXZlbG9wJyBicmFuY2giCiAgICAgICAgICAgICAgICAgICAgZXhwb3J0IEJPT1RTVFJBUF9ERVZFTE9QX0JSQU5DSD0iIgogICAgICAgICAgICAgICAgZmkKICAgICAgICAgICAgICAgIDs7CiAgICAgICAgZXNhYwogICAgZmkKICAgIAogICAgZXhwb3J0IEJPT1RTVFJBUF9NQUlOX0JSQU5DSD0iJG1haW5fYnJhbmNoIgogICAgCiAgICBwcmludF9zdWNjZXNzICLinJMgQnJhbmNoIHN0cmF0ZWd5IGNvbmZpZ3VyZWQiICJhbHdheXMiCiAgICBwcmludF9pbmZvICIgIE1haW46ICRtYWluX2JyYW5jaCIgImFsd2F5cyIKICAgIGlmIFtbIC1uICIkQk9PVFNUUkFQX0RFVkVMT1BfQlJBTkNIIiBdXTsgdGhlbgogICAgICAgIHByaW50X2luZm8gIiAgRGV2ZWxvcDogJEJPT1RTVFJBUF9ERVZFTE9QX0JSQU5DSCIgImFsd2F5cyIKICAgIGZpCn0KCiMgU3RlcCA2OiBTYXZlIGFsbCBjb25maWd1cmF0aW9uIHRvIC5lbnYubWFpYXNzCnNhdmVfYm9vdHN0cmFwX2NvbmZpZygpIHsKICAgIHByaW50X3NlY3Rpb24gIvCfkr4gU2F2aW5nIENvbmZpZ3VyYXRpb24iCiAgICAKICAgICMgQ3JlYXRlIC5lbnYubWFpYXNzIHdpdGggYWxsIHNldHRpbmdzCiAgICBjYXQgPiAuZW52Lm1haWFzcyA8PCBFT0YKIyBNQUlBU1MgQ29uZmlndXJhdGlvbgojIEdlbmVyYXRlZCBieSBib290c3RyYXAgb24gJChkYXRlKQoKIyBQcm9qZWN0IFR5cGUKTUFJQVNTX1JFUE9fVFlQRT0ke0JPT1RTVFJBUF9QUk9KRUNUX1RZUEU6LWJlc3Bva2V9CkVPRgogICAgCiAgICAjIEFkZCBXb3JkUHJlc3Mtc3BlY2lmaWMgc2V0dGluZ3MKICAgIGlmIFtbICIkQk9PVFNUUkFQX1BST0pFQ1RfVFlQRSIgPT0gIndvcmRwcmVzcyIgXV07IHRoZW4KICAgICAgICBjYXQgPj4gLmVudi5tYWlhc3MgPDwgRU9GCgojIFdvcmRQcmVzcyBDb25maWd1cmF0aW9uCk1BSUFTU19XUF9GSUxFU19QQVRIPSR7Qk9PVFNUUkFQX1dQX1BBVEg6LS59CkVPRgogICAgICAgIAogICAgICAgIGlmIFtbIC1uICIkQk9PVFNUUkFQX1dQX1RZUEUiIF1dOyB0aGVuCiAgICAgICAgICAgIGVjaG8gIiMgV29yZFByZXNzIHR5cGU6ICRCT09UU1RSQVBfV1BfVFlQRSIgPj4gLmVudi5tYWlhc3MKICAgICAgICBmaQogICAgZmkKICAgIAogICAgIyBBZGQgdmVyc2lvbiBjb25maWd1cmF0aW9uCiAgICBpZiBbWyAtbiAiJEJPT1RTVFJBUF9WRVJTSU9OX1NPVVJDRSIgXV07IHRoZW4KICAgICAgICBjYXQgPj4gLmVudi5tYWlhc3MgPDwgRU9GCgojIFZlcnNpb24gTWFuYWdlbWVudApNQUlBU1NfVkVSU0lPTl9QUklNQVJZX0ZJTEU9JHtCT09UU1RSQVBfVkVSU0lPTl9TT1VSQ0V9CkVPRgogICAgZmkKICAgIAogICAgIyBBZGQgYnJhbmNoIGNvbmZpZ3VyYXRpb24KICAgIGlmIFtbIC1uICIkQk9PVFNUUkFQX01BSU5fQlJBTkNIIiBdXTsgdGhlbgogICAgICAgIGNhdCA+PiAuZW52Lm1haWFzcyA8PCBFT0YKCiMgQnJhbmNoIFN0cmF0ZWd5Ck1BSUFTU19NQUlOQlJBTkNIPSR7Qk9PVFNUUkFQX01BSU5fQlJBTkNIfQpFT0YKICAgIGZpCiAgICAKICAgIGlmIFtbIC1uICIkQk9PVFNUUkFQX0RFVkVMT1BfQlJBTkNIIiBdXTsgdGhlbgogICAgICAgIGVjaG8gIk1BSUFTU19ERVZFTE9QQlJBTkNIPSR7Qk9PVFNUUkFQX0RFVkVMT1BfQlJBTkNIfSIgPj4gLmVudi5tYWlhc3MKICAgIGZpCiAgICAKICAgICMgQWRkIGZlYXR1cmUgY29uZmlndXJhdGlvbgogICAgY2FzZSAiJEJPT1RTVFJBUF9GRUFUVVJFUyIgaW4KICAgICAgICAiYWlfb25seSIpCiAgICAgICAgICAgIGNhdCA+PiAuZW52Lm1haWFzcyA8PCBFT0YKCiMgRmVhdHVyZXM6IEFJIGNvbW1pdHMgb25seQpNQUlBU1NfTU9ERT1haV9vbmx5CkVPRgogICAgICAgICAgICA7OwogICAgICAgICJ2ZXJzaW9uaW5nX29ubHkiKQogICAgICAgICAgICBjYXQgPj4gLmVudi5tYWlhc3MgPDwgRU9GCgojIEZlYXR1cmVzOiBWZXJzaW9uaW5nIHdpdGhvdXQgY2hhbmdlbG9nCiMgKGNoYW5nZWxvZyBnZW5lcmF0aW9uIGRpc2FibGVkKQpFT0YKICAgICAgICAgICAgOzsKICAgICAgICAqKQogICAgICAgICAgICBjYXQgPj4gLmVudi5tYWlhc3MgPDwgRU9GCgojIEZlYXR1cmVzOiBGdWxsIHdvcmtmbG93IChkZWZhdWx0KQojIEluY2x1ZGVzIHZlcnNpb25pbmcsIGNoYW5nZWxvZywgYW5kIEFJIGNvbW1pdHMKRU9GCiAgICAgICAgICAgIDs7CiAgICBlc2FjCiAgICAKICAgICMgQWRkIGNvbW1vbiBzZXR0aW5ncwogICAgY2F0ID4+IC5lbnYubWFpYXNzIDw8IEVPRgoKIyBBSSBDb25maWd1cmF0aW9uIChvcHRpb25hbCkKIyBNQUlBU1NfQUlfTU9ERT1hc2sKIyBNQUlBU1NfQUlfVE9LRU49eW91cl90b2tlbl9oZXJlCgojIFZlcmJvc2l0eSAoYnJpZWYsIG5vcm1hbCwgZGVidWcpCk1BSUFTU19WRVJCT1NJVFk9YnJpZWYKCiMgRW5hYmxlIGxvZ2dpbmcKTUFJQVNTX0xPR0dJTkc9dHJ1ZQpFT0YKICAgIAogICAgcHJpbnRfc3VjY2VzcyAi4pyTIENvbmZpZ3VyYXRpb24gc2F2ZWQgdG8gLmVudi5tYWlhc3MiCiAgICAKICAgICMgSGFuZGxlIC5naXRpZ25vcmUKICAgIGlmIFtbICIkQk9PVFNUUkFQX0FERF9UT19HSVRJR05PUkUiID09ICJ0cnVlIiBdXTsgdGhlbgogICAgICAgIGFkZF9lbnZfdG9fZ2l0aWdub3JlCiAgICBmaQp9CgphZGRfZW52X3RvX2dpdGlnbm9yZSgpIHsKICAgIGxvY2FsIGdpdGlnbm9yZV9maWxlPSIuZ2l0aWdub3JlIgogICAgCiAgICAjIENoZWNrIGlmIC5lbnYubWFpYXNzIGlzIGFscmVhZHkgaW4gLmdpdGlnbm9yZQogICAgaWYgW1sgLWYgIiRnaXRpZ25vcmVfZmlsZSIgXV0gJiYgZ3JlcCAtcSAiXlwuZW52XC5tYWlhc3MkIiAiJGdpdGlnbm9yZV9maWxlIiAyPi9kZXYvbnVsbDsgdGhlbgogICAgICAgIHByaW50X2luZm8gIuKckyAuZW52Lm1haWFzcyBhbHJlYWR5IGluIC5naXRpZ25vcmUiCiAgICAgICAgcmV0dXJuIDAKICAgIGZpCiAgICAKICAgICMgQWRkIHRvIC5naXRpZ25vcmUKICAgIGlmIFtbICEgLWYgIiRnaXRpZ25vcmVfZmlsZSIgXV07IHRoZW4KICAgICAgICBlY2hvICIjIE1BSUFTUyBlbnZpcm9ubWVudCBmaWxlIiA+ICIkZ2l0aWdub3JlX2ZpbGUiCiAgICAgICAgZWNobyAiLmVudi5tYWlhc3MiID4+ICIkZ2l0aWdub3JlX2ZpbGUiCiAgICAgICAgcHJpbnRfc3VjY2VzcyAi4pyTIENyZWF0ZWQgLmdpdGlnbm9yZSBhbmQgYWRkZWQgLmVudi5tYWlhc3MiCiAgICBlbHNlCiAgICAgICAgZWNobyAiIiA+PiAiJGdpdGlnbm9yZV9maWxlIgogICAgICAgIGVjaG8gIiMgTUFJQVNTIGVudmlyb25tZW50IGZpbGUiID4+ICIkZ2l0aWdub3JlX2ZpbGUiCiAgICAgICAgZWNobyAiLmVudi5tYWlhc3MiID4+ICIkZ2l0aWdub3JlX2ZpbGUiCiAgICAgICAgcHJpbnRfc3VjY2VzcyAi4pyTIEFkZGVkIC5lbnYubWFpYXNzIHRvIC5naXRpZ25vcmUiCiAgICBmaQp9CgpmaSAjIF9fU1JDX19Wb2x1bWVzX2VuaWdtYWRldl9lbmlnbWFkZXZfc3RhdGljX21haWFzc193aG9sZV9iYXNobWFpYXNzX2xpYl9jb3JlX2Jvb3RzdHJhcF9zaAojIC0tLSBFbmQgaW5saW5lZDogL1ZvbHVtZXMvZW5pZ21hZGV2L2VuaWdtYWRldi9zdGF0aWMvbWFpYXNzLXdob2xlL2Jhc2htYWlhc3MvbGliL2NvcmUvYm9vdHN0cmFwLnNoIC0tLQoKIyAtLS0gQmVnaW4gaW5saW5lZDogL1ZvbHVtZXMvZW5pZ21hZGV2L2VuaWdtYWRldi9zdGF0aWMvbWFpYXNzLXdob2xlL2Jhc2htYWlhc3MvbGliL2NvcmUvYWkuc2ggLS0tCmlmIFtbIC16ICIke19fU1JDX19Wb2x1bWVzX2VuaWdtYWRldl9lbmlnbWFkZXZfc3RhdGljX21haWFzc193aG9sZV9iYXNobWFpYXNzX2xpYl9jb3JlX2FpX3NoOi19IiBdXTsgdGhlbiBfX1NSQ19fVm9sdW1lc19lbmlnbWFkZXZfZW5pZ21hZGV2X3N0YXRpY19tYWlhc3Nfd2hvbGVfYmFzaG1haWFzc19saWJfY29yZV9haV9zaD0xCgpmdW5jdGlvbiBnZXRfYWlfY29tbWl0X21lc3NhZ2Vfc3R5bGUoKSB7CgogICMgRGV0ZXJtaW5lIHRoZSBPcGVuQUkgY29tbWl0IG1lc3NhZ2Ugc3R5bGUKICBpZiBbWyAtbiAiJE1BSUFTU19BSV9DT01NSVRfTUVTU0FHRV9TVFlMRSIgXV07IHRoZW4KICAgIGFpX2NvbW1pdF9zdHlsZT0iJE1BSUFTU19BSV9DT01NSVRfTUVTU0FHRV9TVFlMRSIKICAgIHByaW50X2RlYnVnICJVc2luZyBBSSBjb21taXQgc3R5bGU6ICRhaV9jb21taXRfc3R5bGUiID4mMgogIGVsaWYgW1sgLWYgIi5tYWlhc3MucHJvbXB0IiBdXTsgdGhlbgogICAgYWlfY29tbWl0X3N0eWxlPSJjdXN0b20iCiAgICBwcmludF9kZWJ1ZyAiTm8gc3R5bGUgc2V0IGluIC5lbnY7IHVzaW5nIGxvY2FsIHByb21wdCBmaWxlOiAubWFpYXNzLnByb21wdCIgPiYyCiAgZWxpZiBbWyAtZiAiJEhPTUUvLm1haWFzcy5wcm9tcHQiIF1dOyB0aGVuCiAgICBhaV9jb21taXRfc3R5bGU9Imdsb2JhbF9jdXN0b20iCiAgICBwcmludF9kZWJ1ZyAiTm8gc3R5bGUgc2V0IGluIC5lbnYubTsgdXNpbmcgZ2xvYmFsIHByb21wdCBmaWxlOiB+Ly5tYWlhc3MucHJvbXB0IiA+JjIKICBlbHNlCiAgICBhaV9jb21taXRfc3R5bGU9ImJ1bGxldCIKICAgIHByaW50X2RlYnVnICJObyBzdHlsZSBvciBwcm9tcHQgZmlsZXMgZm91bmQ7IGRlZmF1bHRpbmcgdG8gJ2J1bGxldCciID4mMgogIGZpCiAgZXhwb3J0IGFpX2NvbW1pdF9zdHlsZQp9CgojIEZ1bmN0aW9uIHRvIGhhbmRsZSBpbnZhbGlkIEFQSSBrZXkgZXJyb3JzIHdpdGggdXNlciBvcHRpb25zCmZ1bmN0aW9uIGhhbmRsZV9pbnZhbGlkX2FwaV9rZXlfZXJyb3IoKSB7CiAgZWNobyAiIgogIHByaW50X3dhcm5pbmcgIuKdjCBJbnZhbGlkIEFQSSBLZXkiID4mMgogIGVjaG8gIiIKICBwcmludF9pbmZvICJZb3VyIE1BSUFTUyBBSSB0b2tlbiBpcyBpbnZhbGlkIG9yIGhhcyBleHBpcmVkLiIgPiYyCiAgCiAgIyBDaGVjayBpZiB3ZSBzaG91bGQgYXV0b21hdGljYWxseSBjcmVhdGUgYW5vbnltb3VzIHN1YnNjcmlwdGlvbgogIGlmIFtbICIkYWlfaW52YWxpZF90b2tlbl9jaG9pY2VzIiA9PSAiZmFsc2UiIF1dOyB0aGVuCiAgICAjIENoZWNrIGlmIHdlIGFscmVhZHkgdHJpZWQgdG8gY3JlYXRlIGFub255bW91cyBzdWJzY3JpcHRpb24gdGhpcyBzZXNzaW9uCiAgICBpZiBbWyAiJF9NQUlBU1NfQU5PTl9BVFRFTVBURUQiID09ICJ0cnVlIiBdXTsgdGhlbgogICAgICBwcmludF93YXJuaW5nICJBbm9ueW1vdXMgc3Vic2NyaXB0aW9uIGFscmVhZHkgYXR0ZW1wdGVkIHRoaXMgc2Vzc2lvbi4gQ29udGludWluZyB3aXRob3V0IEFJIGFzc2lzdGFuY2UuIiA+JjIKICAgICAgZXhwb3J0IGFpX21vZGU9Im9mZiIKICAgICAgcmV0dXJuIDEKICAgIGZpCiAgICAKICAgIHByaW50X2luZm8gIkF1dG9tYXRpY2FsbHkgY3JlYXRpbmcgYW5vbnltb3VzIHN1YnNjcmlwdGlvbi4uLiIgPiYyCiAgICBleHBvcnQgX01BSUFTU19BTk9OX0FUVEVNUFRFRD0idHJ1ZSIKICAgIAogICAgaWYgY3JlYXRlX2Fub255bW91c19zdWJzY3JpcHRpb247IHRoZW4KICAgICAgcHJpbnRfaW5mbyAiUmV0cnlpbmcgQUkgY29tbWl0IG1lc3NhZ2UgZ2VuZXJhdGlvbi4uLiIgPiYyCiAgICAgIGVjaG8gIiIKICAgICAgIyBSZXR1cm4gc3VjY2VzcyB0byBpbmRpY2F0ZSByZXRyeSBzaG91bGQgaGFwcGVuIGluIGNhbGxpbmcgY29udGV4dAogICAgICByZXR1cm4gMAogICAgZWxzZQogICAgICBwcmludF93YXJuaW5nICJGYWlsZWQgdG8gY3JlYXRlIGFub255bW91cyBzdWJzY3JpcHRpb24uIENvbnRpbnVpbmcgd2l0aG91dCBBSSBhc3Npc3RhbmNlLiIgPiYyCiAgICAgIGV4cG9ydCBhaV9tb2RlPSJvZmYiCiAgICAgIHJldHVybiAxCiAgICBmaQogIGZpCiAgCiAgcHJpbnRfaW5mbyAiWW91IGhhdmUgdGhlIGZvbGxvd2luZyBvcHRpb25zOiIgPiYyCiAgZWNobyAiIgogIHByaW50X2luZm8gIiAgJHtCQ3lhbn0xLiR7Q29sb3JfT2ZmfSBFbnRlciBhIG5ldyBBSSB0b2tlbiIgPiYyCiAgcHJpbnRfaW5mbyAiICAke0JDeWFufTIuJHtDb2xvcl9PZmZ9IENvbnRpbnVlIHdpdGhvdXQgQUkgYW5kIGVudGVyIGNvbW1pdCBtZXNzYWdlIG1hbnVhbGx5ICR7QlllbGxvd31bRGVmYXVsdF0ke0NvbG9yX09mZn0iID4mMiAgCiAgcHJpbnRfaW5mbyAiICAke0JDeWFufTMuJHtDb2xvcl9PZmZ9IEdldCBhIG5ldyBhbm9ueW1vdXMgdG9rZW4gKG5vIGVtYWlsIHJlcXVpcmVkKSIgPiYyCiAgcHJpbnRfaW5mbyAiICAke0JDeWFufTQuJHtDb2xvcl9PZmZ9IEV4aXQgYW5kIGNvbmZpZ3VyZSB0b2tlbiBsYXRlciIgPiYyCiAgZWNobyAiIgogIHByaW50X2luZm8gIvCfkqEgVG8gZ2V0IGEgdG9rZW46IiA+JjIKICBwcmludF9pbmZvICIgICDigKIgRW1haWwgc2lnbnVwOiAke0JCbHVlfWh0dHBzOi8vbWFpYXNzLm5ldC9zaWdudXAke0NvbG9yX09mZn0gKGZyZWUgdHJpYWwpIiA+JjIKICAjcHJpbnRfaW5mbyAiICAg4oCiIEFub255bW91czogT3B0aW9uIDMgYWJvdmUgKG1hY2hpbmUgZmluZ2VycHJpbnQtYmFzZWQpIiA+JjIKICBlY2hvICIiCiAgCiAgIyBPbmx5IHByb21wdCBpZiBpbiBpbnRlcmFjdGl2ZSBtb2RlCiAgaWYgW1sgLXQgMCBdXTsgdGhlbgogICAgcHJpbnRfaW5mbyAiUGxlYXNlIGNob29zZSBhbiBvcHRpb24gKDEtNCkgWzJdOiAiID4mMgogICAgcmVhZCAtciB1c2VyX2Nob2ljZQogICAgCiAgICBjYXNlICIke3VzZXJfY2hvaWNlOi0yfSIgaW4KICAgICAgMSkKICAgICAgICBlY2hvICIiCiAgICAgICAgcHJpbnRfaW5mbyAiUGxlYXNlIGVudGVyIHlvdXIgbmV3IEFJIHRva2VuIChpbnB1dCB3aWxsIGJlIGhpZGRlbik6ICIgPiYyCiAgICAgICAgaWYgcmVhZCAtcyBuZXdfdG9rZW47IHRoZW4KICAgICAgICAgIGlmIFtbIC1uICIkbmV3X3Rva2VuIiAmJiAiJG5ld190b2tlbiIgIT0gIkRJU0FCTEVEIiBdXTsgdGhlbgogICAgICAgICAgICAjIFN0b3JlIHRoZSBuZXcgdG9rZW4gc2VjdXJlbHkKICAgICAgICAgICAgaWYgW1sgIiRPU1RZUEUiID09ICJkYXJ3aW4iKiBdXTsgdGhlbgogICAgICAgICAgICAgIHNlY3VyaXR5IGFkZC1nZW5lcmljLXBhc3N3b3JkIC1hICJNQUlBU1NfQUlfVE9LRU4iIC1zICJtYWlhc3MiIC13ICIkbmV3X3Rva2VuIiAtVSAyPi9kZXYvbnVsbAogICAgICAgICAgICBlbGlmIGNvbW1hbmQgLXYgc2VjcmV0LXRvb2wgPi9kZXYvbnVsbCAyPiYxOyB0aGVuCiAgICAgICAgICAgICAgZWNobyAtbiAiJG5ld190b2tlbiIgfCBzZWNyZXQtdG9vbCBzdG9yZSAtLWxhYmVsPSJNQUlBU1MgQUkgVG9rZW4iIHNlcnZpY2UgbWFpYXNzIGtleSAiTUFJQVNTX0FJX1RPS0VOIgogICAgICAgICAgICBmaQogICAgICAgICAgICAKICAgICAgICAgICAgZXhwb3J0IE1BSUFTU19BSV9UT0tFTj0iJG5ld190b2tlbiIKICAgICAgICAgICAgZXhwb3J0IGFpX3Rva2VuPSIkbmV3X3Rva2VuIgogICAgICAgICAgICBwcmludF9zdWNjZXNzICLinIUgTmV3IEFJIHRva2VuIHN0b3JlZCBzdWNjZXNzZnVsbHkuIiA+JjIKICAgICAgICAgICAgcHJpbnRfaW5mbyAiUmV0cnlpbmcgQUkgY29tbWl0IG1lc3NhZ2UgZ2VuZXJhdGlvbi4uLiIgPiYyCiAgICAgICAgICAgIGVjaG8gIiIKICAgICAgICAgICAgCiAgICAgICAgICAgICMgUmV0dXJuIHN1Y2Nlc3MgdG8gaW5kaWNhdGUgcmV0cnkgc2hvdWxkIGhhcHBlbiBpbiBjYWxsaW5nIGNvbnRleHQKICAgICAgICAgICAgcmV0dXJuIDAKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgcHJpbnRfd2FybmluZyAiTm8gdmFsaWQgdG9rZW4gcHJvdmlkZWQuIENvbnRpbnVpbmcgd2l0aG91dCBBSSBhc3Npc3RhbmNlLiIgPiYyCiAgICAgICAgICBmaQogICAgICAgIGVsc2UKICAgICAgICAgIHByaW50X3dhcm5pbmcgIkZhaWxlZCB0byByZWFkIHRva2VuLiBDb250aW51aW5nIHdpdGhvdXQgQUkgYXNzaXN0YW5jZS4iID4mMgogICAgICAgIGZpCiAgICAgICAgOzsKICAgICAgMikKICAgICAgICBwcmludF9pbmZvICJDb250aW51aW5nIHdpdGhvdXQgQUkgYXNzaXN0YW5jZS4gWW91J2xsIGJlIHByb21wdGVkIHRvIGVudGVyIHlvdXIgY29tbWl0IG1lc3NhZ2UgbWFudWFsbHkuIiA+JjIKICAgICAgICA7OwogICAgICAzKQogICAgICAgIGVjaG8gIiIKICAgICAgICBwcmludF9pbmZvICJDcmVhdGluZyBhbm9ueW1vdXMgc3Vic2NyaXB0aW9uLi4uIiA+JjIKICAgICAgICBpZiBjcmVhdGVfYW5vbnltb3VzX3N1YnNjcmlwdGlvbjsgdGhlbgogICAgICAgICAgcHJpbnRfaW5mbyAiUmV0cnlpbmcgQUkgY29tbWl0IG1lc3NhZ2UgZ2VuZXJhdGlvbi4uLiIgPiYyCiAgICAgICAgICBlY2hvICIiCiAgICAgICAgICAjIFJldHVybiBzdWNjZXNzIHRvIGluZGljYXRlIHJldHJ5IHNob3VsZCBoYXBwZW4gaW4gY2FsbGluZyBjb250ZXh0CiAgICAgICAgICByZXR1cm4gMAogICAgICAgIGVsc2UKICAgICAgICAgIHByaW50X3dhcm5pbmcgIkZhaWxlZCB0byBjcmVhdGUgYW5vbnltb3VzIHN1YnNjcmlwdGlvbi4gQ29udGludWluZyB3aXRob3V0IEFJIGFzc2lzdGFuY2UuIiA+JjIKICAgICAgICBmaQogICAgICAgIDs7CiAgICAgIDQpCiAgICAgICAgcHJpbnRfaW5mbyAiRXhpdGluZy4gQ29uZmlndXJlIHlvdXIgQUkgdG9rZW4gd2l0aDogZXhwb3J0IE1BSUFTU19BSV9UT0tFTj1cInlvdXJfdG9rZW5faGVyZVwiIiA+JjIKICAgICAgICBleGl0IDEKICAgICAgICA7OwogICAgICAqKQogICAgICAgIHByaW50X3dhcm5pbmcgIkludmFsaWQgb3B0aW9uLiBDb250aW51aW5nIHdpdGhvdXQgQUkgYXNzaXN0YW5jZS4iID4mMgogICAgICAgIDs7CiAgICBlc2FjCiAgZWxzZQogICAgcHJpbnRfaW5mbyAiTm9uLWludGVyYWN0aXZlIG1vZGUgZGV0ZWN0ZWQuIENvbnRpbnVpbmcgd2l0aG91dCBBSSBhc3Npc3RhbmNlLiIgPiYyCiAgZmkKICAKICAjIFNldCBBSSBtb2RlIHRvIG9mZiBmb3IgdGhpcyBzZXNzaW9uIHRvIGF2b2lkIHJlcGVhdGVkIHByb21wdHMKICBleHBvcnQgYWlfbW9kZT0ib2ZmIgp9CgojIEZ1bmN0aW9uIHRvIGNyZWF0ZSBhbiBhbm9ueW1vdXMgc3Vic2NyaXB0aW9uIHVzaW5nIG1hY2hpbmUgZmluZ2VycHJpbnQKZnVuY3Rpb24gY3JlYXRlX2Fub255bW91c19zdWJzY3JpcHRpb24oKSB7CiAgbG9jYWwgbWFjaGluZV9maW5nZXJwcmludAogIGxvY2FsIGFwaV9yZXNwb25zZQogIGxvY2FsIG5ld19hcGlfa2V5CiAgbG9jYWwgY3JlZGl0cwogIGxvY2FsIHRvcF91cF91cmwKICAKICBwcmludF9kZWJ1ZyAiREVCVUc6ID09PT09PT09PT0gQU5PTllNT1VTIFNVQlNDUklQVElPTiBTVEFSVCA9PT09PT09PT09IiA+JjIKICBwcmludF9pbmZvICJHZW5lcmF0aW5nIG1hY2hpbmUgZmluZ2VycHJpbnQuLi4iID4mMgogIAogICMgR2VuZXJhdGUgbWFjaGluZSBmaW5nZXJwcmludCAodXNlIGV4aXN0aW5nIGZ1bmN0aW9uIGZyb20gdXRpbHMuc2gpCiAgaWYgY29tbWFuZCAtdiBnZW5lcmF0ZV9tYWNoaW5lX2ZpbmdlcnByaW50ID4vZGV2L251bGwgMj4mMTsgdGhlbgogICAgcHJpbnRfZGVidWcgIkRFQlVHOiBVc2luZyBnZW5lcmF0ZV9tYWNoaW5lX2ZpbmdlcnByaW50IGZ1bmN0aW9uIiA+JjIKICAgIG1hY2hpbmVfZmluZ2VycHJpbnQ9JChnZW5lcmF0ZV9tYWNoaW5lX2ZpbmdlcnByaW50KQogIGVsc2UKICAgIHByaW50X2RlYnVnICJERUJVRzogVXNpbmcgZmFsbGJhY2sgbWFjaGluZSBmaW5nZXJwcmludCBnZW5lcmF0aW9uIiA+JjIKICAgICMgRmFsbGJhY2sgZmluZ2VycHJpbnQgZ2VuZXJhdGlvbgogICAgbWFjaGluZV9maW5nZXJwcmludD0kKGVjaG8gLW4gIiQodW5hbWUgLWEpLSQod2hvYW1pKS0kKGRhdGUgKyVZJW0pIiB8IHNoYXN1bSAtYSAyNTYgfCBjdXQgLWQnICcgLWYxKQogICAgcHJpbnRfZGVidWcgIkRFQlVHOiBVc2luZyBmYWxsYmFjayBtYWNoaW5lIGZpbmdlcnByaW50OiAke21hY2hpbmVfZmluZ2VycHJpbnQ6MDoxMH0uLi4iID4mMgogIGZpCiAgCiAgaWYgW1sgLXogIiRtYWNoaW5lX2ZpbmdlcnByaW50IiBdXTsgdGhlbgogICAgcHJpbnRfd2FybmluZyAiRmFpbGVkIHRvIGdlbmVyYXRlIG1hY2hpbmUgZmluZ2VycHJpbnQuIiA+JjIKICAgIHJldHVybiAxCiAgZmkKICAKICBwcmludF9kZWJ1ZyAiREVCVUc6IE1hY2hpbmUgZmluZ2VycHJpbnQ6ICR7bWFjaGluZV9maW5nZXJwcmludDowOjEwfS4uLiIgPiYyCiAgCiAgIyBDcmVhdGUgSlNPTiBwYXlsb2FkIGZvciBhbm9ueW1vdXMgc3Vic2NyaXB0aW9uCiAgbG9jYWwganNvbl9wYXlsb2FkCiAgaWYgY29tbWFuZCAtdiBqcSA+L2Rldi9udWxsIDI+JjE7IHRoZW4KICAgIHByaW50X2RlYnVnICJERUJVRzogQ3JlYXRpbmcgSlNPTiBwYXlsb2FkIHdpdGgganEiID4mMgogICAganNvbl9wYXlsb2FkPSQoanEgLW4gLS1hcmcgZmluZ2VycHJpbnQgIiRtYWNoaW5lX2ZpbmdlcnByaW50IiAnewogICAgICAibWFjaGluZV9maW5nZXJwcmludCI6ICRmaW5nZXJwcmludAogICAgfScpCiAgZWxzZQogICAgcHJpbnRfZGVidWcgIkRFQlVHOiBDcmVhdGluZyBKU09OIHBheWxvYWQgbWFudWFsbHkiID4mMgogICAganNvbl9wYXlsb2FkPSJ7XCJtYWNoaW5lX2ZpbmdlcnByaW50XCI6XCIkbWFjaGluZV9maW5nZXJwcmludFwifSIKICBmaQogIAogIHByaW50X2RlYnVnICJERUJVRzogSlNPTiBwYXlsb2FkOiAkanNvbl9wYXlsb2FkIiA+JjIKICBwcmludF9pbmZvICJSZXF1ZXN0aW5nIGFub255bW91cyBzdWJzY3JpcHRpb24uLi4iID4mMgogIAogICMgQ2FsbCB0aGUgYW5vbnltb3VzIHN1YnNjcmlwdGlvbiBlbmRwb2ludAogIHByaW50X2RlYnVnICJERUJVRzogQ2FsbGluZyAke21haWFzc190b2tlbnJlcXVlc3R9IiA+JjIKICBhcGlfcmVzcG9uc2U9JChjdXJsIC1zIC1YIFBPU1QgIiR7bWFpYXNzX3Rva2VucmVxdWVzdH0iIFwKICAgIC1IICJDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2pzb24iIFwKICAgIC1IICJYLUNsaWVudC1OYW1lOiAke2NsaWVudF9uYW1lOi1iYXNobWFpYXNzfSIgXAogICAgLUggIlgtQ2xpZW50LVZlcnNpb246ICR7Y2xpZW50X3ZlcnNpb246LTAuMC4wfSIgXAogICAgLWQgIiRqc29uX3BheWxvYWQiIDI+L2Rldi9udWxsKQogIAogIHByaW50X2RlYnVnICJERUJVRzogQW5vbnltb3VzIHN1YnNjcmlwdGlvbiByZXNwb25zZTogJGFwaV9yZXNwb25zZSIgPiYyCiAgCiAgaWYgW1sgLW4gIiRhcGlfcmVzcG9uc2UiIF1dOyB0aGVuCiAgICAjIENoZWNrIGZvciBlcnJvcnMKICAgIGlmIGVjaG8gIiRhcGlfcmVzcG9uc2UiIHwgZ3JlcCAtcSAnImVycm9yIic7IHRoZW4KICAgICAgbG9jYWwgZXJyb3JfbXNnCiAgICAgIGVycm9yX21zZz0kKGVjaG8gIiRhcGlfcmVzcG9uc2UiIHwgZ3JlcCAtbyAnImVycm9yIjoiW14iXSoiJyB8IHNlZCAncy8iZXJyb3IiOiIvLycgfCBzZWQgJ3MvIiQvLycgfCBoZWFkIC0xKQogICAgICBwcmludF93YXJuaW5nICJGYWlsZWQgdG8gY3JlYXRlIGFub255bW91cyBzdWJzY3JpcHRpb246ICRlcnJvcl9tc2ciID4mMgogICAgICByZXR1cm4gMQogICAgZmkKICAgIAogICAgIyBFeHRyYWN0IHRoZSBBUEkga2V5IGFuZCBvdGhlciBkZXRhaWxzCiAgICBpZiBjb21tYW5kIC12IGpxID4vZGV2L251bGwgMj4mMTsgdGhlbgogICAgICBuZXdfYXBpX2tleT0kKGVjaG8gIiRhcGlfcmVzcG9uc2UiIHwganEgLXIgJy5hcGlLZXkgLy8gLmFwaV9rZXkgLy8gLnRva2VuIC8vIGVtcHR5JyAyPi9kZXYvbnVsbCkKICAgICAgbG9jYWwgc3Vic2NyaXB0aW9uX2lkPSQoZWNobyAiJGFwaV9yZXNwb25zZSIgfCBqcSAtciAnLmlkIC8vIC5zdWJzY3JpcHRpb25faWQgLy8gZW1wdHknIDI+L2Rldi9udWxsKQogICAgICBjcmVkaXRzPSQoZWNobyAiJGFwaV9yZXNwb25zZSIgfCBqcSAtciAnLmNyZWRpdHNSZW1haW5pbmcgLy8gLmNyZWRpdHNfcmVtYWluaW5nIC8vIC5jcmVkaXRzIC8vIGVtcHR5JyAyPi9kZXYvbnVsbCkKICAgICAgdG9wX3VwX3VybD0kKGVjaG8gIiRhcGlfcmVzcG9uc2UiIHwganEgLXIgJy5wdXJjaGFzZVVybCAvLyAucGF5bWVudF91cmwgLy8gLnRvcF91cF91cmwgLy8gZW1wdHknIDI+L2Rldi9udWxsKQogICAgZWxzZQogICAgICBuZXdfYXBpX2tleT0kKGVjaG8gIiRhcGlfcmVzcG9uc2UiIHwgZ3JlcCAtbyAnInRva2VuIjoiW14iXSoiJyB8IHNlZCAncy8idG9rZW4iOiIvLycgfCBzZWQgJ3MvIiQvLycgfCBoZWFkIC0xKQogICAgICBpZiBbWyAteiAiJG5ld19hcGlfa2V5IiBdXTsgdGhlbgogICAgICAgIG5ld19hcGlfa2V5PSQoZWNobyAiJGFwaV9yZXNwb25zZSIgfCBncmVwIC1vICciYXBpX2tleSI6IlteIl0qIicgfCBzZWQgJ3MvImFwaV9rZXkiOiIvLycgfCBzZWQgJ3MvIiQvLycgfCBoZWFkIC0xKQogICAgICBmaQogICAgICBsb2NhbCBzdWJzY3JpcHRpb25faWQ9JChlY2hvICIkYXBpX3Jlc3BvbnNlIiB8IGdyZXAgLW8gJyJzdWJzY3JpcHRpb25faWQiOiJbXiJdKiInIHwgc2VkICdzLyJzdWJzY3JpcHRpb25faWQiOiIvLycgfCBzZWQgJ3MvIiQvLycgfCBoZWFkIC0xKQogICAgICBjcmVkaXRzPSQoZWNobyAiJGFwaV9yZXNwb25zZSIgfCBncmVwIC1vICciY3JlZGl0c19yZW1haW5pbmciOlswLTldKicgfCBzZWQgJ3MvImNyZWRpdHNfcmVtYWluaW5nIjovLycgfCBoZWFkIC0xKQogICAgICBpZiBbWyAteiAiJGNyZWRpdHMiIF1dOyB0aGVuCiAgICAgICAgY3JlZGl0cz0kKGVjaG8gIiRhcGlfcmVzcG9uc2UiIHwgZ3JlcCAtbyAnImNyZWRpdHMiOlswLTldKicgfCBzZWQgJ3MvImNyZWRpdHMiOi8vJyB8IGhlYWQgLTEpCiAgICAgIGZpCiAgICAgIHRvcF91cF91cmw9JChlY2hvICIkYXBpX3Jlc3BvbnNlIiB8IGdyZXAgLW8gJyJwYXltZW50X3VybCI6IlteIl0qIicgfCBzZWQgJ3MvInBheW1lbnRfdXJsIjoiLy8nIHwgc2VkICdzLyIkLy8nIHwgaGVhZCAtMSkKICAgICAgaWYgW1sgLXogIiR0b3BfdXBfdXJsIiBdXTsgdGhlbgogICAgICAgIHRvcF91cF91cmw9JChlY2hvICIkYXBpX3Jlc3BvbnNlIiB8IGdyZXAgLW8gJyJ0b3BfdXBfdXJsIjoiW14iXSoiJyB8IHNlZCAncy8idG9wX3VwX3VybCI6Ii8vJyB8IHNlZCAncy8iJC8vJyB8IGhlYWQgLTEpCiAgICAgIGZpCiAgICBmaQogICAgCiAgICBpZiBbWyAtbiAiJG5ld19hcGlfa2V5IiAmJiAiJG5ld19hcGlfa2V5IiAhPSAibnVsbCIgXV07IHRoZW4KICAgICAgcHJpbnRfc3VjY2VzcyAi4pyFIEFub255bW91cyBzdWJzY3JpcHRpb24gY3JlYXRlZCBzdWNjZXNzZnVsbHkhIiA+JjIKICAgICAgcHJpbnRfaW5mbyAiICAgQVBJIEtleTogJChtYXNrX2FwaV9rZXkgIiRuZXdfYXBpX2tleSIpIiA+JjIKICAgICAgcHJpbnRfaW5mbyAiICAgQ3JlZGl0czogJHtjcmVkaXRzOi1OL0F9IiA+JjIKICAgICAgCiAgICAgIGlmIFtbIC1uICIkc3Vic2NyaXB0aW9uX2lkIiAmJiAiJHN1YnNjcmlwdGlvbl9pZCIgIT0gIm51bGwiIF1dOyB0aGVuCiAgICAgICAgcHJpbnRfaW5mbyAiICAgU3Vic2NyaXB0aW9uIElEOiAke3N1YnNjcmlwdGlvbl9pZDowOjEyfS4uLiIgPiYyCiAgICAgIGZpCiAgICAgIAogICAgICBpZiBbWyAteiAiJGNyZWRpdHMiIHx8ICIkY3JlZGl0cyIgPT0gIjAiIF1dOyB0aGVuCiAgICAgICAgcHJpbnRfd2FybmluZyAi4pqg77iPICBZb3VyIGFub255bW91cyBBUEkga2V5IGhhcyB6ZXJvIGNyZWRpdHMuIFBsZWFzZSBwdXJjaGFzZSBjcmVkaXRzIHRvIHVzZSBBSSBmZWF0dXJlcy4iID4mMgogICAgICAgIGlmIFtbIC1uICIkdG9wX3VwX3VybCIgJiYgIiR0b3BfdXBfdXJsIiAhPSAibnVsbCIgXV07IHRoZW4KICAgICAgICAgIHByaW50X2luZm8gIiAgIFB1cmNoYXNlIGNyZWRpdHMgaGVyZTogJHRvcF91cF91cmwiID4mMgogICAgICAgIGZpCiAgICAgIGZpCiAgICAgIAogICAgICAjIFN0b3JlIHRoZSB0b2tlbiwgc3Vic2NyaXB0aW9uIElELCBhbmQgdG9wLXVwIFVSTCBzZWN1cmVseQogICAgICBpZiBbWyAiJE9TVFlQRSIgPT0gImRhcndpbiIqIF1dOyB0aGVuCiAgICAgICAgc2VjdXJpdHkgYWRkLWdlbmVyaWMtcGFzc3dvcmQgLWEgIk1BSUFTU19BSV9UT0tFTiIgLXMgIm1haWFzcyIgLXcgIiRuZXdfYXBpX2tleSIgLVUgMj4vZGV2L251bGwKICAgICAgICBpZiBbWyAtbiAiJHN1YnNjcmlwdGlvbl9pZCIgJiYgIiRzdWJzY3JpcHRpb25faWQiICE9ICJudWxsIiBdXTsgdGhlbgogICAgICAgICAgc2VjdXJpdHkgYWRkLWdlbmVyaWMtcGFzc3dvcmQgLWEgIk1BSUFTU19TVUJTQ1JJUFRJT05fSUQiIC1zICJtYWlhc3MiIC13ICIkc3Vic2NyaXB0aW9uX2lkIiAtVSAyPi9kZXYvbnVsbAogICAgICAgIGZpCiAgICAgIGVsaWYgY29tbWFuZCAtdiBzZWNyZXQtdG9vbCA+L2Rldi9udWxsIDI+JjE7IHRoZW4KICAgICAgICBlY2hvIC1uICIkbmV3X2FwaV9rZXkiIHwgc2VjcmV0LXRvb2wgc3RvcmUgLS1sYWJlbD0iTUFJQVNTIEFJIFRva2VuIiBzZXJ2aWNlIG1haWFzcyBrZXkgIk1BSUFTU19BSV9UT0tFTiIKICAgICAgICBpZiBbWyAtbiAiJHN1YnNjcmlwdGlvbl9pZCIgJiYgIiRzdWJzY3JpcHRpb25faWQiICE9ICJudWxsIiBdXTsgdGhlbgogICAgICAgICAgZWNobyAtbiAiJHN1YnNjcmlwdGlvbl9pZCIgfCBzZWNyZXQtdG9vbCBzdG9yZSAtLWxhYmVsPSJNQUlBU1MgU3Vic2NyaXB0aW9uIElEIiBzZXJ2aWNlIG1haWFzcyBrZXkgIk1BSUFTU19TVUJTQ1JJUFRJT05fSUQiCiAgICAgICAgZmkKICAgICAgZmkKICAgICAgCiAgICAgIGV4cG9ydCBNQUlBU1NfQUlfVE9LRU49IiRuZXdfYXBpX2tleSIKICAgICAgZXhwb3J0IGFpX3Rva2VuPSIkbmV3X2FwaV9rZXkiCiAgICAgIGlmIFtbIC1uICIkc3Vic2NyaXB0aW9uX2lkIiAmJiAiJHN1YnNjcmlwdGlvbl9pZCIgIT0gIm51bGwiIF1dOyB0aGVuCiAgICAgICAgZXhwb3J0IE1BSUFTU19TVUJTQ1JJUFRJT05fSUQ9IiRzdWJzY3JpcHRpb25faWQiCiAgICAgIGZpCiAgICAgIAogICAgICBlY2hvICIiCiAgICAgIHJldHVybiAwCiAgICBlbHNlCiAgICAgIHByaW50X3dhcm5pbmcgIkZhaWxlZCB0byBleHRyYWN0IEFQSSBrZXkgZnJvbSByZXNwb25zZS4iID4mMgogICAgICByZXR1cm4gMQogICAgZmkKICBlbHNlCiAgICBwcmludF93YXJuaW5nICJObyByZXNwb25zZSBmcm9tIGFub255bW91cyBzdWJzY3JpcHRpb24gc2VydmljZS4iID4mMgogICAgcmV0dXJuIDEKICBmaQp9CgojIEZ1bmN0aW9uIHRvIGhhbmRsZSBxdW90YSBleGNlZWRlZCBlcnJvcnMKZnVuY3Rpb24gaGFuZGxlX3F1b3RhX2V4Y2VlZGVkX2Vycm9yKCkgewogIGxvY2FsIGVycm9yX21zZz0iJDEiCiAgbG9jYWwgcGF5bWVudF91cmw9IiQyIgogIGxvY2FsIGNyZWRpdHNfcmVtYWluaW5nPSIkMyIKICAKICBlY2hvICIiCiAgcHJpbnRfd2FybmluZyAi8J+SsyBRdW90YSBFeGNlZWRlZCIgPiYyCiAgZWNobyAiIgogIHByaW50X2luZm8gIiR7UmVkfVlvdXIgQUkgdG9rZW4gcXVvdGEgaGFzIGJlZW4gZXhjZWVkZWQuJHtDb2xvcl9SZXNldH0iID4mMgogIGlmIFtbIC1uICIkZXJyb3JfbXNnIiBdXTsgdGhlbgogICAgcHJpbnRfZGVidWcgIkRldGFpbHM6ICRlcnJvcl9tc2ciID4mMgogIGZpCiAgaWYgW1sgLW4gIiRjcmVkaXRzX3JlbWFpbmluZyIgJiYgIiRjcmVkaXRzX3JlbWFpbmluZyIgIT0gIm51bGwiIF1dOyB0aGVuCiAgICBwcmludF9pbmZvICIkKHByaW50X2NyZWRpdF9jb2xvciAiJGNyZWRpdHNfcmVtYWluaW5nIiAiQ3JlZGl0cyByZW1haW5pbmc6ICRjcmVkaXRzX3JlbWFpbmluZyIpIiA+JjIKICBmaQogIHByaW50X2luZm8gIvCfkqEgVG8gbWFuYWdlIHlvdXIgcXVvdGE6IiA+JjIKICAKICAjIFVzZSBwYXltZW50IFVSTCBmcm9tIHByb3h5IHJlc3BvbnNlIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIHVzZSBzdG9yZWQgc3Vic2NyaXB0aW9uIElEIG9yIGZhbGxiYWNrCiAgaWYgW1sgLW4gIiRwYXltZW50X3VybCIgJiYgIiRwYXltZW50X3VybCIgIT0gIm51bGwiIF1dOyB0aGVuCiAgICBwcmludF9pbmZvICJBZGQgY3JlZGl0czogJHtCQmx1ZX0kcGF5bWVudF91cmwke0NvbG9yX09mZn0iID4mMgogIGVsaWYgW1sgLW4gIiRNQUlBU1NfU1VCU0NSSVBUSU9OX0lEIiBdXTsgdGhlbgogICAgcHJpbnRfaW5mbyAiQWRkIGNyZWRpdHM6ICR7QkJsdWV9aHR0cHM6Ly9tYWlhc3MubmV0L3RvcC11cC8kTUFJQVNTX1NVQlNDUklQVElPTl9JRCR7Q29sb3JfT2ZmfSIgPiYyCiAgZWxzZQogICAgcHJpbnRfaW5mbyAiVmlzaXQ6ICR7QkJsdWV9aHR0cHM6Ly9tYWlhc3MubmV0LyR7Q29sb3JfT2ZmfSBmb3Igc3Vic2NyaXB0aW9uIG9wdGlvbnMiID4mMgogIGZpCgogIHByaW50X2luZm8gIiR7QlllbGxvd31Zb3UgaGF2ZSB0aGUgZm9sbG93aW5nIG9wdGlvbnMgKDEtMyk6IiA+JjIKICBlY2hvICIiCiAgcHJpbnRfaW5mbyAiICAke0JDeWFufTEuJHtDb2xvcl9PZmZ9IENvbnRpbnVlIHdpdGhvdXQgQUkgYW5kIGVudGVyIGNvbW1pdCBtZXNzYWdlIG1hbnVhbGx5ICR7QlllbGxvd31bRGVmYXVsdF0ke0NvbG9yX09mZn0iID4mMgogIHByaW50X2luZm8gIiAgJHtCQ3lhbn0yLiR7Q29sb3JfT2ZmfSBFbnRlciBhIGRpZmZlcmVudCBBSSB0b2tlbiIgPiYyCiAgcHJpbnRfaW5mbyAiICAke0JDeWFufTMuJHtDb2xvcl9PZmZ9IEV4aXQgYW5kIG1hbmFnZSB5b3VyIHN1YnNjcmlwdGlvbiIgPiYyCiAgZWNobyAiIgoKICAjIE9ubHkgcHJvbXB0IGlmIGluIGludGVyYWN0aXZlIG1vZGUKICBpZiBbWyAtdCAwIF1dOyB0aGVuCiAgICByZWFkIC1yIHVzZXJfY2hvaWNlCiAgICAKICAgIGNhc2UgIiR7dXNlcl9jaG9pY2U6LTF9IiBpbgogICAgICAxKQogICAgICAgIHByaW50X2luZm8gIkNvbnRpbnVpbmcgd2l0aG91dCBBSSBhc3Npc3RhbmNlLiBZb3UnbGwgYmUgcHJvbXB0ZWQgdG8gZW50ZXIgeW91ciBjb21taXQgbWVzc2FnZSBtYW51YWxseS4iID4mMgogICAgICAgIGV4aXQgMQogICAgICAgIDs7CiAgICAgICMgMikKICAgICAgIyAgIGVjaG8gIiIKICAgICAgIyAgIHByaW50X2luZm8gIkNyZWF0aW5nIG5ldyBhbm9ueW1vdXMgc3Vic2NyaXB0aW9uLi4uIiA+JjIKICAgICAgIyAgIGlmIGNyZWF0ZV9hbm9ueW1vdXNfc3Vic2NyaXB0aW9uOyB0aGVuCiAgICAgICMgICAgIHByaW50X2luZm8gIlJldHJ5aW5nIEFJIGNvbW1pdCBtZXNzYWdlIGdlbmVyYXRpb24uLi4iID4mMgogICAgICAjICAgICBlY2hvICIiCiAgICAgICMgICAgICMgUmV0dXJuIHN1Y2Nlc3MgdG8gaW5kaWNhdGUgcmV0cnkgc2hvdWxkIGhhcHBlbiBpbiBjYWxsaW5nIGNvbnRleHQKICAgICAgIyAgICAgcmV0dXJuIDAKICAgICAgIyAgIGVsc2UKICAgICAgIyAgICAgcHJpbnRfd2FybmluZyAiRmFpbGVkIHRvIGNyZWF0ZSBhbm9ueW1vdXMgc3Vic2NyaXB0aW9uLiBDb250aW51aW5nIHdpdGhvdXQgQUkgYXNzaXN0YW5jZS4iID4mMgogICAgICAjICAgZmkKICAgICAgIyAgIDs7CiAgICAgIDIpCiAgICAgICAgZWNobyAiIgogICAgICAgIHByaW50X2luZm8gIlBsZWFzZSBlbnRlciB5b3VyIG5ldyBBSSB0b2tlbiAoaW5wdXQgd2lsbCBiZSBoaWRkZW4pOiAiID4mMgogICAgICAgIGlmIHJlYWQgLXMgbmV3X3Rva2VuOyB0aGVuCiAgICAgICAgICBpZiBbWyAtbiAiJG5ld190b2tlbiIgJiYgIiRuZXdfdG9rZW4iICE9ICJESVNBQkxFRCIgXV07IHRoZW4KICAgICAgICAgICAgIyBTdG9yZSB0aGUgbmV3IHRva2VuIHNlY3VyZWx5CiAgICAgICAgICAgIGlmIFtbICIkT1NUWVBFIiA9PSAiZGFyd2luIiogXV07IHRoZW4KICAgICAgICAgICAgICBzZWN1cml0eSBhZGQtZ2VuZXJpYy1wYXNzd29yZCAtYSAiTUFJQVNTX0FJX1RPS0VOIiAtcyAibWFpYXNzIiAtdyAiJG5ld190b2tlbiIgLVUgMj4vZGV2L251bGwKICAgICAgICAgICAgZWxpZiBjb21tYW5kIC12IHNlY3JldC10b29sID4vZGV2L251bGwgMj4mMTsgdGhlbgogICAgICAgICAgICAgIGVjaG8gLW4gIiRuZXdfdG9rZW4iIHwgc2VjcmV0LXRvb2wgc3RvcmUgLS1sYWJlbD0iTUFJQVNTIEFJIFRva2VuIiBzZXJ2aWNlIG1haWFzcyBrZXkgIk1BSUFTU19BSV9UT0tFTiIKICAgICAgICAgICAgZmkKICAgICAgICAgICAgCiAgICAgICAgICAgIGV4cG9ydCBNQUlBU1NfQUlfVE9LRU49IiRuZXdfdG9rZW4iCiAgICAgICAgICAgIGV4cG9ydCBhaV90b2tlbj0iJG5ld190b2tlbiIKICAgICAgICAgICAgcHJpbnRfc3VjY2VzcyAi4pyFIE5ldyBBSSB0b2tlbiBzdG9yZWQgc3VjY2Vzc2Z1bGx5LiIgPiYyCiAgICAgICAgICAgIHByaW50X2luZm8gIlJldHJ5aW5nIEFJIGNvbW1pdCBtZXNzYWdlIGdlbmVyYXRpb24uLi4iID4mMgogICAgICAgICAgICBlY2hvICIiCiAgICAgICAgICAgIAogICAgICAgICAgICAjIFJldHVybiBzdWNjZXNzIHRvIGluZGljYXRlIHJldHJ5IHNob3VsZCBoYXBwZW4gaW4gY2FsbGluZyBjb250ZXh0CiAgICAgICAgICAgIHJldHVybiAwCiAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHByaW50X3dhcm5pbmcgIk5vIHZhbGlkIHRva2VuIHByb3ZpZGVkLiBDb250aW51aW5nIHdpdGhvdXQgQUkgYXNzaXN0YW5jZS4iID4mMgogICAgICAgICAgZmkKICAgICAgICBlbHNlCiAgICAgICAgICBwcmludF93YXJuaW5nICJGYWlsZWQgdG8gcmVhZCB0b2tlbi4gQ29udGludWluZyB3aXRob3V0IEFJIGFzc2lzdGFuY2UuIiA+JjIKICAgICAgICBmaQogICAgICAgIDs7CiAgICAgIDMpCiAgICAgICAgcHJpbnRfaW5mbyAiRXhpdGluZy4gVmlzaXQgaHR0cHM6Ly9tYWlhc3MubmV0IHRvIG1hbmFnZSB5b3VyIHN1YnNjcmlwdGlvbi4iID4mMgogICAgICAgIGtpbGwgLVRFUk0gJCQKICAgICAgICA7OwogICAgICAqKQogICAgICAgIHByaW50X3dhcm5pbmcgIkludmFsaWQgb3B0aW9uLiBDb250aW51aW5nIHdpdGhvdXQgQUkgYXNzaXN0YW5jZS4iID4mMgogICAgICAgIDs7CiAgICBlc2FjCiAgZWxzZQogICAgcHJpbnRfaW5mbyAiTm9uLWludGVyYWN0aXZlIG1vZGUgZGV0ZWN0ZWQuIENvbnRpbnVpbmcgd2l0aG91dCBBSSBhc3Npc3RhbmNlLiIgPiYyCiAgZmkKICAKICAjIFNldCBBSSBtb2RlIHRvIG9mZiBmb3IgdGhpcyBzZXNzaW9uIHRvIGF2b2lkIHJlcGVhdGVkIHByb21wdHMKICBleHBvcnQgYWlfbW9kZT0ib2ZmIgp9CgojIEZ1bmN0aW9uIHRvIGdldCBBSS1nZW5lcmF0ZWQgY29tbWl0IG1lc3NhZ2Ugc3VnZ2VzdGlvbgpmdW5jdGlvbiBnZXRfYWlfY29tbWl0X3N1Z2dlc3Rpb24oKSB7CiAgbG9jYWwgZ2l0X2RpZmYKICBsb2NhbCBhaV9wcm9tcHQKICBsb2NhbCBhcGlfcmVzcG9uc2UKICBsb2NhbCBzdWdnZXN0ZWRfbWVzc2FnZQogIGxvY2FsIHJldHJ5X2NvdW50PTAKICBsb2NhbCBtYXhfcmV0cmllcz0yCgogICMgQ2hlY2sgaWYgd2UgbmVlZCB0byBjcmVhdGUgYW4gYW5vbnltb3VzIHRva2VuIChzZXQgYnkgZW52YXJzLnNoKQogIGlmIFtbICIkX01BSUFTU19ORUVEX0FOT05fVE9LRU4iID09ICJ0cnVlIiBdXTsgdGhlbgogICAgcHJpbnRfZGVidWcgIkRFQlVHOiBBbm9ueW1vdXMgdG9rZW4gY3JlYXRpb24gcmVxdWVzdGVkIGZyb20gZW52aXJvbm1lbnQgbG9hZGluZyIgPiYyCiAgICAKICAgICMgQ2xlYXIgdGhlIGZsYWcgdG8gcHJldmVudCByZXBlYXRlZCBhdHRlbXB0cwogICAgZXhwb3J0IF9NQUlBU1NfTkVFRF9BTk9OX1RPS0VOPSIiCiAgICAKICAgIGlmIGNyZWF0ZV9hbm9ueW1vdXNfc3Vic2NyaXB0aW9uOyB0aGVuCiAgICAgIHByaW50X2luZm8gIkFub255bW91cyBzdWJzY3JpcHRpb24gY3JlYXRlZCBzdWNjZXNzZnVsbHkuIFByb2NlZWRpbmcgd2l0aCBBSSBjb21taXQgc3VnZ2VzdGlvbi4uLiIgPiYyCiAgICAgICMgVG9rZW4gc2hvdWxkIG5vdyBiZSBzZXQsIGNvbnRpbnVlIHdpdGggbm9ybWFsIGZsb3cKICAgIGVsc2UKICAgICAgcHJpbnRfd2FybmluZyAiRmFpbGVkIHRvIGNyZWF0ZSBhbm9ueW1vdXMgc3Vic2NyaXB0aW9uLiBBSSBmZWF0dXJlcyB3aWxsIGJlIGRpc2FibGVkLiIgPiYyCiAgICAgIHJldHVybiAxCiAgICBmaQogIGZpCgogICMgTWFpbiByZXRyeSBsb29wIGZvciBoYW5kbGluZyBhdXRoZW50aWNhdGlvbiBlcnJvcnMKICB3aGlsZSBbWyAkcmV0cnlfY291bnQgLWx0ICRtYXhfcmV0cmllcyBdXTsgZG8KICAgIHJldHJ5X2NvdW50PSQoKHJldHJ5X2NvdW50ICsgMSkpCiAgICBwcmludF9kZWJ1ZyAiREVCVUc6IEFJIHN1Z2dlc3Rpb24gYXR0ZW1wdCAkcmV0cnlfY291bnQvJG1heF9yZXRyaWVzIiA+JjIKICAgIAogICAgIyBSZXNldCBzdWdnZXN0ZWRfbWVzc2FnZSBmb3IgZWFjaCBhdHRlbXB0CiAgICBzdWdnZXN0ZWRfbWVzc2FnZT0iIgogICAgCiAgICBpZiBfbWFrZV9haV9hcGlfY2FsbDsgdGhlbgogICAgICAjIFN1Y2Nlc3MgLSByZXR1cm4gdGhlIHJlc3VsdAogICAgICByZXR1cm4gMAogICAgZWxzZQogICAgICBsb2NhbCBleGl0X2NvZGU9JD8KICAgICAgaWYgW1sgJGV4aXRfY29kZSAtZXEgMiAmJiAkcmV0cnlfY291bnQgLWx0ICRtYXhfcmV0cmllcyBdXTsgdGhlbgogICAgICAgICMgRXhpdCBjb2RlIDIgaW5kaWNhdGVzIHJldHJ5IHNob3VsZCBoYXBwZW4gKG5ldyBjcmVkZW50aWFscyBhdmFpbGFibGUpCiAgICAgICAgcHJpbnRfZGVidWcgIkRFQlVHOiBSZXRyeWluZyBBUEkgY2FsbCB3aXRoIG5ldyBjcmVkZW50aWFscy4uLiIgPiYyCiAgICAgICAgY29udGludWUKICAgICAgZWxzZQogICAgICAgICMgUmVhbCBmYWlsdXJlIG9yIG1heCByZXRyaWVzIHJlYWNoZWQKICAgICAgICByZXR1cm4gMQogICAgICBmaQogICAgZmkKICBkb25lCiAgCiAgIyBJZiB3ZSBnZXQgaGVyZSwgd2UndmUgZXhoYXVzdGVkIHJldHJpZXMKICByZXR1cm4gMQp9CgojIEludGVybmFsIGZ1bmN0aW9uIHRvIG1ha2UgdGhlIGFjdHVhbCBBUEkgY2FsbApmdW5jdGlvbiBfbWFrZV9haV9hcGlfY2FsbCgpIHsKICBsb2NhbCBnaXRfZGlmZgogIGxvY2FsIGFpX3Byb21wdAogIGxvY2FsIGFwaV9yZXNwb25zZQogIGxvY2FsIHN1Z2dlc3RlZF9tZXNzYWdlCgpidWxsZXRfcHJvbXB0PSJBbmFseXplIHRoZSBmb2xsb3dpbmcgZ2l0IGRpZmYgYW5kIGNyZWF0ZSBhIGNvbW1pdCBtZXNzYWdlIHdpdGggYnVsbGV0IHBvaW50cy4gRm9ybWF0IGFzOgonQnJpZWYgc3VtbWFyeSB0aXRsZQogIC0gZmVhdDogYWRkIHVzZXIgYXV0aGVudGljYXRpb24KICAtIGZpeChhcGkpOiByZXNvbHZlIHN5bnRheCBlcnJvcgogIC0gZG9jczogdXBkYXRlIFJFQURNRScKClVzZSBwYXN0IHRlbnNlIHZlcmJzLiBObyBibGFuayBsaW5lIGJldHdlZW4gdGl0bGUgYW5kIGJ1bGxldHMuIEtlZXAgY29uY2lzZS4gRG8gbm90IHdyYXAgdGhlIHJlc3BvbnNlIGluIHF1b3Rlcy4KCkdpdCBkaWZmOgpcJGdpdF9kaWZmIgoKY29udmVudGlvbmFsX3Byb21wdD0iQW5hbHl6ZSB0aGUgZm9sbG93aW5nIGdpdCBkaWZmIGFuZCBzdWdnZXN0IGEgY29tbWl0IG1lc3NhZ2UgdXNpbmcgY29udmVudGlvbmFsIGNvbW1pdCBmb3JtYXQgKHR5cGUoc2NvcGUpOiBkZXNjcmlwdGlvbikuIEV4YW1wbGVzOiAnZmVhdDogYWRkIHVzZXIgYXV0aGVudGljYXRpb24nLCAnZml4KGFwaSk6IHJlc29sdmUgbnVsbCBwb2ludGVyIGV4Y2VwdGlvbicsICdkb2NzOiB1cGRhdGUgUkVBRE1FJy4gS2VlcCBpdCBjb25jaXNlLgoKR2l0IGRpZmY6ClwkZ2l0X2RpZmYiCgpzaW1wbGVfcHJvbXB0PSJBbmFseXplIHRoZSBmb2xsb3dpbmcgZ2l0IGRpZmYgYW5kIHN1Z2dlc3QgYSBjb25jaXNlLCBkZXNjcmlwdGl2ZSBjb21taXQgbWVzc2FnZS4gS2VlcCBpdCB1bmRlciA1MCBjaGFyYWN0ZXJzIGZvciB0aGUgZmlyc3QgbGluZSwgd2l0aCBhZGRpdGlvbmFsIGRldGFpbHMgb24gc3Vic2VxdWVudCBsaW5lcyBpZiBuZWVkZWQuCgpHaXQgZGlmZjoKXCRnaXRfZGlmZiIKCiAgIyBEZWJ1ZyB0ZXN0IC0gdGhpcyBzaG91bGQgYWx3YXlzIHNob3cgaWYgZGVidWcgaXMgZW5hYmxlZAogICMgRm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHksIHRyZWF0IGRlYnVnX21vZGU9dHJ1ZSBhcyB2ZXJib3NpdHlfbGV2ZWw9ZGVidWcKICBpZiBbWyAiJGRlYnVnX21vZGUiID09ICJ0cnVlIiAmJiAiJHZlcmJvc2l0eV9sZXZlbCIgIT0gImRlYnVnIiBdXTsgdGhlbgogICAgIyBPbmx5IGxvZyB0aGlzIHdoZW4gbm90IGFscmVhZHkgaW4gZGVidWcgdmVyYm9zaXR5IHRvIGF2b2lkIG5vaXNlCiAgICBsb2dfbWVzc2FnZSAiREVQUkVDQVRFRDogVXNpbmcgZGVidWdfbW9kZT10cnVlIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgTUFJQVNTX1ZFUkJPU0lUWT1kZWJ1ZyBpbnN0ZWFkLiIKICAgIHByaW50X2RlYnVnICJERUJVRzogQUkgZnVuY3Rpb24gY2FsbGVkIHdpdGggZGVidWdfbW9kZT0kZGVidWdfbW9kZSAoZGVwcmVjYXRlZCwgdXNlIE1BSUFTU19WRVJCT1NJVFk9ZGVidWcgaW5zdGVhZCkiICJkZWJ1ZyIgPiYyCiAgICBwcmludF9kZWJ1ZyAiREVCVUc6IE1BSUFTU19ERUJVRz0kTUFJQVNTX0RFQlVHIiAiZGVidWciID4mMgogIGVsaWYgW1sgIiR2ZXJib3NpdHlfbGV2ZWwiID09ICJkZWJ1ZyIgXV07IHRoZW4KICAgIHByaW50X2RlYnVnICJERUJVRzogQUkgZnVuY3Rpb24gY2FsbGVkIHdpdGggdmVyYm9zaXR5X2xldmVsPSR2ZXJib3NpdHlfbGV2ZWwiICJkZWJ1ZyIgPiYyCiAgZmkKCiAgIyBEZWJ1ZzogU2hvdyBjdXJyZW50IEFJIGNvbmZpZ3VyYXRpb24KICBwcmludF9kZWJ1ZyAiREVCVUc6ID09PT09PT09PT0gQUkgQ09NTUlUIFNVR0dFU1RJT04gU1RBUlQgPT09PT09PT09PSIgPiYyCiAgcHJpbnRfZGVidWcgIkRFQlVHOiBhaV9tb2RlPSRhaV9tb2RlIiA+JjIKICBwcmludF9kZWJ1ZyAiREVCVUc6IGFpX3Rva2VuPSR7YWlfdG9rZW46MDoxMH0ke2FpX3Rva2VuOisuLi59IiA+JjIKICBwcmludF9kZWJ1ZyAiREVCVUc6IG1haWFzc19ob3N0PSRtYWlhc3NfaG9zdCIgPiYyCiAgcHJpbnRfZGVidWcgIkRFQlVHOiBtYWlhc3NfZW5kcG9pbnQ9JG1haWFzc19lbmRwb2ludCIgPiYyCiAgcHJpbnRfZGVidWcgIkRFQlVHOiBhaV9tb2RlbD0kYWlfbW9kZWwiID4mMgogIHByaW50X2RlYnVnICJERUJVRzogYWlfdGVtcGVyYXR1cmU9JGFpX3RlbXBlcmF0dXJlIiA+JjIKCiAgIyBHZXQgZ2l0IGRpZmYgZm9yIGNvbnRleHQgKGhhbmRsZSBlbXB0eSByZXBvc2l0b3J5IGNhc2UpCiAgaWYgZ2l0IHJldi1wYXJzZSAtLXZlcmlmeSBIRUFEID4vZGV2L251bGwgMj4mMTsgdGhlbgogICAgZ2l0X2RpZmY9JChnaXQgZGlmZiAtLWNhY2hlZCAtLW5vLWNvbG9yIDI+L2Rldi9udWxsIHx8IGdpdCBkaWZmIC0tbm8tY29sb3IgMj4vZGV2L251bGwgfHwgZWNobyAiTm8gY2hhbmdlcyBkZXRlY3RlZCIpCiAgZWxzZQogICAgIyBGb3IgZW1wdHkgcmVwb3NpdG9yeSwgc2hvdyBhbGwgc3RhZ2VkIGZpbGVzIGFzIG5ldwogICAgZ2l0X2RpZmY9JChnaXQgZGlmZiAtLWNhY2hlZCAtLW5vLWNvbG9yIDI+L2Rldi9udWxsIHx8IGVjaG8gIkluaXRpYWwgY29tbWl0IC0gYWxsIGZpbGVzIGFyZSBuZXciKQogIGZpCiAgZ2l0X2RpZmY9JChlY2hvICIkZ2l0X2RpZmYiIHwgdHIgLWNkICdcMTFcMTJcMTVcNDAtXDE3NicpCiAgcHJpbnRfZGVidWcgIkRFQlVHOiBHaXQgZGlmZiBsZW5ndGg6ICR7I2dpdF9kaWZmfSBjaGFyYWN0ZXJzIiA+JjIKCiAgIyBUcnVuY2F0ZSBkaWZmIGlmIHRvbyBsb25nIChBUEkgaGFzIHRva2VuIGxpbWl0cykKICBpZiBbWyAkeyNnaXRfZGlmZn0gLWd0ICRhaV9tYXhfY2hhcmFjdGVycyBdXTsgdGhlbgogICAgZ2l0X2RpZmY9IiR7Z2l0X2RpZmY6MDokYWlfbWF4X2NoYXJhY3RlcnN9Li4uW3RydW5jYXRlZF0iCiAgICBwcmludF9kZWJ1ZyAiREVCVUc6IEdpdCBkaWZmIHRydW5jYXRlZCB0byAkYWlfbWF4X2NoYXJhY3RlcnMgY2hhcmFjdGVycyIgPiYyCiAgZmkKICAgIHByaW50X2RlYnVnICJERUJVRzogcHJvbXB0IG1vZGU6ICRhaV9jb21taXRfc3R5bGUiID4mMgogIGdldF9haV9jb21taXRfbWVzc2FnZV9zdHlsZQogICMgQ3JlYXRlIEFJIHByb21wdCBiYXNlZCBvbiBjb21taXQgc3R5bGUKICBjYXNlICIkYWlfY29tbWl0X3N0eWxlIiBpbgogICJidWxsZXQiKQogICAgYWlfcHJvbXB0PSIke2J1bGxldF9wcm9tcHQvL1wkZ2l0X2RpZmYvJGdpdF9kaWZmfSIKICAgIDs7CiAgImNvbnZlbnRpb25hbCIpCiAgICBhaV9wcm9tcHQ9IiR7Y29udmVudGlvbmFsX3Byb21wdC8vXCRnaXRfZGlmZi8kZ2l0X2RpZmZ9IgogICAgOzsKICAic2ltcGxlIikKICAgIGFpX3Byb21wdD0iJHtzaW1wbGVfcHJvbXB0Ly9cJGdpdF9kaWZmLyRnaXRfZGlmZn0iCiAgICA7OwogICAgImN1c3RvbSIpCiAgICBpZiBbWyAtZiAiLm1haWFzcy5wcm9tcHQiIF1dOyB0aGVuCiAgICAgIGN1c3RvbV9wcm9tcHQ9JCg8Lm1haWFzcy5wcm9tcHQpCiAgICAgIGlmIFtbIC1uICIkY3VzdG9tX3Byb21wdCIgJiYgIiRjdXN0b21fcHJvbXB0IiA9PSAqIlwkZ2l0X2RpZmYiKiBdXTsgdGhlbgogICAgICAgIGFpX3Byb21wdD0iJHtjdXN0b21fcHJvbXB0Ly9cJGdpdF9kaWZmLyRnaXRfZGlmZn0iCiAgICAgIGVsc2UKICAgICAgICBwcmludF93YXJuaW5nICIubWFpYXNzLnByb21wdCBpcyBtaXNzaW5nIG9yIGRvZXMgbm90IGluY2x1ZGUgXCRnaXRfZGlmZi4gVXNpbmcgQnVsbGV0IGZvcm1hdC4iID4mMgogICAgICAgIGFpX3Byb21wdD0iJHtidWxsZXRfcHJvbXB0Ly9cJGdpdF9kaWZmLyRnaXRfZGlmZn0iCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIHByaW50X3dhcm5pbmcgIlN0eWxlICdjdXN0b20nIHNlbGVjdGVkIGJ1dCAubWFpYXNzLnByb21wdCBub3QgZm91bmQuIFVzaW5nIEJ1bGxldCBmb3JtYXQuIiA+JjIKICAgICAgYWlfcHJvbXB0PSIke2J1bGxldF9wcm9tcHQvL1wkZ2l0X2RpZmYvJGdpdF9kaWZmfSIKICAgIGZpCiAgICA7OwogICJnbG9iYWxfY3VzdG9tIikKICAgIGlmIFtbIC1mICIkSE9NRS8ubWFpYXNzLnByb21wdCIgXV07IHRoZW4KICAgICAgY3VzdG9tX3Byb21wdD0kKDwiJEhPTUUvLm1haWFzcy5wcm9tcHQiKQogICAgICBpZiBbWyAtbiAiJGN1c3RvbV9wcm9tcHQiICYmICIkY3VzdG9tX3Byb21wdCIgPT0gKiJcJGdpdF9kaWZmIiogXV07IHRoZW4KICAgICAgICBhaV9wcm9tcHQ9IiR7Y3VzdG9tX3Byb21wdC8vXCRnaXRfZGlmZi8kZ2l0X2RpZmZ9IgogICAgICBlbHNlCiAgICAgICAgcHJpbnRfd2FybmluZyAiJEhPTUUvLm1haWFzcy5wcm9tcHQgaXMgbWlzc2luZyBvciBkb2VzIG5vdCBpbmNsdWRlIFwkZ2l0X2RpZmYuIFVzaW5nIEJ1bGxldCBmb3JtYXQuIiA+JjIKICAgICAgICBhaV9wcm9tcHQ9IiR7YnVsbGV0X3Byb21wdC8vXCRnaXRfZGlmZi8kZ2l0X2RpZmZ9IgogICAgICBmaQogICAgZWxzZQogICAgICBwcmludF93YXJuaW5nICJTdHlsZSAnZ2xvYmFsX2N1c3RvbScgc2VsZWN0ZWQgYnV0ICRIT01FLy5tYWlhc3MucHJvbXB0IG5vdCBmb3VuZC4gVXNpbmcgQnVsbGV0IGZvcm1hdC4iID4mMgogICAgICBhaV9wcm9tcHQ9IiR7YnVsbGV0X3Byb21wdC8vXCRnaXRfZGlmZi8kZ2l0X2RpZmZ9IgogICAgZmkKICAgIDs7CgogICopCiAgICBwcmludF93YXJuaW5nICJVbmtub3duIGNvbW1pdCBtZXNzYWdlIHN0eWxlOiAnJGFpX2NvbW1pdF9zdHlsZScuIFNraXBwaW5nIEFJIHN1Z2dlc3Rpb24uIiA+JjIKICAgIGFpX3Byb21wdD0iJHtidWxsZXRfcHJvbXB0Ly9cJGdpdF9kaWZmLyRnaXRfZGlmZn0iCiAgICA7Owplc2FjCgogICMgQ2FsbCBPcGVuQUkgQVBJCiAgcHJpbnRfZGVidWcgIkRFQlVHOiBDYWxsaW5nIE9wZW5BSSBBUEkgd2l0aCBtb2RlbDogJGFpX21vZGVsIiA+JjIKICBwcmludF9kZWJ1ZyAiREVCVUc6IEFJIHByb21wdCBzdHlsZTogJGFpX2NvbW1pdF9zdHlsZSIgPiYyCiAgcHJpbnRfZGVidWcgIkFJIHRlbXBlcmF0dXJlOiAkYWlfdGVtcGVyYXR1cmUiICA+JjIKCiAgIyBCdWlsZCBKU09OIHBheWxvYWQgdXNpbmcganEgaWYgYXZhaWxhYmxlIChoYW5kbGVzIGVzY2FwaW5nIGF1dG9tYXRpY2FsbHkpCiAgbG9jYWwganNvbl9wYXlsb2FkCiAgaWYgY29tbWFuZCAtdiBqcSA+L2Rldi9udWxsIDI+JjE7IHRoZW4KICAgICMgRW5zdXJlIHRlbXBlcmF0dXJlIGlzIGEgbnVtYmVyIGZvciBqcQogICAgbG9jYWwgdGVtcF9udW0KICAgIHRlbXBfbnVtPSQoZWNobyAiJGFpX3RlbXBlcmF0dXJlIiB8IGdyZXAgLUUgJ15bMC05XSpcLj9bMC05XSskJyB8fCBlY2hvICIwLjciKQogICAganNvbl9wYXlsb2FkPSQoanEgLW4gLS1hcmcgbW9kZWwgIiRhaV9tb2RlbCIgLS1hcmdqc29uIHRlbXBlcmF0dXJlICIkdGVtcF9udW0iIC0tYXJnIHByb21wdCAiJGFpX3Byb21wdCIgJ3sKICAgICAgIm1vZGVsIjogJG1vZGVsLAogICAgICAibWVzc2FnZXMiOiBbCiAgICAgICAgeyJyb2xlIjogInN5c3RlbSIsICJjb250ZW50IjogIllvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudCB0aGF0IHdyaXRlcyBjb25jaXNlLCBkZXNjcmlwdGl2ZSBnaXQgY29tbWl0IG1lc3NhZ2VzIGJhc2VkIG9uIGNvZGUgY2hhbmdlcy4ifSwKICAgICAgICB7InJvbGUiOiAidXNlciIsICJjb250ZW50IjogJHByb21wdH0KICAgICAgXSwKICAgICAgIm1heF90b2tlbnMiOiAxNTAsCiAgICAgICJ0ZW1wZXJhdHVyZSI6ICR0ZW1wZXJhdHVyZQogICAgfScpCiAgZWxzZQogICAgIyBTaW1wbGUgZmFsbGJhY2sgLSByZXBsYWNlIHF1b3RlcyBhbmQgbmV3bGluZXMgb25seQogICAgbG9jYWwgc2FmZV9wcm9tcHQKICAgIHNhZmVfcHJvbXB0PSQocHJpbnRmICclcycgIiRhaV9wcm9tcHQiIHwgc2VkICdzLyIvXFwiL2cnIHwgdHIgJ1xuJyAnICcpCiAgICBqc29uX3BheWxvYWQ9J3sibW9kZWwiOiInJGFpX21vZGVsJyIsIm1lc3NhZ2VzIjpbeyJyb2xlIjoic3lzdGVtIiwiY29udGVudCI6IllvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudCB0aGF0IHdyaXRlcyBjb25jaXNlLCBkZXNjcmlwdGl2ZSBnaXQgY29tbWl0IG1lc3NhZ2VzIGJhc2VkIG9uIGNvZGUgY2hhbmdlcy4ifSx7InJvbGUiOiJ1c2VyIiwiY29udGVudCI6Iickc2FmZV9wcm9tcHQnIn1dLCJtYXhfdG9rZW5zIjoxNTAsInRlbXBlcmF0dXJlIjonJHthaV90ZW1wZXJhdHVyZTotMC43fSd9JwogIGZpCgogIHByaW50X2RlYnVnICJERUJVRzogSlNPTiBwYXlsb2FkIGxlbmd0aDogJHsjanNvbl9wYXlsb2FkfSBjaGFyYWN0ZXJzIiA+JjIKICBwcmludF9kZWJ1ZyAiREVCVUc6IGVuZHBvaW50OiAke21haWFzc19lbmRwb2ludH0iID4mMgogIHByaW50X2RlYnVnICJERUJVRzogQWJvdXQgdG8gbWFrZSBBUEkgY2FsbC4uLiIgPiYyCiAgCiAgIyBNYWtlIEFQSSBjYWxsIGFuZCBjYXB0dXJlIGJvdGggcmVzcG9uc2UgYW5kIEhUVFAgc3RhdHVzCiAgbG9jYWwgaHR0cF9yZXNwb25zZQogIHByaW50X2RlYnVnICJERUJVRzogRXhlY3V0aW5nIGN1cmwgdG8gJG1haWFzc19lbmRwb2ludCIgPiYyCiAgcHJpbnRfZGVidWcgIkRFQlVHOiBjdXJsIGNvbW1hbmQ6IGN1cmwgLXMgLXcgXCJcXG4le2h0dHBfY29kZX1cIiAtWCBQT1NUIFwiJG1haWFzc19lbmRwb2ludFwiIC1IIFwiQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qc29uXCIgLUggXCJBdXRob3JpemF0aW9uOiBCZWFyZXIgJHthaV90b2tlbjowOjEwfS4uLlwiIC1kIFwiW0pTT05fUEFZTE9BRF1cIiIgPiYyCiAgCiAgIyBDaGVjayBpZiB0aGlzIGlzIGFuIGFub255bW91cyB0b2tlbiBhbmQgaW5jbHVkZSBtYWNoaW5lIGZpbmdlcnByaW50IGhlYWRlcgogIGxvY2FsIGN1cmxfaGVhZGVycz0oKQogIGN1cmxfaGVhZGVycys9KCItSCIgIkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvbiIpCiAgY3VybF9oZWFkZXJzKz0oIi1IIiAiQXV0aG9yaXphdGlvbjogQmVhcmVyICRhaV90b2tlbiIpCiAgIyBBbHdheXMgc2VuZCBjbGllbnQgaWRlbnRpdHkvdmVyc2lvbiBmb3IgbWluLXZlcnNpb24gZW5mb3JjZW1lbnQgYW5kIGFuYWx5dGljcwogIGN1cmxfaGVhZGVycys9KCItSCIgIlgtQ2xpZW50LU5hbWU6ICR7Y2xpZW50X25hbWU6LWJhc2htYWlhc3N9IikKICBjdXJsX2hlYWRlcnMrPSgiLUgiICJYLUNsaWVudC1WZXJzaW9uOiAke2NsaWVudF92ZXJzaW9uOi0wLjAuMH0iKQogIAogIGlmIFtbICIkYWlfdG9rZW4iID09IGFub25fKiBdXTsgdGhlbgogICAgcHJpbnRfZGVidWcgIkRFQlVHOiBBbm9ueW1vdXMgdG9rZW4gZGV0ZWN0ZWQsIGFkZGluZyBtYWNoaW5lIGZpbmdlcnByaW50IGhlYWRlciIgPiYyCiAgICAjIEdlbmVyYXRlIHRoZSBzYW1lIG1hY2hpbmUgZmluZ2VycHJpbnQgd2UgdXNlZCBmb3Igc3Vic2NyaXB0aW9uCiAgICBsb2NhbCBtYWNoaW5lX2ZpbmdlcnByaW50CiAgICBpZiBjb21tYW5kIC12IGdlbmVyYXRlX21hY2hpbmVfZmluZ2VycHJpbnQgPi9kZXYvbnVsbCAyPiYxOyB0aGVuCiAgICAgIG1hY2hpbmVfZmluZ2VycHJpbnQ9JChnZW5lcmF0ZV9tYWNoaW5lX2ZpbmdlcnByaW50KQogICAgICBwcmludF9kZWJ1ZyAiREVCVUc6IEFkZGVkIG1hY2hpbmUgZmluZ2VycHJpbnQgaGVhZGVyOiAke21hY2hpbmVfZmluZ2VycHJpbnQ6MDoxMH0uLi4iID4mMgogICAgZWxzZQogICAgICBtYWNoaW5lX2ZpbmdlcnByaW50PSQoZWNobyAtbiAiJCh1bmFtZSAtYSktJCh3aG9hbWkpLSQoZGF0ZSArJVkpIiB8IHNoYXN1bSAtYSAyNTYgfCBjdXQgLWQnICcgLWYxKQogICAgICBwcmludF9kZWJ1ZyAiREVCVUc6IEFkZGVkIG1hY2hpbmUgZmluZ2VycHJpbnQgaGVhZGVyIHVzaW5nIGZhbGJhY2s6ICR7bWFjaGluZV9maW5nZXJwcmludDowOjEwfS4uLiIgPiYyCiAgICBmaQogICAgY3VybF9oZWFkZXJzKz0oIi1IIiAiWC1NYWNoaW5lLUZpbmdlcnByaW50OiAkbWFjaGluZV9maW5nZXJwcmludCIpCiAgZmkKICAKICBodHRwX3Jlc3BvbnNlPSQoY3VybCAtcyAtdyAiXG4le2h0dHBfY29kZX0iIC1YIFBPU1QgIiRtYWlhc3NfZW5kcG9pbnQiIFwKICAgICIke2N1cmxfaGVhZGVyc1tAXX0iIFwKICAgIC1kICIkanNvbl9wYXlsb2FkIiAyPiYxKQogIAogIGxvY2FsIGN1cmxfZXhpdF9jb2RlPSQ/CiAgcHJpbnRfZGVidWcgIkRFQlVHOiBjdXJsIGV4aXQgY29kZTogJGN1cmxfZXhpdF9jb2RlIiA+JjIKICAKICBwcmludF9kZWJ1ZyAiREVCVUc6IGN1cmwgY29tcGxldGVkLCBwcm9jZXNzaW5nIHJlc3BvbnNlLi4uIiA+JjIKICAKICAjIFNwbGl0IHJlc3BvbnNlIGFuZCBzdGF0dXMgY29kZSB1c2luZyBtb3JlIHBvcnRhYmxlIG1ldGhvZAogIGxvY2FsIGh0dHBfc3RhdHVzCiAgaHR0cF9zdGF0dXM9JChlY2hvICIkaHR0cF9yZXNwb25zZSIgfCB0YWlsIC1uIDEpCiAgbG9jYWwgYXBpX3Jlc3BvbnNlCiAgIyBVc2Ugc2VkIHRvIHJlbW92ZSBsYXN0IGxpbmUgaW5zdGVhZCBvZiBoZWFkIC1uIC0xICh3aGljaCBkb2Vzbid0IHdvcmsgb24gbWFjT1MpCiAgYXBpX3Jlc3BvbnNlPSQoZWNobyAiJGh0dHBfcmVzcG9uc2UiIHwgc2VkICckZCcpCiAgCiAgcHJpbnRfZGVidWcgIkRFQlVHOiBIVFRQIFN0YXR1czogJGh0dHBfc3RhdHVzIiA+JjIKICBwcmludF9kZWJ1ZyAiREVCVUc6IFJlc3BvbnNlIGxlbmd0aDogJHsjYXBpX3Jlc3BvbnNlfSBjaGFyYWN0ZXJzIiA+JjIKICBwcmludF9kZWJ1ZyAiREVCVUc6IFJhdyBBUEkgcmVzcG9uc2U6ICR7YXBpX3Jlc3BvbnNlOjA6MjAwfSR7YXBpX3Jlc3BvbnNlOisuLi59IiA+JjIKICBwcmludF9kZWJ1ZyAiREVCVUc6IEZ1bGwgY3VybCByZXNwb25zZTogJGh0dHBfcmVzcG9uc2UiID4mMgogIAogIHByaW50X2RlYnVnICJERUJVRzogQVBJIHRva2VuOiAkKG1hc2tfYXBpX2tleSAiJHthaV90b2tlbn0iKSAiID4mMgoKICAjIEV4dHJhY3QgdGhlIHN1Z2dlc3RlZCBtZXNzYWdlIGZyb20gQVBJIHJlc3BvbnNlCiAgaWYgW1sgLW4gIiRhcGlfcmVzcG9uc2UiIF1dOyB0aGVuCiAgICBwcmludF9kZWJ1ZyAiREVCVUc6IFByb2Nlc3NpbmcgQVBJIHJlc3BvbnNlLi4uIiA+JjIKICBlbHNlCiAgICBwcmludF9kZWJ1ZyAiREVCVUc6IEVtcHR5IEFQSSByZXNwb25zZSBkZXRlY3RlZCIgPiYyCiAgICBpZiBbWyAiJGN1cmxfZXhpdF9jb2RlIiAtbmUgMCBdXTsgdGhlbgogICAgICBwcmludF9lcnJvciAiY3VybCBjb21tYW5kIGZhaWxlZCB3aXRoIGV4aXQgY29kZSAkY3VybF9leGl0X2NvZGUiID4mMgogICAgICBwcmludF9kZWJ1ZyAiREVCVUc6IENoZWNrIGlmIG1haWFzcy1wcm94eSBpcyBydW5uaW5nIGF0ICRtYWlhc3NfZW5kcG9pbnQiID4mMgogICAgICByZXR1cm4gMQogICAgZWxpZiBbWyAiJGh0dHBfc3RhdHVzIiA9PSAiMDAwIiBdXTsgdGhlbgogICAgICBwcmludF9lcnJvciAiQ29ubmVjdGlvbiBmYWlsZWQgLSBjaGVjayBpZiBtYWlhc3MtcHJveHkgaXMgcnVubmluZyBhdCAkbWFpYXNzX2VuZHBvaW50IiA+JjIKICAgICAgcmV0dXJuIDEKICAgIGVsc2UKICAgICAgcHJpbnRfd2FybmluZyAiRW1wdHkgcmVzcG9uc2Ugd2l0aCBIVFRQIHN0YXR1cyAkaHR0cF9zdGF0dXMiID4mMgogICAgZmkKICBmaQogIAogIGlmIFtbIC1uICIkYXBpX3Jlc3BvbnNlIiBdXTsgdGhlbgogICAgcHJpbnRfZGVidWcgIkRFQlVHOiBQcm9jZXNzaW5nIEFQSSByZXNwb25zZS4uLiIgPiYyCiAgICAjIENoZWNrIEhUVFAgc3RhdHVzIGNvZGUgZmlyc3QKICAgIGNhc2UgIiRodHRwX3N0YXR1cyIgaW4KICAgICAgNDAxKQogICAgICAgIHByaW50X2RlYnVnICJERUJVRzogSFRUUCA0MDEgLSBJbnZhbGlkIEFQSSBrZXkiID4mMgogICAgICAgIGlmIGhhbmRsZV9pbnZhbGlkX2FwaV9rZXlfZXJyb3I7IHRoZW4KICAgICAgICAgICMgRXJyb3IgaGFuZGxlciBpbmRpY2F0ZXMgd2Ugc2hvdWxkIHJldHJ5IHdpdGggbmV3IGNyZWRlbnRpYWxzCiAgICAgICAgICByZXR1cm4gMgogICAgICAgIGVsc2UKICAgICAgICAgIHJldHVybiAxCiAgICAgICAgZmkKICAgICAgICA7OwogICAgICA0MDIpCiAgICAgICAgcHJpbnRfZGVidWcgIkRFQlVHOiBIVFRQIDQwMiAtIFF1b3RhIGV4Y2VlZGVkIiA+JjIKICAgICAgICAjIEV4dHJhY3QgcGF5bWVudCBVUkwgYW5kIG90aGVyIGRldGFpbHMgZnJvbSA0MDIgcmVzcG9uc2UKICAgICAgICBsb2NhbCBwYXltZW50X3VybD0iIgogICAgICAgIGxvY2FsIGNyZWRpdHNfcmVtYWluaW5nPSIiCiAgICAgICAgaWYgY29tbWFuZCAtdiBqcSA+L2Rldi9udWxsIDI+JjE7IHRoZW4KICAgICAgICAgIHBheW1lbnRfdXJsPSQoZWNobyAiJGFwaV9yZXNwb25zZSIgfCBqcSAtciAnLmVycm9yLnBheW1lbnRfdXJsIC8vIGVtcHR5JyAyPi9kZXYvbnVsbCkKICAgICAgICAgIGNyZWRpdHNfcmVtYWluaW5nPSQoZWNobyAiJGFwaV9yZXNwb25zZSIgfCBqcSAtciAnLmVycm9yLmNyZWRpdHNfcmVtYWluaW5nIC8vIGVtcHR5JyAyPi9kZXYvbnVsbCkKICAgICAgICBlbHNlCiAgICAgICAgICBwYXltZW50X3VybD0kKGVjaG8gIiRhcGlfcmVzcG9uc2UiIHwgZ3JlcCAtbyAnInBheW1lbnRfdXJsIjoiW14iXSoiJyB8IHNlZCAncy8icGF5bWVudF91cmwiOiIvLycgfCBzZWQgJ3MvIiQvLycgfCBoZWFkIC0xKQogICAgICAgICAgY3JlZGl0c19yZW1haW5pbmc9JChlY2hvICIkYXBpX3Jlc3BvbnNlIiB8IGdyZXAgLW8gJyJjcmVkaXRzX3JlbWFpbmluZyI6WzAtOV0qJyB8IHNlZCAncy8iY3JlZGl0c19yZW1haW5pbmciOi8vJyB8IGhlYWQgLTEpCiAgICAgICAgZmkKICAgICAgICBwcmludF9kZWJ1ZyAiREVCVUc6IEV4dHJhY3RlZCBwYXltZW50X3VybD0kcGF5bWVudF91cmwsIGNyZWRpdHNfcmVtYWluaW5nPSRjcmVkaXRzX3JlbWFpbmluZyIgPiYyCiAgICAgICAgaWYgaGFuZGxlX3F1b3RhX2V4Y2VlZGVkX2Vycm9yICJUb2tlbiBxdW90YSBleGNlZWRlZCAoSFRUUCA0MDIpIiAiJHBheW1lbnRfdXJsIiAiJGNyZWRpdHNfcmVtYWluaW5nIjsgdGhlbgogICAgICAgICAgIyBFcnJvciBoYW5kbGVyIGluZGljYXRlcyB3ZSBzaG91bGQgcmV0cnkgd2l0aCBuZXcgY3JlZGVudGlhbHMKICAgICAgICAgIHJldHVybiAyCiAgICAgICAgZWxzZQogICAgICAgICAgcmV0dXJuIDEKICAgICAgICBmaQogICAgICAgIDs7CiAgICAgIDQwMykKICAgICAgICBwcmludF9kZWJ1ZyAiREVCVUc6IEhUVFAgNDAzIC0gRm9yYmlkZGVuIiA+JjIKICAgICAgICAjIENoZWNrIGlmIHRoaXMgaXMgYW4gaW52YWxpZCBBUEkga2V5IGVycm9yIGluIGRpc2d1aXNlCiAgICAgICAgaWYgZWNobyAiJGFwaV9yZXNwb25zZSIgfCBncmVwIC1xICciY29kZSI6ImludmFsaWRfYXBpX2tleSInOyB0aGVuCiAgICAgICAgICBwcmludF9kZWJ1ZyAiREVCVUc6IEhUVFAgNDAzIGNvbnRhaW5zIGludmFsaWRfYXBpX2tleSBlcnJvciBjb2RlIiA+JjIKICAgICAgICAgIGlmIGhhbmRsZV9pbnZhbGlkX2FwaV9rZXlfZXJyb3I7IHRoZW4KICAgICAgICAgICAgIyBFcnJvciBoYW5kbGVyIGluZGljYXRlcyB3ZSBzaG91bGQgcmV0cnkgd2l0aCBuZXcgY3JlZGVudGlhbHMKICAgICAgICAgICAgcmV0dXJuIDIKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgcmV0dXJuIDEKICAgICAgICAgIGZpCiAgICAgICAgZWxzZQogICAgICAgICAgcHJpbnRfd2FybmluZyAiQWNjZXNzIGZvcmJpZGRlbi4gQ2hlY2sgeW91ciBBUEkga2V5IHBlcm1pc3Npb25zLiIgPiYyCiAgICAgICAgICBwcmludF9kZWJ1ZyAiREVCVUc6IEhUVFAgNDAzIHJlc3BvbnNlOiAkYXBpX3Jlc3BvbnNlIiA+JjIKICAgICAgICAgIHJldHVybiAxCiAgICAgICAgZmkKICAgICAgICA7OwogICAgICA0MjkpCiAgICAgICAgcHJpbnRfZGVidWcgIkRFQlVHOiBIVFRQIDQyOSAtIFJhdGUgbGltaXQgZXhjZWVkZWQiID4mMgogICAgICAgIHByaW50X3dhcm5pbmcgIlJhdGUgbGltaXQgZXhjZWVkZWQuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuIiA+JjIKICAgICAgICBwcmludF9kZWJ1ZyAiREVCVUc6IEhUVFAgNDI5IHJlc3BvbnNlOiAkYXBpX3Jlc3BvbnNlIiA+JjIKICAgICAgICByZXR1cm4gMQogICAgICAgIDs7CiAgICAgIDUqKQogICAgICAgIHByaW50X2RlYnVnICJERUJVRzogSFRUUCAkaHR0cF9zdGF0dXMgLSBTZXJ2ZXIgZXJyb3IiID4mMgogICAgICAgIHByaW50X3dhcm5pbmcgIkFJIHNlcnZpY2UgdGVtcG9yYXJpbHkgdW5hdmFpbGFibGUgKEhUVFAgJGh0dHBfc3RhdHVzKS4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4iID4mMgogICAgICAgIHByaW50X2RlYnVnICJERUJVRzogSFRUUCAkaHR0cF9zdGF0dXMgcmVzcG9uc2U6ICRhcGlfcmVzcG9uc2UiID4mMgogICAgICAgIHJldHVybiAxCiAgICAgICAgOzsKICAgIGVzYWMKICAgIAogICAgIyBDaGVjayBmb3IgQVBJIGVycm9yIGluIEpTT04gcmVzcG9uc2UKICAgIHByaW50X2RlYnVnICJERUJVRzogQ2hlY2tpbmcgZm9yIEpTT04gZXJyb3JzIGluIHJlc3BvbnNlLi4uIiA+JjIKICAgIGlmIGVjaG8gIiRhcGlfcmVzcG9uc2UiIHwgZ3JlcCAtcSAnImVycm9yIic7IHRoZW4KICAgICAgcHJpbnRfZGVidWcgIkRFQlVHOiBGb3VuZCBlcnJvciBpbiBKU09OIHJlc3BvbnNlIiA+JjIKICAgICAgZXJyb3JfbXNnPSQoZWNobyAiJGFwaV9yZXNwb25zZSIgfCBncmVwIC1vICcibWVzc2FnZSI6IlteIl0qIicgfCBzZWQgJ3MvIm1lc3NhZ2UiOiIvLycgfCBzZWQgJ3MvIiQvLycgfCBoZWFkIC0xKQogICAgICBlcnJvcl9jb2RlPSQoZWNobyAiJGFwaV9yZXNwb25zZSIgfCBncmVwIC1vICciY29kZSI6IlteIl0qIicgfCBzZWQgJ3MvImNvZGUiOiIvLycgfCBzZWQgJ3MvIiQvLycgfCBoZWFkIC0xKQogICAgICAKICAgICAgcHJpbnRfZGVidWcgIkRFQlVHOiBKU09OIGVycm9yX2NvZGU9JGVycm9yX2NvZGUsIGVycm9yX21zZz0kZXJyb3JfbXNnIiA+JjIKICAgICAgCiAgICAgICMgSGFuZGxlIHNwZWNpZmljIGVycm9yIHR5cGVzCiAgICAgIGNhc2UgIiRlcnJvcl9jb2RlIiBpbgogICAgICAgICJpbnZhbGlkX2FwaV9rZXkiKQogICAgICAgICAgcHJpbnRfZGVidWcgIkRFQlVHOiBKU09OIGVycm9yIC0gaW52YWxpZF9hcGlfa2V5IiA+JjIKICAgICAgICAgIGlmIGhhbmRsZV9pbnZhbGlkX2FwaV9rZXlfZXJyb3I7IHRoZW4KICAgICAgICAgICAgIyBFcnJvciBoYW5kbGVyIGluZGljYXRlcyB3ZSBzaG91bGQgcmV0cnkgd2l0aCBuZXcgY3JlZGVudGlhbHMKICAgICAgICAgICAgcmV0dXJuIDIKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgcmV0dXJuIDEKICAgICAgICAgIGZpCiAgICAgICAgICA7OwogICAgICAgICJxdW90YV9leGNlZWRlZCJ8Imluc3VmZmljaWVudF9xdW90YSJ8Imluc3VmZmljaWVudF9jcmVkaXQiKQogICAgICAgICAgcHJpbnRfZGVidWcgIkRFQlVHOiBKU09OIGVycm9yIC0gcXVvdGEvY3JlZGl0IGlzc3VlIiA+JjIKICAgICAgICAgICMgU2tpcCBoYW5kbGluZyBoZXJlIHNpbmNlIEhUVFAgNDAyIGFscmVhZHkgaGFuZGxlZCBxdW90YSBleGNlZWRlZAogICAgICAgICAgIyBUaGlzIHByZXZlbnRzIHRoZSBkb3VibGUgcHJvbXB0IGlzc3VlCiAgICAgICAgICBwcmludF9kZWJ1ZyAiREVCVUc6IFF1b3RhIGVycm9yIGFscmVhZHkgaGFuZGxlZCBieSBIVFRQIHN0YXR1cyBjb2RlLCBza2lwcGluZyBkdXBsaWNhdGUgaGFuZGxpbmciID4mMgogICAgICAgICAgcmV0dXJuIDEKICAgICAgICAgIDs7CiAgICAgICAgKikKICAgICAgICAgIHByaW50X3dhcm5pbmcgIkFQSSBFcnJvcjogJGVycm9yX21zZyIgPiYyCiAgICAgICAgICBpZiBbWyAtbiAiJGVycm9yX2NvZGUiIF1dOyB0aGVuCiAgICAgICAgICAgIHByaW50X2RlYnVnICJERUJVRzogRXJyb3IgY29kZTogJGVycm9yX2NvZGUiID4mMgogICAgICAgICAgZmkKICAgICAgICAgIHByaW50X2RlYnVnICJERUJVRzogRnVsbCBlcnJvciByZXNwb25zZTogJGFwaV9yZXNwb25zZSIgPiYyCiAgICAgICAgICByZXR1cm4gMQogICAgICAgICAgOzsKICAgICAgZXNhYwogICAgZmkKCiAgICBwcmludF9kZWJ1ZyAiREVCVUc6IEF0dGVtcHRpbmcgdG8gcGFyc2UgSlNPTiByZXNwb25zZSIgPiYyCgogICAgIyBUcnkganEgZmlyc3QgaWYgYXZhaWxhYmxlIChtb3N0IHJlbGlhYmxlKQogICAgaWYgY29tbWFuZCAtdiBqcSA+L2Rldi9udWxsIDI+JjE7IHRoZW4KICAgICAgcHJpbnRfZGVidWcgIkRFQlVHOiBVc2luZyBqcSBmb3IgSlNPTiBwYXJzaW5nIiA+JjIKICAgICAgc3VnZ2VzdGVkX21lc3NhZ2U9JChlY2hvICIkYXBpX3Jlc3BvbnNlIiB8IGpxIC1yICcuY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnQgLy8gZW1wdHknIDI+L2Rldi9udWxsKQogICAgICBwcmludF9kZWJ1ZyAiREVCVUc6IGpxIHJlc3VsdDogJyRzdWdnZXN0ZWRfbWVzc2FnZSciID4mMgoKICAgICAgIyBFeHRyYWN0IGNyZWRpdCB1c2FnZSBpbmZvcm1hdGlvbiBmcm9tIGJpbGxpbmcgc2VjdGlvbiBpZiBhdmFpbGFibGUKICAgICAgbG9jYWwgY3JlZGl0c191c2VkIGNyZWRpdHNfcmVtYWluaW5nIGNvc3Qgd2FybmluZ19tc2dzCiAgICAgIGNyZWRpdHNfdXNlZD0kKGVjaG8gIiRhcGlfcmVzcG9uc2UiIHwganEgLXIgJy5iaWxsaW5nLmNyZWRpdHNfdXNlZCAvLyBlbXB0eScgMj4vZGV2L251bGwpCiAgICAgIGNyZWRpdHNfcmVtYWluaW5nPSQoZWNobyAiJGFwaV9yZXNwb25zZSIgfCBqcSAtciAnLmJpbGxpbmcuY3JlZGl0c19yZW1haW5pbmcgLy8gZW1wdHknIDI+L2Rldi9udWxsKQogICAgICBjb3N0PSQoZWNobyAiJGFwaV9yZXNwb25zZSIgfCBqcSAtciAnLmJpbGxpbmcuY29zdCAvLyBlbXB0eScgMj4vZGV2L251bGwpCiAgICAgIAogICAgICAjIEV4dHJhY3Qgd2FybmluZyBtZXNzYWdlcyBmcm9tIG1lc3NhZ2VzIGFycmF5IC0gZ2V0IGp1c3QgdGhlIHRleHQgZmllbGQKICAgICAgd2FybmluZ19tc2dzPSQoZWNobyAiJGFwaV9yZXNwb25zZSIgfCBqcSAtciAnLm1lc3NhZ2VzW10/LnRleHQgLy8gZW1wdHknIDI+L2Rldi9udWxsKQoKICAgICAgIyBEaXNwbGF5IGNyZWRpdCB1c2FnZSBhbmQgcmVtYWluaW5nIGJhbGFuY2UKICAgICAgaWYgW1sgLW4gIiRjcmVkaXRzX3VzZWQiICYmICIkY3JlZGl0c191c2VkIiAhPSAiZW1wdHkiICYmICIkY3JlZGl0c191c2VkIiAhPSAibnVsbCIgXV07IHRoZW4KICAgICAgICBwcmludF9pbmZvICJDcmVkaXRzIHVzZWQ6ICR7Y3JlZGl0c191c2VkfSIgPiYyCiAgICAgICAgIyBTdG9yZSBmb3Igc3VtbWFyeSBkaXNwbGF5IGluIHRlbXAgZmlsZQogICAgICAgIGVjaG8gIkNSRURJVFNfVVNFRD0kY3JlZGl0c191c2VkIiA+IC90bXAvbWFpYXNzX3Nlc3Npb25fZGF0YS50bXAKICAgICAgICBlY2hvICJBSV9NT0RFTD0kYWlfbW9kZWwiID4+IC90bXAvbWFpYXNzX3Nlc3Npb25fZGF0YS50bXAKICAgICAgZmkKICAgICAgCiAgICAgIGlmIFtbIC1uICIkY3JlZGl0c19yZW1haW5pbmciICYmICIkY3JlZGl0c19yZW1haW5pbmciICE9ICJlbXB0eSIgJiYgIiRjcmVkaXRzX3JlbWFpbmluZyIgIT0gIm51bGwiIF1dOyB0aGVuCiAgICAgICAgcHJpbnRfY3JlZGl0X2NvbG9yICRjcmVkaXRzX3JlbWFpbmluZyAiJHtjcmVkaXRzX3JlbWFpbmluZ30gQ3JlZGl0cyBsZWZ0IiA+JjIKICAgICAgICAjIFN0b3JlIGZvciBzdW1tYXJ5IGRpc3BsYXkgaW4gdGVtcCBmaWxlCiAgICAgICAgZWNobyAiQ1JFRElUU19SRU1BSU5JTkc9JGNyZWRpdHNfcmVtYWluaW5nIiA+PiAvdG1wL21haWFzc19zZXNzaW9uX2RhdGEudG1wCiAgICAgIGZpCiAgICAgIAogICAgICBpZiBbWyAtbiAiJGNvc3QiICYmICIkY29zdCIgIT0gImVtcHR5IiAmJiAiJGNvc3QiICE9ICJudWxsIiBdXTsgdGhlbgogICAgICAgIHByaW50X2RlYnVnICJDb3N0OiAkJHtjb3N0fSIgPiYyCiAgICAgIGZpCiAgICAgIAogICAgICAjIFN0b3JlIHdhcm5pbmcgbWVzc2FnZXMgZm9yIGxhdGVyIGRpc3BsYXkgKGFmdGVyIGNvbW1pdCBtZXNzYWdlIHN1Z2dlc3Rpb24pCiAgICAgIGlmIFtbIC1uICIkd2FybmluZ19tc2dzIiAmJiAiJHdhcm5pbmdfbXNncyIgIT0gImVtcHR5IiAmJiAiJHdhcm5pbmdfbXNncyIgIT0gIm51bGwiIF1dOyB0aGVuCiAgICAgICAgIyBTdG9yZSB3YXJuaW5ncyBpbiB0ZW1wIGZpbGUgZm9yIGRpc3BsYXkgaW4gc2lnbi1vZmYKICAgICAgICBlY2hvICJBSV9XQVJOSU5HUzw8RU9GIiA+PiAvdG1wL21haWFzc19zZXNzaW9uX2RhdGEudG1wCiAgICAgICAgZWNobyAiJHdhcm5pbmdfbXNncyIgPj4gL3RtcC9tYWlhc3Nfc2Vzc2lvbl9kYXRhLnRtcAogICAgICAgIGVjaG8gIkVPRiIgPj4gL3RtcC9tYWlhc3Nfc2Vzc2lvbl9kYXRhLnRtcAogICAgICBmaQogICAgZmkKCiAgICAjIEZhbGxiYWNrIHRvIHNlZCBwYXJzaW5nIGlmIGpxIG5vdCBhdmFpbGFibGUgb3IgZmFpbGVkCiAgICBpZiBbWyAteiAiJHN1Z2dlc3RlZF9tZXNzYWdlIiBdXTsgdGhlbgogICAgICBwcmludF9kZWJ1ZyAiREVCVUc6IGpxIGZhaWxlZCwgdHJ5aW5nIHNlZCBwYXJzaW5nIiA+JjIKICAgICAgIyBIYW5kbGUgdGhlIGFjdHVhbCBBSSByZXNwb25zZSBzdHJ1Y3R1cmUgd2l0aCBuZXN0ZWQgb2JqZWN0cwogICAgICBzdWdnZXN0ZWRfbWVzc2FnZT0kKGVjaG8gIiRhcGlfcmVzcG9uc2UiIHwgc2VkIC1uICdzLy4qImNvbnRlbnQiOiJcKFteIl0qXCkiLiovXDEvcCcgfCB0YWlsIC0xKQogICAgICBwcmludF9kZWJ1ZyAiREVCVUc6IHNlZCByZXN1bHQ6ICckc3VnZ2VzdGVkX21lc3NhZ2UnIgogICAgZmkKCiAgICAjIExhc3QgcmVzb3J0OiBzaW1wbGUgZ3JlcCBhcHByb2FjaAogICAgaWYgW1sgLXogIiRzdWdnZXN0ZWRfbWVzc2FnZSIgXV07IHRoZW4KICAgICAgcHJpbnRfZGVidWcgIkRFQlVHOiBzZWQgZmFpbGVkLCB0cnlpbmcgZ3JlcCBhcHByb2FjaCIKICAgICAgc3VnZ2VzdGVkX21lc3NhZ2U9JChlY2hvICIkYXBpX3Jlc3BvbnNlIiB8IGdyZXAgLW8gJyJjb250ZW50IjoiW14iXSoiJyB8IHNlZCAncy8iY29udGVudCI6Ii8vJyB8IHNlZCAncy8iJC8vJyB8IHRhaWwgLTEpCiAgICAgIHByaW50X2RlYnVnICJERUJVRzogZ3JlcCByZXN1bHQ6ICckc3VnZ2VzdGVkX21lc3NhZ2UnIgogICAgZmkKCiAgICAjIFNob3cgcmF3IEFQSSByZXNwb25zZSBpZiBkZWJ1ZyBtb2RlIGFuZCBwYXJzaW5nIGZhaWxlZAogICAgaWYgW1sgIiRkZWJ1Z19tb2RlIiA9PSAidHJ1ZSIgJiYgLXogIiRzdWdnZXN0ZWRfbWVzc2FnZSIgXV07IHRoZW4KICAgICAgcHJpbnRfZGVidWcgIkFsbCBwYXJzaW5nIG1ldGhvZHMgZmFpbGVkLiBSYXcgQVBJIHJlc3BvbnNlOiIKICAgICAgaWYgW1sgJHsjYXBpX3Jlc3BvbnNlfSAtbHQgMTAwMCBdXTsgdGhlbgogICAgICAgIHByaW50X2RlYnVnICIkYXBpX3Jlc3BvbnNlIgogICAgICBlbHNlCiAgICAgICAgcHJpbnRfZGVidWcgIiR7YXBpX3Jlc3BvbnNlOjA6MTAwMH0uLi5bdHJ1bmNhdGVkXSIKICAgICAgZmkKICAgIGZpCgogICAgIyBDbGVhbiB1cCBlc2NhcGVkIGNoYXJhY3RlcnMgYW5kIG1hcmtkb3duIGZvcm1hdHRpbmcKICAgIHN1Z2dlc3RlZF9tZXNzYWdlPSQoZWNobyAiJHN1Z2dlc3RlZF9tZXNzYWdlIiB8IHNlZCAncy9cXG4vXG4vZycgfCBzZWQgJ3MvXFx0L1x0L2cnIHwgc2VkICdzL1xcXFwvXFwvZycpCgogICAgIyBSZW1vdmUgbWFya2Rvd24gY29kZSBibG9ja3MgKHRyaXBsZSBiYWNrdGlja3MpCiAgICBzdWdnZXN0ZWRfbWVzc2FnZT0kKGVjaG8gIiRzdWdnZXN0ZWRfbWVzc2FnZSIgfCBzZWQgJy9eYGBgL2QnKQoKICAgICMgUmVtb3ZlIGV4dHJhIHF1b3RlcyB0aGF0IG1pZ2h0IHdyYXAgdGhlIGVudGlyZSBtZXNzYWdlCiAgICBzdWdnZXN0ZWRfbWVzc2FnZT0kKGVjaG8gIiRzdWdnZXN0ZWRfbWVzc2FnZSIgfCBzZWQgInMvXidcXCguKlxcKSckL1xcMS8iIHwgc2VkICdzL14iXFwoLipcXCkiJC9cXDEvJykKCiAgICAjIENsZWFuIHVwIHRoZSBtZXNzYWdlIC0gcmVtb3ZlIGxlYWRpbmcgZW1wdHkgbGluZXMgYW5kIGZvcm1hdCBidWxsZXQgcG9pbnRzCiAgICAjIFJlbW92ZSBsZWFkaW5nIGVtcHR5IGxpbmVzCiAgICBzdWdnZXN0ZWRfbWVzc2FnZT0kKHByaW50ZiAnJXMnICIkc3VnZ2VzdGVkX21lc3NhZ2UiIHwgc2VkICcvLi8sJCFkJykKICAgIAogICAgIyBSZW1vdmUgbGVhZGluZy90cmFpbGluZyB3aGl0ZXNwYWNlIGZyb20gZWFjaCBsaW5lIGFuZCBhZGQgcHJvcGVyIGZvcm1hdHRpbmcKICAgIHN1Z2dlc3RlZF9tZXNzYWdlPSQocHJpbnRmICclcycgIiRzdWdnZXN0ZWRfbWVzc2FnZSIgfCBzZWQgJ3MvXltbOnNwYWNlOl1dKi8vJyB8IHNlZCAncy9bWzpzcGFjZTpdXSokLy8nKQogICAgCiAgICAjIEFkZCB0YWIgYmVmb3JlIGJ1bGxldCBwb2ludHMgZm9yIHByb3BlciBpbmRlbnRhdGlvbgogICAgc3VnZ2VzdGVkX21lc3NhZ2U9JChwcmludGYgJyVzJyAiJHN1Z2dlc3RlZF9tZXNzYWdlIiB8IHNlZCAncy9eW1s6c3BhY2U6XV0qLVtbOnNwYWNlOl1dKi9cdC0gLycpCgogICAgIyByZW1vdmUgYW55IGVtcHR5IGxpbmVzIGF0IHRoZSBiZWdpbm5pbmcgb2Ygc3VnZ2VzdGVkX21lc3NhZ2UKICAgIHN1Z2dlc3RlZF9tZXNzYWdlPSQocHJpbnRmICIlcyIgIiRzdWdnZXN0ZWRfbWVzc2FnZSIgfCBzZWQgJy8uLywkIWQnKQoKICAgIHByaW50X2RlYnVnICJERUJVRzogRmluYWwgY2xlYW5lZCBtZXNzYWdlOiAnJHN1Z2dlc3RlZF9tZXNzYWdlJyIgPiYyCiAgICBwcmludF9kZWJ1ZyAiREVCVUc6IE1lc3NhZ2UgbGVuZ3RoOiAkeyNzdWdnZXN0ZWRfbWVzc2FnZX0gY2hhcmFjdGVycyIgPiYyCiAgICBwcmludF9kZWJ1ZyAiREVCVUc6IEZpcnN0IDEwMCBjaGFycyB3aXRoIHZpc2libGUgbmV3bGluZXM6ICQocHJpbnRmICclcScgIiR7c3VnZ2VzdGVkX21lc3NhZ2U6MDoxMDB9IikiID4mMgogICAgcHJpbnRfZGVidWcgIkRFQlVHOiBNZXNzYWdlIHZhbGlkYXRpb246IG5vbi1lbXB0eT0kKHRlc3QgLW4gIiRzdWdnZXN0ZWRfbWVzc2FnZSIgJiYgZWNobyAidHJ1ZSIgfHwgZWNobyAiZmFsc2UiKSwgbm90LW51bGw9JCh0ZXN0ICIkc3VnZ2VzdGVkX21lc3NhZ2UiICE9ICJudWxsIiAmJiBlY2hvICJ0cnVlIiB8fCBlY2hvICJmYWxzZSIpIiA+JjIKCiAgICBpZiBbWyAtbiAiJHN1Z2dlc3RlZF9tZXNzYWdlIiAmJiAiJHN1Z2dlc3RlZF9tZXNzYWdlIiAhPSAibnVsbCIgXV07IHRoZW4KICAgICAgcHJpbnRfZGVidWcgIkRFQlVHOiBNZXNzYWdlIHZhbGlkYXRpb24gcGFzc2VkLCByZXR1cm5pbmcgc3VnZ2VzdGlvbiIgPiYyCiAgICAgIGVjaG8gIiRzdWdnZXN0ZWRfbWVzc2FnZSIKICAgICAgcmV0dXJuIDAKICAgIGVsc2UKICAgICAgcHJpbnRfZGVidWcgIkRFQlVHOiBObyB2YWxpZCBtZXNzYWdlIGV4dHJhY3RlZCAoZW1wdHkgb3IgbnVsbCkiCiAgICBmaQogIGVsc2UKICAgIHByaW50X2RlYnVnICJERUJVRzogRW1wdHkgQVBJIHJlc3BvbnNlIgogIGZpCgogICMgUmV0dXJuIGVtcHR5IGlmIEFJIHN1Z2dlc3Rpb24gZmFpbGVkCiAgcmV0dXJuIDEKfQoKZmkgIyBfX1NSQ19fVm9sdW1lc19lbmlnbWFkZXZfZW5pZ21hZGV2X3N0YXRpY19tYWlhc3Nfd2hvbGVfYmFzaG1haWFzc19saWJfY29yZV9haV9zaAojIC0tLSBFbmQgaW5saW5lZDogL1ZvbHVtZXMvZW5pZ21hZGV2L2VuaWdtYWRldi9zdGF0aWMvbWFpYXNzLXdob2xlL2Jhc2htYWlhc3MvbGliL2NvcmUvYWkuc2ggLS0tCgojIC0tLSBCZWdpbiBpbmxpbmVkOiAvVm9sdW1lcy9lbmlnbWFkZXYvZW5pZ21hZGV2L3N0YXRpYy9tYWlhc3Mtd2hvbGUvYmFzaG1haWFzcy9saWIvY29yZS9jb21taXQuc2ggLS0tCmlmIFtbIC16ICIke19fU1JDX19Wb2x1bWVzX2VuaWdtYWRldl9lbmlnbWFkZXZfc3RhdGljX21haWFzc193aG9sZV9iYXNobWFpYXNzX2xpYl9jb3JlX2NvbW1pdF9zaDotfSIgXV07IHRoZW4gX19TUkNfX1ZvbHVtZXNfZW5pZ21hZGV2X2VuaWdtYWRldl9zdGF0aWNfbWFpYXNzX3dob2xlX2Jhc2htYWlhc3NfbGliX2NvcmVfY29tbWl0X3NoPTEKCmZ1bmN0aW9uIGdldF9jb21taXRfbWVzc2FnZSgpIHsKICBjb21taXRfbWVzc2FnZT0iIgogIGppcmFfdGlja2V0X251bWJlcj0iIgogIGxvY2FsIGFpX3N1Z2dlc3Rpb249IiIKICBsb2NhbCB1c2VfYWk9ZmFsc2UKCiAgIyBFeHRyYWN0IEppcmEgdGlja2V0IG51bWJlciBmcm9tIGJyYW5jaCBuYW1lIGlmIHByZXNlbnQKICBpZiBbWyAiJGJyYW5jaF9uYW1lIiA9fiAuKi8oW0EtWl0rLVswLTldKykgXV07IHRoZW4KICAgICAgamlyYV90aWNrZXRfbnVtYmVyPSIke0JBU0hfUkVNQVRDSFsxXX0iCiAgICAgICMgaWYgd2UgaGF2ZSBhIGppcmEgdGlja2V0IG51bWJlciwgZXhwb3J0IGl0CiAgICAgIGV4cG9ydCBqaXJhX3RpY2tldF9udW1iZXIKICAgICAgcHJpbnRfaW5mbyAiSmlyYSBUaWNrZXQgTnVtYmVyOiAke0JXaGl0ZX0kamlyYV90aWNrZXRfbnVtYmVyJHtDb2xvcl9PZmZ9IgogIGZpCgogICMgSGFuZGxlIEFJIGNvbW1pdCBtZXNzYWdlIG1vZGVzCiAgcHJpbnRfZGVidWcgIkRFQlVHOiBhaV9tb2RlPSckYWlfbW9kZScsIGFpX3Rva2VuIGxlbmd0aD0keyNhaV90b2tlbn0iCgogICMgSWYgbm8gdG9rZW4sIGF0dGVtcHQgdG8gY3JlYXRlIGFub255bW91cyB0b2tlbiBpbW1lZGlhdGVseQogIGlmIFtbIC16ICIkYWlfdG9rZW4iIF1dOyB0aGVuCiAgICBwcmludF9kZWJ1ZyAiREVCVUc6IE5vIEFJIHRva2VuIGZvdW5kLCBhdHRlbXB0aW5nIHRvIGNyZWF0ZSBhbm9ueW1vdXMgc3Vic2NyaXB0aW9uIGZvciBmYWxsYmFjay4uLiIgImFsd2F5cyIKICAgIGlmIGNyZWF0ZV9hbm9ueW1vdXNfc3Vic2NyaXB0aW9uOyB0aGVuCiAgICAgIGFpX3Rva2VuPSIkTUFJQVNTX0FJX1RPS0VOIgogICAgICBwcmludF9kZWJ1ZyAiREVCVUc6IEFub255bW91cyB0b2tlbiBjcmVhdGVkLCBhaV90b2tlbiBsZW5ndGggbm93ICR7I2FpX3Rva2VufSIKICAgIGVsc2UKICAgICAgcHJpbnRfd2FybmluZyAiRmFpbGVkIHRvIGNyZWF0ZSBhbm9ueW1vdXMgc3Vic2NyaXB0aW9uLiBBSSBmZWF0dXJlcyB3aWxsIGJlIGRpc2FibGVkLiIKICAgICAgZXhwb3J0IGFpX21vZGU9Im9mZiIKICAgIGZpCiAgZmkKCiAgY2FzZSAiJGFpX21vZGUiIGluCiAgICAiYXNrIikKICAgICAgcHJpbnRfZGVidWcgIkRFQlVHOiBBSSBtb2RlIGlzICdhc2snIgogICAgICBpZiBbWyAtbiAiJGFpX3Rva2VuIiBdXTsgdGhlbgogICAgICAgIHByaW50X2RlYnVnICJERUJVRzogVG9rZW4gYXZhaWxhYmxlLCBzaG93aW5nIEFJIHByb21wdCIKICAgICAgICByZWFkIC1uIDEgLXMgLXAgIiQoZWNobyAtZSAke0JZZWxsb3d9V291bGQgeW91IGxpa2UgdG8gdXNlIEFJIHRvIHN1Z2dlc3QgYSBjb21taXQgbWVzc2FnZT8gW3kvTl0ke0NvbG9yX09mZn0gKSIgUkVQTFkKICAgICAgICBlY2hvCiAgICAgICAgaWYgW1sgJFJFUExZID1+IF5bWXldJCBdXTsgdGhlbgogICAgICAgICAgcHJpbnRfZGVidWcgIkRFQlVHOiBVc2VyIGNob3NlIHRvIHVzZSBBSSIKICAgICAgICAgIHVzZV9haT10cnVlCiAgICAgICAgZWxzZQogICAgICAgICAgcHJpbnRfZGVidWcgIkRFQlVHOiBVc2VyIGRlY2xpbmVkIEFJIChyZXBseT0nJFJFUExZJykiCiAgICAgICAgZmkKICAgICAgZWxzZQogICAgICAgICMgSWYgYWlfdG9rZW4gaXMgZW1wdHkgKGxlbmd0aCB6ZXJvKSBhbmQgX01BSUFTU19ORUVEX0FOT05fVE9LRU4gaXMgdHJ1ZSwgdHJ5IHRvIGNyZWF0ZSBhbm9ueW1vdXMgdG9rZW4gbm93CiAgICAgICAgaWYgW1sgLXogIiRhaV90b2tlbiIgJiYgIiRfTUFJQVNTX05FRURfQU5PTl9UT0tFTiIgPT0gInRydWUiIF1dOyB0aGVuCiAgICAgICAgICBwcmludF9kZWJ1ZyAiREVCVUc6IGFpX3Rva2VuIGxlbmd0aCBpcyB6ZXJvIGFuZCBfTUFJQVNTX05FRURfQU5PTl9UT0tFTj10cnVlLCBhdHRlbXB0aW5nIHRvIGNyZWF0ZSBhbm9ueW1vdXMgc3Vic2NyaXB0aW9uLi4uIgogICAgICAgICAgaWYgY3JlYXRlX2Fub255bW91c19zdWJzY3JpcHRpb247IHRoZW4KICAgICAgICAgICAgYWlfdG9rZW49IiRNQUlBU1NfQUlfVE9LRU4iCiAgICAgICAgICAgIHByaW50X2RlYnVnICJERUJVRzogQW5vbnltb3VzIHRva2VuIGNyZWF0ZWQgaW4gZmFsbGJhY2ssIGFpX3Rva2VuIGxlbmd0aCBub3cgJHsjYWlfdG9rZW59IgogICAgICAgICAgICBleHBvcnQgX01BSUFTU19ORUVEX0FOT05fVE9LRU49IiIKICAgICAgICAgICAgIyBOb3cgdGhhdCB3ZSBoYXZlIGEgdG9rZW4sIHNob3cgdGhlIEFJIHByb21wdAogICAgICAgICAgICBwcmludF9kZWJ1ZyAiREVCVUc6IFRva2VuIGF2YWlsYWJsZSBhZnRlciBmYWxsYmFjaywgc2hvd2luZyBBSSBwcm9tcHQiCiAgICAgICAgICAgIHJlYWQgLW4gMSAtcyAtcCAiJChlY2hvIC1lICR7QlllbGxvd31Xb3VsZCB5b3UgbGlrZSB0byB1c2UgQUkgdG8gc3VnZ2VzdCBhIGNvbW1pdCBtZXNzYWdlPyBbeS9OXSR7Q29sb3JfT2ZmfSApIiBSRVBMWQogICAgICAgICAgICBlY2hvCiAgICAgICAgICAgIGlmIFtbICRSRVBMWSA9fiBeW1l5XSQgXV07IHRoZW4KICAgICAgICAgICAgICBwcmludF9kZWJ1ZyAiREVCVUc6IFVzZXIgY2hvc2UgdG8gdXNlIEFJIgogICAgICAgICAgICAgIHVzZV9haT10cnVlCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICBwcmludF9kZWJ1ZyAiREVCVUc6IFVzZXIgZGVjbGluZWQgQUkgKHJlcGx5PSckUkVQTFknKSIKICAgICAgICAgICAgZmkKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgcHJpbnRfd2FybmluZyAiRmFpbGVkIHRvIGNyZWF0ZSBhbm9ueW1vdXMgc3Vic2NyaXB0aW9uLiBBSSBmZWF0dXJlcyB3aWxsIGJlIGRpc2FibGVkLiIKICAgICAgICAgICAgZXhwb3J0IGFpX21vZGU9Im9mZiIKICAgICAgICAgIGZpCiAgICAgICAgZWxzZQogICAgICAgICAgcHJpbnRfZGVidWcgIkRFQlVHOiBObyB0b2tlbiBhdmFpbGFibGUgZm9yIEFJIgogICAgICAgIGZpCiAgICAgIGZpCiAgICAgIDs7CiAgICAiYXV0b3N1Z2dlc3QiKQogICAgICBwcmludF9kZWJ1ZyAiREVCVUc6IEFJIG1vZGUgaXMgJ2F1dG9zdWdnZXN0JyIKICAgICAgaWYgW1sgLW4gIiRhaV90b2tlbiIgXV07IHRoZW4KICAgICAgICB1c2VfYWk9dHJ1ZQogICAgICBmaQogICAgICA7OwogICAgIm9mZiIpCiAgICAgIHByaW50X2RlYnVnICJERUJVRzogQUkgbW9kZSBpcyAnb2ZmJyIKICAgICAgdXNlX2FpPWZhbHNlCiAgICAgIDs7CiAgICAqKQogICAgICBwcmludF9kZWJ1ZyAiREVCVUc6IFVua25vd24gQUkgbW9kZSAnJGFpX21vZGUnLCBkZWZhdWx0aW5nIHRvICdhc2snIgogICAgICBhaV9tb2RlPSJhc2siCiAgICAgIGlmIFtbIC1uICIkYWlfdG9rZW4iIF1dOyB0aGVuCiAgICAgICAgdXNlX2FpPXRydWUKICAgICAgZWxzZQogICAgICAgIHByaW50X2luZm8gIkFJIGNvbW1pdCBtZXNzYWdlcyBhdmFpbGFibGUuIFNldCBNQUlBU1NfQUlfVE9LRU4gdG8gZW5hYmxlLiIgImJyaWVmIgogICAgICAgIHVzZV9haT1mYWxzZQogICAgICBmaQogICAgICA7OwogIGVzYWMKCiAgcHJpbnRfZGVidWcgIkRFQlVHOiB1c2VfYWk9JHVzZV9haSIKCiAgIyBUcnkgdG8gZ2V0IEFJIHN1Z2dlc3Rpb24gaWYgcmVxdWVzdGVkCiAgaWYgW1sgIiR1c2VfYWkiID09IHRydWUgXV07IHRoZW4KICAgIHByaW50X2RlYnVnICJHZXR0aW5nIEFJIGNvbW1pdCBtZXNzYWdlIHN1Z2dlc3Rpb24uLi4iCiAgICAKICAgIGlmIGFpX3N1Z2dlc3Rpb249JChnZXRfYWlfY29tbWl0X3N1Z2dlc3Rpb24pOyB0aGVuCiAgICAgICMgU3VjY2VzcyAtIHdlIGdvdCBhIHZhbGlkIEFJIHN1Z2dlc3Rpb24KICAgICAgcHJpbnRfaW5mbyAiJHtCTWFnZW50YX1Db21taXQgbWVzc2FnZSBzdWdnZXN0aW9uIGZyb20gTUFJQVNTOiIKICAgICAgIyBPbmx5IHJlbW92ZSBjYXJyaWFnZSByZXR1cm5zLCBxdW90ZXMgYXJlIGFscmVhZHkgaGFuZGxlZCBpbiB0aGUgQUkgZnVuY3Rpb24KICAgICAgYWlfc3VnZ2VzdGlvbj0iJChlY2hvICIkYWlfc3VnZ2VzdGlvbiIgfCBzZWQgJ3MvXHIkLy8nKSIKICAgICAgaWYgW1sgLW4gIiR0b3RhbF90b2tlbnMiICYmICIkdG90YWxfdG9rZW5zIiAhPSAibnVsbCIgJiYgIiR0b3RhbF90b2tlbnMiICE9ICJlbXB0eSIgXV07IHRoZW4KICAgICAgICBwcmludF9hbHdheXMgIlRva2VuIHVzYWdlOiAke3RvdGFsX3Rva2Vuc30gdG90YWwgKCR7cHJvbXB0X3Rva2VuczotMH0gcHJvbXB0ICsgJHtjb21wbGV0aW9uX3Rva2VuczotMH0gY29tcGxldGlvbikiCiAgICAgIGZpCiAgICAgIHByaW50X2dyYWRpZW50X2xpbmUgNTAKICAgICAgZWNobyAtZSAiJHtCb2xkfSR7UmV2ZXJzZX0kYWlfc3VnZ2VzdGlvbiR7Q29sb3JfT2ZmfSIKICAgICAgcHJpbnRfZ3JhZGllbnRfbGluZSA1MAogICAgICBlY2hvCgogICAgICAjIEFzayB1c2VyIGlmIHRoZXkgd2FudCB0byB1c2UgdGhlIEFJIHN1Z2dlc3Rpb24KICAgICAgcmVhZCAtbiAxIC1zIC1wICIkKGVjaG8gLWUgJHtCWWVsbG93fVVzZSB0aGlzIEFJIHN1Z2dlc3Rpb24/IFtZL24vZT1lZGl0XSR7Q29sb3JfT2ZmfSApIiBSRVBMWQogICAgICBlY2hvCgogICAgICBjYXNlICIkUkVQTFkiIGluCiAgICAgICAgW05uXSkKICAgICAgICAgIHByaW50X2luZm8gIkFJIHN1Z2dlc3Rpb24gZGVjbGluZWQsIGVudGVyaW5nIG1hbnVhbCBtb2RlIiAiYnJpZWYiCiAgICAgICAgICB1c2VfYWk9ZmFsc2UKICAgICAgICAgIDs7CiAgICAgICAgW0VlXSkKICAgICAgICAgIHByaW50X2luZm8gIkVkaXQgbW9kZTogWW91IGNhbiBtb2RpZnkgdGhlIEFJIHN1Z2dlc3Rpb24iICJicmllZiIKICAgICAgICAgIGVjaG8gLWUgIiR7QkN5YW59Q3VycmVudCBBSSBzdWdnZXN0aW9uOiR7Q29sb3JfT2ZmfSIKICAgICAgICAgIGVjaG8gLWUgIiR7QldoaXRlfSRhaV9zdWdnZXN0aW9uJHtDb2xvcl9PZmZ9IgogICAgICAgICAgZWNobwogICAgICAgICAgZWNobyAtZSAiJHtCQ3lhbn1FbnRlciB5b3VyIG1vZGlmaWVkIGNvbW1pdCBtZXNzYWdlIChwcmVzcyBFbnRlciB0aHJlZSB0aW1lcyB3aGVuIGZpbmlzaGVkLCBvciBqdXN0IEVudGVyIHRvIGtlZXAgQUkgc3VnZ2VzdGlvbik6JHtDb2xvcl9PZmZ9IgoKICAgICAgICAgICMgUmVhZCBtdWx0aS1saW5lIGlucHV0CiAgICAgICAgICBjb21taXRfbWVzc2FnZT0iIgogICAgICAgICAgbGluZV9jb3VudD0wCiAgICAgICAgICBlbXB0eV9saW5lX2NvdW50PTAKICAgICAgICAgIHdoaWxlIHRydWU7IGRvCiAgICAgICAgICAgIHJlYWQgLXIgbGluZQogICAgICAgICAgICBpZiBbWyAteiAiJGxpbmUiIF1dOyB0aGVuCiAgICAgICAgICAgICAgZW1wdHlfbGluZV9jb3VudD0kKChlbXB0eV9saW5lX2NvdW50ICsgMSkpCiAgICAgICAgICAgICAgaWYgW1sgJGxpbmVfY291bnQgLWVxIDAgJiYgJGVtcHR5X2xpbmVfY291bnQgLWVxIDEgXV07IHRoZW4KICAgICAgICAgICAgICAgICMgRmlyc3QgZW1wdHkgbGluZSB3aXRoIG5vIGlucHV0IC0gdXNlIEFJIHN1Z2dlc3Rpb24KICAgICAgICAgICAgICAgIGNvbW1pdF9tZXNzYWdlPSIkYWlfc3VnZ2VzdGlvbiIKICAgICAgICAgICAgICAgIHByaW50X2luZm8gIlVzaW5nIG9yaWdpbmFsIEFJIHN1Z2dlc3Rpb24iCiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgIGVsaWYgW1sgJGVtcHR5X2xpbmVfY291bnQgLWdlIDIgXV07IHRoZW4KICAgICAgICAgICAgICAgICMgVHdvIGNvbnNlY3V0aXZlIGVtcHR5IGxpbmVzICh0aHJlZSBFbnRlciBwcmVzc2VzKSAtIGZpbmlzaCBpbnB1dAogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICBmaQogICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAjIFJlc2V0IGVtcHR5IGxpbmUgY291bnRlciB3aGVuIHdlIGdldCBub24tZW1wdHkgaW5wdXQKICAgICAgICAgICAgICBlbXB0eV9saW5lX2NvdW50PTAKICAgICAgICAgICAgZmkKICAgICAgICAgICAgaWYgW1sgJGxpbmVfY291bnQgLWd0IDAgXV07IHRoZW4KICAgICAgICAgICAgICBjb21taXRfbWVzc2FnZSs9JCdcbicKICAgICAgICAgICAgZmkKICAgICAgICAgICAgY29tbWl0X21lc3NhZ2UrPSIkbGluZSIKICAgICAgICAgICAgKChsaW5lX2NvdW50KyspKQogICAgICAgICAgZG9uZQogICAgICAgICAgOzsKICAgICAgICAqKQogICAgICAgICAgIyBEZWZhdWx0OiBhY2NlcHQgQUkgc3VnZ2VzdGlvbgogICAgICAgICAgY29tbWl0X21lc3NhZ2U9IiRhaV9zdWdnZXN0aW9uIgogICAgICAgICAgOzsKICAgICAgZXNhYwogICAgZWxzZQogICAgICBwcmludF93YXJuaW5nICJBSSBzdWdnZXN0aW9uIGZhaWxlZCwgZmFsbGluZyBiYWNrIHRvIG1hbnVhbCBlbnRyeSIKICAgICAgdXNlX2FpPWZhbHNlCiAgICBmaQogIGZpCgogICMgTWFudWFsIGNvbW1pdCBtZXNzYWdlIGVudHJ5IGlmIEFJIG5vdCB1c2VkIG9yIGZhaWxlZAogIGlmIFtbICIkdXNlX2FpIiA9PSBmYWxzZSAmJiAteiAiJGNvbW1pdF9tZXNzYWdlIiBdXTsgdGhlbgogICAgaWYgW1sgLW4gIiRqaXJhX3RpY2tldF9udW1iZXIiIF1dOyB0aGVuCiAgICAgIHByaW50X2luZm8gIkVudGVyIGEgY29tbWl0IG1lc3NhZ2UgJHtCV2hpdGV9KEppcmEgdGlja2V0ICRqaXJhX3RpY2tldF9udW1iZXIgd2lsbCBiZSBwcmVwZW5kZWQpJHtDb2xvcl9PZmZ9IgogICAgZWxzZQogICAgICBwcmludF9pbmZvICJFbnRlciBhIGNvbW1pdCBtZXNzYWdlICR7QldoaXRlfShzdGFydGluZyB3aXRoIEppcmEgVGlja2V0IyB3aGVuIHJlbGV2YW50KSR7Q29sb3JfT2ZmfSIKICAgICAgcHJpbnRfaW5mbyAiUGxlYXNlIGVudGVyIGEgdGlja2V0IG51bWJlciBvciAnZml4Oicgb3IgJ2ZlYXR1cmU6JyBvciAnZGV2b3BzOicgdG8gc3RhcnQgdGhlIGNvbW1pdCBtZXNzYWdlIgogICAgZmkKCiAgICBlY2hvIC1lICIke0JDeWFufUVudGVyICR7QlllbGxvd31tdWx0aXBsZSBsaW5lcyR7QkN5YW59IChwcmVzcyBFbnRlciAke0JZZWxsb3d9dGhyZWUgdGltZXMke0JDeWFufSB0byBmaW5pc2gpJHtDb2xvcl9PZmZ9OiIKCiAgICBjb21taXRfbWVzc2FnZT0iIgogICAgZmlyc3RfbGluZT10cnVlCiAgICBlbXB0eV9saW5lX2NvdW50PTAKICAgIHdoaWxlIHRydWU7IGRvCiAgICAgICAgcmVhZCAtciBsaW5lCiAgICAgICAgIyBDaGVjayBmb3IgZW1wdHkgbGluZQogICAgICAgIGlmIFtbIC16ICIkbGluZSIgXV07IHRoZW4KICAgICAgICAgICAgZW1wdHlfbGluZV9jb3VudD0kKChlbXB0eV9saW5lX2NvdW50ICsgMSkpCiAgICAgICAgICAgICMgTmVlZCB0d28gY29uc2VjdXRpdmUgZW1wdHkgbGluZXMgKHRocmVlIEVudGVyIHByZXNzZXMpIHRvIGZpbmlzaAogICAgICAgICAgICBpZiBbWyAkZW1wdHlfbGluZV9jb3VudCAtZ2UgMiBdXTsgdGhlbgogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgZmkKICAgICAgICAgICAgY29udGludWUKICAgICAgICBlbHNlCiAgICAgICAgICAgICMgUmVzZXQgZW1wdHkgbGluZSBjb3VudGVyIHdoZW4gd2UgZ2V0IG5vbi1lbXB0eSBpbnB1dAogICAgICAgICAgICBlbXB0eV9saW5lX2NvdW50PTAKICAgICAgICBmaQogICAgICAgIGlmIFtbICIkZmlyc3RfbGluZSIgPT0gdHJ1ZSBdXTsgdGhlbgogICAgICAgICAgICAjIEZpcnN0IGxpbmUgaXMgdGhlIHN1YmplY3QgLSBkbyBOT1QgYXV0by1wcmVwZW5kIGEgYnVsbGV0OyBhZGQgd2l0aCBkb3VibGUgbmV3bGluZSBmb3IgcHJvcGVyIGdpdCBmb3JtYXQKICAgICAgICAgICAgY29tbWl0X21lc3NhZ2UrPSIkbGluZSIkJ1xuXG4nCiAgICAgICAgICAgIGZpcnN0X2xpbmU9ZmFsc2UKICAgICAgICBlbHNlCiAgICAgICAgICAgICMgU3Vic2VxdWVudCBsaW5lczogYXV0by1wcmVwZW5kIGJ1bGxldCBpZiBub3QgYWxyZWFkeSBwcmVzZW50LCB0aGVuIGFkZCB3aXRoIHRhYiBpbmRlbnQgYW5kIHNpbmdsZSBuZXdsaW5lCiAgICAgICAgICAgIGlmIFtbICEgIiRsaW5lIiA9fiBeW1s6c3BhY2U6XV0qLVtbOnNwYWNlOl1dIF1dOyB0aGVuCiAgICAgICAgICAgICAgICBsaW5lPSItICRsaW5lIgogICAgICAgICAgICBmaQogICAgICAgICAgICBjb21taXRfbWVzc2FnZSs9IiAgICAkbGluZSIkJ1xuJwoKICAgICAgICBmaQogICAgZG9uZQogICAgIyBSZW1vdmUgb25lIHRyYWlsaW5nIG5ld2xpbmUgaWYgcHJlc2VudDoKICAgIGNvbW1pdF9tZXNzYWdlPSIke2NvbW1pdF9tZXNzYWdlJSQnXG4nfSIKICBmaQogIGludGVybmFsX2NvbW1pdF9tZXNzYWdlPSJbJChnaXQgY29uZmlnIHVzZXIubmFtZSldICRjb21taXRfbWVzc2FnZSIKICAjIFByZXBlbmQgSmlyYSB0aWNrZXQgbnVtYmVyIGlmIGZvdW5kIGFuZCBub3QgYWxyZWFkeSBwcmVzZW50CiAgaWYgW1sgLW4gIiRqaXJhX3RpY2tldF9udW1iZXIiICYmICEgIiRjb21taXRfbWVzc2FnZSIgPX4gXiRqaXJhX3RpY2tldF9udW1iZXIgXV07IHRoZW4KICAgIGNvbW1pdF9tZXNzYWdlPSIkamlyYV90aWNrZXRfbnVtYmVyICRjb21taXRfbWVzc2FnZSIKICAgIGludGVybmFsX2NvbW1pdF9tZXNzYWdlPSIkamlyYV90aWNrZXRfbnVtYmVyICRpbnRlcm5hbF9jb21taXRfbWVzc2FnZSIKICBmaQogICMgcHJlcGVuZCB3aXRoIGF1dGhvciBvZiBjb21taXQKICAjIEFib3J0IGlmIHRoZSBjb21taXQgbWVzc2FnZSBpcyBzdGlsbCBlbXB0eQogIGlmIFtbIC16ICIkY29tbWl0X21lc3NhZ2UiIF1dOyB0aGVuCiAgICAgIGVjaG8gIkFib3J0aW5nIGNvbW1pdCBkdWUgdG8gZW1wdHkgY29tbWl0IG1lc3NhZ2UuIgogICAgICBleGl0IDEKICBmaQoKICAjIEV4cG9ydCB0aGUgY29tbWl0IG1lc3NhZ2UgYW5kIGppcmEgdGlja2V0IG51bWJlciBmb3IgdXNlIGJ5IGNhbGxpbmcgZnVuY3Rpb24KICBleHBvcnQgaW50ZXJuYWxfY29tbWl0X21lc3NhZ2UKICBleHBvcnQgY29tbWl0X21lc3NhZ2UKICBleHBvcnQgamlyYV90aWNrZXRfbnVtYmVyCn0KCnJ1bl9haV9jb21taXRfb25seSgpIHsKICBlY2hvICJ0aGlzIGZlYXR1cmUgaXMgbm90IHlldCBzdXBwb3J0ZWQiCn0KCmhhbmRsZV9zdGFnZWRfY29tbWl0KCkgewogICAgICAgICAgcHJpbnRfaW5mbyAiU3RhZ2VkIGNoYW5nZXMgZGV0ZWN0ZWQ6IgogICAgICAgICAgZ2l0IGRpZmYgLS1jYWNoZWQgLS1uYW1lLXN0YXR1cwoKICAgICAgICAgIGdldF9jb21taXRfbWVzc2FnZQogICAgICAgICAgIyBVc2UgZ2l0IGNvbW1pdCAtRiAtIHRvIHByb3Blcmx5IGhhbmRsZSBtdWx0aS1saW5lIGNvbW1pdCBtZXNzYWdlcwoKICAgICAgICAgICMgRm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHksIHRyZWF0IGRlYnVnX21vZGU9dHJ1ZSBhcyB2ZXJib3NpdHlfbGV2ZWw9ZGVidWcKICAgICAgICAgIGlmIFtbICIkZGVidWdfbW9kZSIgPT0gInRydWUiICYmICIkdmVyYm9zaXR5X2xldmVsIiAhPSAiZGVidWciIF1dOyB0aGVuCiAgICAgICAgICAgICMgT25seSBsb2cgdGhpcyB3aGVuIG5vdCBhbHJlYWR5IGluIGRlYnVnIHZlcmJvc2l0eSB0byBhdm9pZCBub2lzZQogICAgICAgICAgICBsb2dfbWVzc2FnZSAiREVQUkVDQVRFRDogVXNpbmcgZGVidWdfbW9kZT10cnVlIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgTUFJQVNTX1ZFUkJPU0lUWT1kZWJ1ZyBpbnN0ZWFkLiIKICAgICAgICAgICAgIyBUcmVhdCBhcyBpZiB2ZXJib3NpdHlfbGV2ZWwgaXMgZGVidWcKICAgICAgICAgICAgbG9jYWwgZWZmZWN0aXZlX3ZlcmJvc2l0eT0iZGVidWciCiAgICAgICAgICBlbHNlCiAgICAgICAgICAgIGxvY2FsIGVmZmVjdGl2ZV92ZXJib3NpdHk9IiR2ZXJib3NpdHlfbGV2ZWwiCiAgICAgICAgICBmaQoKICAgICAgICAgIGlmIFtbICIkZWZmZWN0aXZlX3ZlcmJvc2l0eSIgPT0gImRlYnVnIiBdXTsgdGhlbgogICAgICAgICAgICAjIGxlYXZlIHRoaXMgZm9yIGZ1dHVyZSBkZWJ1Z2dpbmcKICAgICAgICAgICAgZWNobyAiJGNvbW1pdF9tZXNzYWdlIiB8IGdpdCBjb21taXQgLUYgLSA+L2Rldi9udWxsIDI+JjEKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgZWNobyAiJGNvbW1pdF9tZXNzYWdlIiB8IGdpdCBjb21taXQgLUYgLSA+L2Rldi9udWxsIDI+JjEKICAgICAgICAgIGZpCgogICAgICAgICAgY2hlY2tfZ2l0X3N1Y2Nlc3MKICAgICAgICAgIHRhZ21lc3NhZ2U9JGNvbW1pdF9tZXNzYWdlCiAgICAgICAgICBleHBvcnQgdGFnbWVzc2FnZQogICAgICAgICAgcHJpbnRfc3VjY2VzcyAiQ2hhbmdlcyBjb21taXR0ZWQgc3VjY2Vzc2Z1bGx5IgogICAgICAgICAgIyBTYW5pdGl6ZSBjb21taXQgbWVzc2FnZSBmb3IgQ1NWL0dvb2dsZSBTaGVldHMgY29tcGF0aWJpbGl0eQogICAgICAgICAgIyBSZXBsYWNlIGFsbCBuZXdsaW5lcyB3aXRoIHNlbWljb2xvbnMgYW5kIGEgc3BhY2UKICAgICAgICAgIGxvY2FsIGRldmxvZ19tZXNzYWdlPSIke2NvbW1pdF9tZXNzYWdlLy8kJ1xuJy87IH0iCgogICAgICAgICAgIyBFc2NhcGUgZG91YmxlIHF1b3RlcyBpZiBuZWVkZWQKICAgICAgICAgIGRldmxvZ19tZXNzYWdlPSIke2RldmxvZ19tZXNzYWdlLy9cIi9cXFwifSIKICAgICAgICAgIGxvZ3RoaXMgIiR7Y29tbWl0X21lc3NhZ2UvLyQnXG4nLzsgfSIKICAgICAgICAgIGlmIHJlbW90ZV9leGlzdHMgIm9yaWdpbiI7IHRoZW4KICAgICAgICAgICAgIyB5IHRvIHB1c2ggdXBzdHJlYW0KICAgICAgICAgICAgcmVhZCAtbiAxIC1zIC1wICIkKGVjaG8gLWUgJHtCWWVsbG93fURvIHlvdSB3YW50IHRvIHB1c2ggdGhpcyBjb21taXQgdG8gcmVtb3RlPyBbeS9OXSR7Q29sb3JfT2ZmfSApIiBSRVBMWQogICAgICAgICAgICBlY2hvCiAgICAgICAgICAgIGlmIFtbICRSRVBMWSA9fiBeW1l5XSQgXV07IHRoZW4KICAgICAgICAgICAgICBydW5fZ2l0X2NvbW1hbmQgImdpdCBwdXNoIC0tc2V0LXVwc3RyZWFtIG9yaWdpbiAnJGJyYW5jaF9uYW1lJyIgImRlYnVnIgogICAgICAgICAgICAgIGNoZWNrX2dpdF9zdWNjZXNzCiAgICAgICAgICAgICAgZWNobyAtZSAiJHtCR3JlZW59Q29tbWl0IHB1c2hlZC4ke0NvbG9yX09mZn0iCiAgICAgICAgICAgIGZpCiAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHByaW50X3dhcm5pbmcgIk5vIHJlbW90ZSBmb3VuZC4iCiAgICAgICAgICBmaQp9CgpvZmZlcl90b19zdGFnZV9jaGFuZ2VzKCkgewogIHByaW50X3dhcm5pbmcgIk5vIHN0YWdlZCBjaGFuZ2VzIGZvdW5kLCBidXQgdGhlcmUgYXJlIHVuY29tbWl0dGVkIGNoYW5nZXMuIgogIHJlYWQgLW4gMSAtcyAtcCAiJChlY2hvIC1lICR7QlllbGxvd31EbyB5b3Ugd2FudCB0byBzdGFnZSBhbGwgY2hhbmdlcyBhbmQgY29tbWl0PyBbeS9OXSR7Q29sb3JfT2ZmfSApIiBSRVBMWQogIGVjaG8KICBpZiBbWyAkUkVQTFkgPX4gXltZeV0kIF1dOyB0aGVuCiAgICBnaXQgYWRkIC1BCiAgICBoYW5kbGVfc3RhZ2VkX2NvbW1pdAogIGVsc2UKICAgIHByaW50X2Vycm9yICJBYm9ydGluZy4gTm8gc3RhZ2VkIGNoYW5nZXMgdG8gY29tbWl0LiIKICAgIGV4aXQgMQogIGZpCn0KCmNoZWNrX2dpdF9jb21taXRfc3RhdHVzKCkgewogIHByaW50X3NlY3Rpb24gIkNoZWNraW5nIEdpdCBTdGF0dXMiCiAgaWYgaGFzX3N0YWdlZF9jaGFuZ2VzOyB0aGVuCiAgICBoYW5kbGVfc3RhZ2VkX2NvbW1pdAogIGVsaWYgaGFzX3VuY29tbWl0dGVkX2NoYW5nZXM7IHRoZW4KICAgIG9mZmVyX3RvX3N0YWdlX2NoYW5nZXMKICBlbHNlCiAgICBlY2hvIC1lICIke0JHcmVlbn1Ob3RoaW5nIHRvIGNvbW1pdC4gV29ya2luZyBkaXJlY3RvcnkgY2xlYW4uJHtDb2xvcl9PZmZ9IgogICAgZXhpdCAwCiAgZmkKfQojIENoZWNrIGZvciB1bmNvbW1pdHRlZCBjaGFuZ2VzIGFuZCBvZmZlciB0byBjb21taXQgdGhlbQpmdW5jdGlvbiBjaGVja1VuY29tbWl0dGVkQ2hhbmdlcygpewogIHByaW50X2RlYnVnICJDaGVja2luZyBmb3IgQ2hhbmdlcyIKICAKICBsb2NhbCBoYXNfc3RhZ2VkIGhhc191bnN0YWdlZAogIGhhc19zdGFnZWQ9JChoYXNfc3RhZ2VkX2NoYW5nZXMgJiYgZWNobyAidHJ1ZSIgfHwgZWNobyAiZmFsc2UiKQogIGhhc191bnN0YWdlZD0kKGhhc191bnN0YWdlZF9jaGFuZ2VzICYmIGVjaG8gInRydWUiIHx8IGVjaG8gImZhbHNlIikKICAKICBwcmludF9kZWJ1ZyAiQ2hhbmdlIGRldGVjdGlvbjogc3RhZ2VkPSRoYXNfc3RhZ2VkLCB1bnN0YWdlZD0kaGFzX3Vuc3RhZ2VkLCBhaV9jb21taXRzX29ubHk9JHthaV9jb21taXRzX29ubHk6LXVuc2V0fSIKICAKICAjIElmIHRoZXJlIGFyZSB1bnN0YWdlZCBjaGFuZ2VzLCB3ZSBtdXN0IGZvcmNlIGNvbW1pdHMtb25seSBtb2RlCiAgaWYgW1sgJGhhc191bnN0YWdlZCA9PSAidHJ1ZSIgXV07IHRoZW4KICAgIHByaW50X3dhcm5pbmcgIlRoZXJlIGFyZSB1bnN0YWdlZCBjaGFuZ2VzIGluIHlvdXIgd29ya2luZyBkaXJlY3RvcnkiCiAgICByZWFkIC1uIDEgLXMgLXAgIiQoZWNobyAtZSAke0JZZWxsb3d9RG8geW91IHdhbnQgdG8gJHtCUmVkfXN0YWdlIGFuZCBjb21taXQke0JZZWxsb3d9IHRoZW0/IFt5L05dJHtDb2xvcl9PZmZ9ICkiIFJFUExZCiAgICBlY2hvCiAgICBpZiBbWyAkUkVQTFkgPX4gXltZeV0kIF1dOyB0aGVuCiAgICAgIGdpdCBhZGQgLUEKICAgICAgaGFuZGxlX3N0YWdlZF9jb21taXQKICAgICAgCiAgICAgICMgQ2hlY2sgaWYgd29ya2luZyBkaXJlY3RvcnkgaXMgbm93IGNsZWFuIGFmdGVyIHN0YWdpbmcgYW5kIGNvbW1pdHRpbmcKICAgICAgaWYgISBoYXNfdW5zdGFnZWRfY2hhbmdlczsgdGhlbgogICAgICAgICMgV29ya2luZyBkaXJlY3RvcnkgaXMgY2xlYW4sIGNoZWNrIGlmIHVzZXIgd2FudHMgY29tbWl0cy1vbmx5IG1vZGUKICAgICAgICBpZiBbWyAkYWlfY29tbWl0c19vbmx5ID09ICd0cnVlJyBdXTsgdGhlbgogICAgICAgICAgcHJpbnRfc3VjY2VzcyAiQ29tbWl0IHByb2Nlc3MgY29tcGxldGVkIChjb21taXRzLW9ubHkgbW9kZSkuIgogICAgICAgICAgcHJpbnRfc2lnbm9mZl93aXRoX3RvcHVwCiAgICAgICAgICBleGl0IDAKICAgICAgICBlbHNlCiAgICAgICAgICBwcmludF9zdWNjZXNzICJDb21taXQgcHJvY2VzcyBjb21wbGV0ZWQuIFByb2NlZWRpbmcgd2l0aCBtZXJnZS9yZWxlYXNlIHBpcGVsaW5lLi4uIgogICAgICAgICAgcmV0dXJuIDAgICMgQ29udGludWUgdG8gbWVyZ2UvcmVsZWFzZSBwaXBlbGluZQogICAgICAgIGZpCiAgICAgIGVsc2UKICAgICAgICAjIFN0aWxsIGhhdmUgdW5zdGFnZWQgY2hhbmdlcyBhZnRlciBjb21taXQKICAgICAgICBwcmludF9zdWNjZXNzICJDb21taXQgcHJvY2VzcyBjb21wbGV0ZWQuIgogICAgICAgIHByaW50X2luZm8gIkNhbm5vdCBwcm9jZWVkIHdpdGggbWVyZ2UvcmVsZWFzZSBwaXBlbGluZSAtIHVuc3RhZ2VkIGNoYW5nZXMgcmVtYWluIGluIHdvcmtpbmcgZGlyZWN0b3J5IgogICAgICAgIHByaW50X2luZm8gIlRvIGNvbnRpbnVlIHdpdGggbWVyZ2UvcmVsZWFzZSBwaXBlbGluZSwgY29tbWl0IG9yIHN0YXNoIGFsbCBjaGFuZ2VzIGZpcnN0IgogICAgICAgIHByaW50X3NpZ25vZmZfd2l0aF90b3B1cAogICAgICAgIGV4aXQgMAogICAgICBmaQogICAgZWxzZQogICAgICAjIFVzZXIgY2hvc2Ugbm90IHRvIHN0YWdlIHVuc3RhZ2VkIGNoYW5nZXMKICAgICAgaWYgW1sgJGhhc19zdGFnZWQgPT0gInRydWUiIF1dOyB0aGVuCiAgICAgICAgcHJpbnRfaW5mbyAiQ29tbWl0dGluZyBzdGFnZWQgY2hhbmdlcyBvbmx5ICh1bnN0YWdlZCBjaGFuZ2VzIHJlbWFpbikiCiAgICAgICAgaGFuZGxlX3N0YWdlZF9jb21taXQKICAgICAgZmkKICAgICAgCiAgICAgICMgRm9yY2UgZXhpdCBzaW5jZSB1bnN0YWdlZCBjaGFuZ2VzIHJlbWFpbgogICAgICBwcmludF9zdWNjZXNzICJDb21taXQgcHJvY2VzcyBjb21wbGV0ZWQuIgogICAgICBwcmludF9pbmZvICJDYW5ub3QgcHJvY2VlZCB3aXRoIG1lcmdlL3JlbGVhc2UgcGlwZWxpbmUgLSB1bnN0YWdlZCBjaGFuZ2VzIHJlbWFpbiBpbiB3b3JraW5nIGRpcmVjdG9yeSIKICAgICAgcHJpbnRfaW5mbyAiVG8gY29udGludWUgd2l0aCBtZXJnZS9yZWxlYXNlIHBpcGVsaW5lLCBjb21taXQgb3Igc3Rhc2ggYWxsIGNoYW5nZXMgZmlyc3QiCiAgICAgIHByaW50X3NpZ25vZmZfd2l0aF90b3B1cAogICAgICBleGl0IDAKICAgIGZpCiAgICAKICAjIElmIG9ubHkgc3RhZ2VkIGNoYW5nZXMsIHByb2NlZWQgbm9ybWFsbHkKICBlbGlmIFtbICRoYXNfc3RhZ2VkID09ICJ0cnVlIiBdXTsgdGhlbgogICAgcHJpbnRfaW5mbyAiRm91bmQgc3RhZ2VkIGNoYW5nZXMgcmVhZHkgZm9yIGNvbW1pdCIKICAgIGhhbmRsZV9zdGFnZWRfY29tbWl0CiAgICAKICAgICMgQ2hlY2sgaWYgdXNlciBoYXMgY29tbWl0cy1vbmx5IG1vZGUgZW5hYmxlZAogICAgaWYgW1sgJGFpX2NvbW1pdHNfb25seSA9PSAndHJ1ZScgXV07IHRoZW4KICAgICAgcHJpbnRfc3VjY2VzcyAiQ29tbWl0IHByb2Nlc3MgY29tcGxldGVkIChjb21taXRzLW9ubHkgbW9kZSkuIgogICAgICBwcmludF9zaWdub2ZmX3dpdGhfdG9wdXAKICAgICAgZXhpdCAwCiAgICBlbHNlCiAgICAgIHByaW50X3N1Y2Nlc3MgIkNvbW1pdCBwcm9jZXNzIGNvbXBsZXRlZC4gUHJvY2VlZGluZyB3aXRoIG1lcmdlL3JlbGVhc2UgcGlwZWxpbmUuLi4iCiAgICBmaQogICAgCiAgIyBObyBjaGFuZ2VzIGF0IGFsbAogIGVsc2UKICAgIGlmIFtbICRhaV9jb21taXRzX29ubHkgPT0gJ3RydWUnIF1dOyB0aGVuCiAgICAgIHByaW50X2luZm8gIk5vIGNoYW5nZXMgZm91bmQgKGNvbW1pdHMtb25seSBtb2RlKS4iCiAgICAgIHByaW50X3NpZ25vZmZfd2l0aF90b3B1cAogICAgICBleGl0IDAKICAgIGVsc2UKICAgICAgcHJpbnRfaW5mbyAiTm8gY2hhbmdlcyBmb3VuZC4gUHJvY2VlZGluZyB3aXRoIG1lcmdlL3JlbGVhc2UgcGlwZWxpbmUuLi4iCiAgICBmaQogIGZpCn0KCmZpICMgX19TUkNfX1ZvbHVtZXNfZW5pZ21hZGV2X2VuaWdtYWRldl9zdGF0aWNfbWFpYXNzX3dob2xlX2Jhc2htYWlhc3NfbGliX2NvcmVfY29tbWl0X3NoCiMgLS0tIEVuZCBpbmxpbmVkOiAvVm9sdW1lcy9lbmlnbWFkZXYvZW5pZ21hZGV2L3N0YXRpYy9tYWlhc3Mtd2hvbGUvYmFzaG1haWFzcy9saWIvY29yZS9jb21taXQuc2ggLS0tCgojIC0tLSBCZWdpbiBpbmxpbmVkOiAvVm9sdW1lcy9lbmlnbWFkZXYvZW5pZ21hZGV2L3N0YXRpYy9tYWlhc3Mtd2hvbGUvYmFzaG1haWFzcy9saWIvdXRpbHMvaGVscC5zaCAtLS0KaWYgW1sgLXogIiR7X19TUkNfX1ZvbHVtZXNfZW5pZ21hZGV2X2VuaWdtYWRldl9zdGF0aWNfbWFpYXNzX3dob2xlX2Jhc2htYWlhc3NfbGliX3V0aWxzX2hlbHBfc2g6LX0iIF1dOyB0aGVuIF9fU1JDX19Wb2x1bWVzX2VuaWdtYWRldl9lbmlnbWFkZXZfc3RhdGljX21haWFzc193aG9sZV9iYXNobWFpYXNzX2xpYl91dGlsc19oZWxwX3NoPTEKCiMgRnVuY3Rpb24gdG8gZGlzcGxheSBoZWxwIGluZm9ybWF0aW9uCnNob3dfaGVscCgpIHsKICAjIERlZmluZSBjb2xvcnMgZm9yIGhlbHAgb3V0cHV0CiAgbG9jYWwgQkJsdWU9J1wwMzNbMTszNG0nCiAgbG9jYWwgQldoaXRlPSdcMDMzWzE7MzdtJwogIGxvY2FsIEJHcmVlbj0nXDAzM1sxOzMybScKICBsb2NhbCBCWWVsbG93PSdcMDMzWzE7MzNtJwogIGxvY2FsIEJSZWQ9J1wwMzNbMTszMW0nCiAgbG9jYWwgQkN5YW49J1wwMzNbMTszNm0nCiAgbG9jYWwgQ29sb3JfT2ZmPSdcMDMzWzBtJwogIGxvY2FsIEJMaW1lPSdcMDMzWzE7MzJtJwogIGxvY2FsIEdyYXk9IlwwMzNbMDszN20iICAjIEdyYXkgZm9yIGRlZmF1bHQgdGV4dAoKICBlY2hvIC1lICIke0JCbHVlfSIKICAgY2F0IDw8LSdFT0YnCiAgICAgICAg4paE4paEICAg4paE4paEIOKWhOKWhOKWhOKWhOKWhOKWhOKWhCDiloTiloTiloQg4paE4paE4paE4paE4paE4paE4paEIOKWhOKWhOKWhOKWhOKWhOKWhOKWhCDiloTiloTiloTiloTiloTiloTiloQKICAgICAgIOKWiCAg4paI4paE4paIICDiloggICAgICAg4paIICAg4paIICAgICAgIOKWiCAgICAgICDiloggICAgICAg4paICiAgICAgICDiloggICAgICAg4paIICAg4paEICAg4paIICAg4paIICAg4paEICAg4paIICDiloTiloTiloTiloTiloTiloggIOKWhOKWhOKWhOKWhOKWhOKWiAogICAgICAg4paIICAgICAgIOKWiCAg4paI4paE4paIICDiloggICDiloggIOKWiOKWhOKWiCAg4paIIOKWiOKWhOKWhOKWhOKWhOKWhOKWiCDilojiloTiloTiloTiloTiloQKICAgICAgIOKWiCAgICAgICDiloggICAgICAg4paIICAg4paIICAgICAgIOKWiOKWhOKWhOKWhOKWhOKWhCAg4paI4paE4paE4paE4paE4paEICDilogKICAgICAgIOKWiCDilojilojiloTilojilogg4paIICAg4paEICAg4paIICAg4paIICAg4paEICAg4paI4paE4paE4paE4paE4paE4paIIOKWiOKWhOKWhOKWhOKWhOKWhOKWiCDilogKICAgICAgIOKWiOKWhOKWiCAgIOKWiOKWhOKWiOKWhOKWhOKWiCDilojiloTiloTilojiloTiloTiloTilojiloTiloTilogg4paI4paE4paE4paI4paE4paE4paE4paE4paE4paE4paE4paI4paE4paE4paE4paE4paE4paE4paE4paICkVPRgogIGVjaG8gLWUgIiR7QkFxdWF9XG4gICAgICAgTW9kdWxhciBBSS1BdWdtZW50ZWQgU2VtYW50aWMgU2NyaWJlXG4ke0JZZWxsb3d9XG4gICAgICAgKiBBSSBDb21taXQgTWVzc2FnZXNcbiR7QkxpbWV9ICAgICAgICogSW50ZWxsaWdlbnQgR2l0IFdvcmtmbG93IEF1dG9tYXRpb24ke0NvbG9yX09mZn1cbiIKCiAgZWNobyAtZSAiJHtCV2hpdGV9REVTQ1JJUFRJT046JHtDb2xvcl9PZmZ9IgogIGVjaG8gLWUgIiAgQXV0b21hdGVkIHZlcnNpb24gYnVtcGluZyBhbmQgY2hhbmdlbG9nIG1hbmFnZW1lbnQgc2NyaXB0IHRoYXQgbWFpbnRhaW5zIgogIGVjaG8gLWUgIiAgdGhlIGRldmVsb3AgYnJhbmNoIGFzIHRoZSBzb3VyY2Ugb2YgdHJ1dGggZm9yIHZlcnNpb25pbmcuIEludGVncmF0ZXMgd2l0aCIKICBlY2hvIC1lICIgIEFJLXBvd2VyZWQgY29tbWl0IG1lc3NhZ2VzIGFuZCBzdXBwb3J0cyBtdWx0aS1yZXBvc2l0b3J5IHdvcmtmbG93cy5cbiIKCiAgZWNobyAtZSAiJHtCV2hpdGV9VVNBR0U6JHtDb2xvcl9PZmZ9IgogIGVjaG8gLWUgIiAgbWFpYXNzIFtWRVJTSU9OX1RZUEVdIFtPUFRJT05TXVxuIgogIGVjaG8gLWUgIiR7QldoaXRlfVZFUlNJT05fVFlQRToke0NvbG9yX09mZn0iCiAgZWNobyAtZSAiICBtYWpvciAgICAgICAgICBCdW1wIG1ham9yIHZlcnNpb24gKGUuZy4sIDEuMi4zIOKGkiAyLjAuMCkiCiAgZWNobyAtZSAiICBtaW5vciAgICAgICAgICBCdW1wIG1pbm9yIHZlcnNpb24gKGUuZy4sIDEuMi4zIOKGkiAxLjMuMCkiCiAgZWNobyAtZSAiICBwYXRjaCAgICAgICAgICBCdW1wIHBhdGNoIHZlcnNpb24gKGUuZy4sIDEuMi4zIOKGkiAxLjIuNCkgJHtHcmF5fVtkZWZhdWx0XSR7Q29sb3JfT2ZmfSIKICBlY2hvIC1lICIgIFguWS5aICAgICAgICAgIFNldCBzcGVjaWZpYyB2ZXJzaW9uIG51bWJlclxuIgogIGVjaG8gLWUgIiR7QldoaXRlfU9QVElPTlM6JHtDb2xvcl9PZmZ9IgogIGVjaG8gLWUgIiAgLWgsIC0taGVscCAgICAgU2hvdyB0aGlzIGhlbHAgbWVzc2FnZSIKICBlY2hvIC1lICIgIC12LCAtLXZlcnNpb24gIFNob3cgdmVyc2lvbiBpbmZvcm1hdGlvblxuIgoKICBlY2hvIC1lICIke0JXaGl0ZX1RVUlDSyBTVEFSVDoke0NvbG9yX09mZn0iCiAgZWNobyAtZSAiICAke0JHcmVlbn0xLiR7Q29sb3JfT2ZmfSBSdW4gJHtCQ3lhbn1tYWlhc3Mke0NvbG9yX09mZn0gaW4geW91ciBnaXQgcmVwb3NpdG9yeSIKICBlY2hvIC1lICIgICR7QkdyZWVufTIuJHtDb2xvcl9PZmZ9IEZvciBBSSBmZWF0dXJlczogU2V0ICR7QlJlZH1NQUlBU1NfQUlfVE9LRU4ke0NvbG9yX09mZn0gZW52aXJvbm1lbnQgdmFyaWFibGUiCiAgZWNobyAtZSAiICAke0JHcmVlbn0zLiR7Q29sb3JfT2ZmfSBFdmVyeXRoaW5nIGVsc2Ugd29ya3Mgd2l0aCBzZW5zaWJsZSBkZWZhdWx0cyFcbiIKCiAgZWNobyAtZSAiJHtCV2hpdGV9QUkgQ09NTUlUIElOVEVMTElHRU5DRSBXT1JLRkxPVzoke0NvbG9yX09mZn0iCiAgZWNobyAtZSAiTUFJQVNTIG1hbmFnZXMgY29kZSBjaGFuZ2VzIGluIHRoZSBmb2xsb3dpbmcgd2F5OiIKICBlY2hvIC1lICIgICR7QkdyZWVufTEuJHtDb2xvcl9PZmZ9IEFza3MgaWYgeW91IHdvdWxkIGxpa2UgdG8gY29tbWl0IHlvdXIgY2hhbmdlcyIKICBlY2hvIC1lICIgICR7QkdyZWVufTIuJHtDb2xvcl9PZmZ9IElmIEFJIGlzIGF2YWlsYWJsZSBhbmQgc3dpdGNoZWQgaW4gYXNrIG1vZGUsIGFza3MgaWYgeW91J2QgbGlrZSBhbiBhaSBzdWdnZXN0aW9uIgogIGVjaG8gLWUgIiAgJHtCR3JlZW59My4ke0NvbG9yX09mZn0gSWYgeWVzIG9yIGluIGF1dG9zdWdnZXN0IG1vZGUsIHN1Z2dlc3RzIGEgY29tbWl0IG1lc2FnZSIKICBlY2hvIC1lICIgICR7QkdyZWVufTMuJHtDb2xvcl9PZmZ9IFlvdSBjYW4gdXNlIGl0IG9yIGVudGVyIG1hbnVhbCBjb21taXQgbW9kZSAobXVsdGlsaW5lKSBhdCB0aGUgcHJvbXB0IgogIGVjaG8gLWUgIiAgJHtCR3JlZW59NC4ke0NvbG9yX09mZn0gT2ZmZXJzIHRvIG1lcmdlIHRvIGRldmVsb3AsIHdoaWNoIGluaXRpYXRlcyB0aGUgdmVyc2lvbiBhbmQgY2hhbmdlbG9nIHdvcmtmbG93IgogIGVjaG8gLWUgIiAgJHtCR3JlZW59NS4ke0NvbG9yX09mZn0gSWYgeW91IGp1c3Qgd2FudCBhaSBjb21taXQgc3VnZ2VzdGlvbnMgYW5kIG5vIGZ1cnRoZXIgd29ya2Zsb3csIHNheSBub1xuIgoKICBlY2hvIC1lICIke0JXaGl0ZX1WRVJTSU9OIEFORCBDSEFOR0VMT0cgV09SS0ZMT1c6JHtDb2xvcl9PZmZ9IgogIGVjaG8gLWUgIk1BSUFTUyBtYW5hZ2VzIHZlcnNpb24gYnVtcGluZyBhbmQgY2hhbmdlbG9nZ2luZyBpbiB0aGUgZm9sbG93aW5nIHdheToiCiAgZWNobyAtZSAiICAke0JHcmVlbn0xLiR7Q29sb3JfT2ZmfSBNZXJnZXMgZmVhdHVyZSBicmFuY2gg4oaSIGRldmVsb3AiCiAgZWNobyAtZSAiICAke0JHcmVlbn0yLiR7Q29sb3JfT2ZmfSBDcmVhdGVzIHJlbGVhc2UveC54LnggYnJhbmNoIGZyb20gZGV2ZWxvcCIKICBlY2hvIC1lICIgICR7QkdyZWVufTMuJHtDb2xvcl9PZmZ9IFVwZGF0ZXMgdmVyc2lvbiBmaWxlcyBhbmQgY2hhbmdlbG9nIG9uIHJlbGVhc2UgYnJhbmNoIgogIGVjaG8gLWUgIiAgJHtCR3JlZW59NC4ke0NvbG9yX09mZn0gQ29tbWl0cyBhbmQgcHVzaGVzIHJlbGVhc2UgYnJhbmNoIgogIGVjaG8gLWUgIiAgJHtCR3JlZW59NS4ke0NvbG9yX09mZn0gTWVyZ2VzIHJlbGVhc2UgYnJhbmNoIGJhY2sgdG8gZGV2ZWxvcCIKICBlY2hvIC1lICIgICR7QkdyZWVufTYuJHtDb2xvcl9PZmZ9IFJldHVybnMgdG8gb3JpZ2luYWwgZmVhdHVyZSBicmFuY2hcbiIKCiAgZWNobyAtZSAiICAke0JZZWxsb3d9R2l0IEZsb3cgRGlhZ3JhbToke0NvbG9yX09mZn0iCiAgZWNobyAtZSAiJHtCQXF1YX0gICAgZmVhdHVyZS94eXog4pSA4pSA4pSQIgogIGVjaG8gLWUgIiAgICAgICAgICAgICAgICAgIOKUnOKUgOKGkiBkZXZlbG9wIOKUgOKUgOKGkiByZWxlYXNlLzEuMi4zIOKUgOKUgOKUkCIKICBlY2hvIC1lICIgICAgZmVhdHVyZS9hYmMg4pSA4pSA4pSYICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDilJzilIDihpIgZGV2ZWxvcCIKICBlY2hvIC1lICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4pSU4pSA4oaSICh0YWdnZWQpXG4ke0NvbG9yX09mZn0iCgogIGVjaG8gLWUgIiAgJHtCWWVsbG93fU5vdGU6JHtDb2xvcl9PZmZ9IFNjcmlwdCB3aWxsIG5vdCBidW1wIHZlcnNpb25zIGlmIGRldmVsb3AgYnJhbmNoIHJlcXVpcmVzIgogIGVjaG8gLWUgIiAgcHVsbCByZXF1ZXN0cywgYXMgUFIgd29ya2Zsb3dzIGFyZSBvdXRzaWRlIHRoZSBzY29wZSBvZiB0aGlzIHNjcmlwdC5cbiIKCiAgZWNobyAtZSAiJHtCV2hpdGV9RVhBTVBMRVM6JHtDb2xvcl9PZmZ9IgogIGVjaG8gLWUgIiAgbWFpYXNzICAgICAgICAgICAgICAgICAgICAgICAgICMgQnVtcCBwYXRjaCB2ZXJzaW9uIHdpdGggaW50ZXJhY3RpdmUgcHJvbXB0cyIKICBlY2hvIC1lICIgIG1haWFzcyBtaW5vciAgICAgICAgICAgICAgICAgICAjIEJ1bXAgbWlub3IgdmVyc2lvbiIKICBlY2hvIC1lICIgIG1haWFzcyBtYWpvciAgICAgICAgICAgICAgICAgICAjIEJ1bXAgbWFqb3IgdmVyc2lvbiIKICBlY2hvIC1lICIgIG1haWFzcyAyLjEuMCAgICAgICAgICAgICAgICAgICAjIFNldCBzcGVjaWZpYyB2ZXJzaW9uXG4iCgogIGVjaG8gLWUgIiR7QlJlZH3ilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEke0NvbG9yX09mZn0iCiAgZWNobyAtZSAiJHtCUmVkfSAgICAgICAgICAgICAgICAgICAgICAgICAgICBDT05GSUdVUkFUSU9OIChPUFRJT05BTCkke0NvbG9yX09mZn0iCiAgZWNobyAtZSAiJHtCUmVkfeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSR7Q29sb3JfT2ZmfVxuIgoKICBlY2hvIC1lICIke0JXaGl0ZX3wn6SWIEFJIEZFQVRVUkVTOiR7Q29sb3JfT2ZmfSIKICBlY2hvIC1lICIgICR7QlJlZH1NQUlBU1NfQUlfVE9LRU4ke0NvbG9yX09mZn0gICAgICAgICAgT3B0aW9uYWwgYnV0ICR7QlJlZH1SRVFVSVJFRCR7Q29sb3JfT2ZmfSBpZiB5b3Ugd2FudCBBSSBjb21taXQgbWVzc2FnZXMiCiAgZWNobyAtZSAiICBNQUlBU1NfQUlfTU9ERSAgICAgICAgICAgJHtHcmF5fSgnYXNrJykke0NvbG9yX09mZn0gJ29mZicsICdhdXRvc3VnZ2VzdCciCiAgZWNobyAtZSAiICBNQUlBU1NfQUlfTU9ERUwgICAgICAgICAgJHtHcmF5fSgnZ3B0LTRvJykke0NvbG9yX09mZn0gQUkgbW9kZWwgdG8gdXNlIgoKICBlY2hvIC1lICIke0JXaGl0ZX3wn5OKIE9VVFBVVCBDT05UUk9MOiR7Q29sb3JfT2ZmfSIKICBlY2hvIC1lICIgIE1BSUFTU19WRVJCT1NJVFkgICAgICAgICAgICAgJHtHcmF5fSgnYnJpZWYnKSR7Q29sb3JfT2ZmfSAnbm9ybWFsJywgJ2RlYnVnJyIKICBlY2hvIC1lICIgIE1BSUFTU19FTkFCTEVfTE9HR0lORyAgICAgICAgJHtHcmF5fSgnZmFsc2UnKSR7Q29sb3JfT2ZmfSAndHJ1ZScgdG8gbG9nIHRvIGZpbGUiCiAgZWNobyAtZSAiICBNQUlBU1NfTE9HX0ZJTEUgICAgICAgICAgICAgICR7R3JheX0oJ21haWFzcy5sb2cnKSR7Q29sb3JfT2ZmfSBMb2cgZmlsZSBwYXRoXG4iCiAgZWNobyAtZSAiJHtCV2hpdGV98J+MvyBHSVQgV09SS0ZMT1c6JHtDb2xvcl9PZmZ9IgogIGVjaG8gLWUgIiAgTUFJQVNTX0RFVkVMT1BCUkFOQ0ggICAgICAgICAke0dyYXl9KCdkZXZlbG9wJykke0NvbG9yX09mZn0gT3ZlcnJpZGUgZGV2ZWxvcCBicmFuY2ggbmFtZSIKICBlY2hvIC1lICIgIE1BSUFTU19TVEFHSU5HQlJBTkNIICAgICAgICAgJHtHcmF5fSgnc3RhZ2luZycpJHtDb2xvcl9PZmZ9IE92ZXJyaWRlIHN0YWdpbmcgYnJhbmNoIG5hbWUiCiAgZWNobyAtZSAiICBNQUlBU1NfTUFTVEVSQlJBTkNIICAgICAgICAgICR7R3JheX0oJ21hc3RlcicpJHtDb2xvcl9PZmZ9IE92ZXJyaWRlIG1hc3RlciBicmFuY2ggbmFtZSIKICBlY2hvIC1lICIgIE1BSUFTU19TVEFHSU5HX1BVTExSRVFVRVNUUyAgJHtHcmF5fSgnb24nKSR7Q29sb3JfT2ZmfSAnb2ZmJyB0byBkaXNhYmxlIHN0YWdpbmcgcHVsbCByZXF1ZXN0cyIKICBlY2hvIC1lICIgIE1BSUFTU19NQVNURVJfUFVMTFJFUVVFU1RTICAgJHtHcmF5fSgnb24nKSR7Q29sb3JfT2ZmfSAnb2ZmJyB0byBkaXNhYmxlIG1hc3RlciBwdWxsIHJlcXVlc3RzXG4iCgogIGVjaG8gLWUgIiR7QldoaXRlffCflJcgUkVQT1NJVE9SWSBJTlRFR1JBVElPTjoke0NvbG9yX09mZn0iCiAgZWNobyAtZSAiICBNQUlBU1NfR0lUSFVCX09XTkVSICAgICAgICAgICR7R3JheX0oYXV0by1kZXRlY3RlZCkke0NvbG9yX09mZn0gT3ZlcnJpZGUgR2l0SHViIG93bmVyIgogIGVjaG8gLWUgIiAgTUFJQVNTX0dJVEhVQl9SRVBPICAgICAgICAgICAke0dyYXl9KGF1dG8tZGV0ZWN0ZWQpJHtDb2xvcl9PZmZ9IE92ZXJyaWRlIEdpdEh1YiByZXBvIG5hbWUiCiAgZWNobyAtZSAiICBNQUlBU1NfQklUQlVDS0VUX1dPUktTUEFDRSAgICR7R3JheX0oYXV0by1kZXRlY3RlZCkke0NvbG9yX09mZn0gT3ZlcnJpZGUgQml0YnVja2V0IHdvcmtzcGFjZSIKICBlY2hvIC1lICIgIE1BSUFTU19CSVRCVUNLRVRfUkVQT19TTFVHICAgJHtHcmF5fShhdXRvLWRldGVjdGVkKSR7Q29sb3JfT2ZmfSBPdmVycmlkZSBCaXRidWNrZXQgcmVwbyBzbHVnXG4iCgogIGVjaG8gLWUgIiR7QldoaXRlffCfjJAgQlJPV1NFUiBJTlRFR1JBVElPTiBmb3IgcHVsbCByZXF1ZXN0czoke0NvbG9yX09mZn0iCiAgZWNobyAtZSAiICBNQUlBU1NfQlJPV1NFUiAgICAgICAgICAgICAgICR7R3JheX0oc3lzdGVtIGRlZmF1bHQpJHtDb2xvcl9PZmZ9IEJyb3dzZXIgZm9yIFVSTHMiCiAgZWNobyAtZSAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdXBwb3J0ZWQ6IENocm9tZSwgRmlyZWZveCwgU2FmYXJpLCBCcmF2ZSwgU2NyaWJlIgogIGVjaG8gLWUgIiAgTUFJQVNTX0JST1dTRVJfUFJPRklMRSAgICAgICAke0dyYXl9KCdEZWZhdWx0Jykke0NvbG9yX09mZn0gQnJvd3NlciBwcm9maWxlIHRvIHVzZVxuIgoKICBlY2hvIC1lICIke0JXaGl0ZX3wn5OBIENVU1RPTSBWRVJTSU9OIEZJTEVTOiR7Q29sb3JfT2ZmfSIKICBlY2hvIC1lICIgICR7QlllbGxvd31Gb3IgcHJvamVjdHMgd2l0aCBub24tc3RhbmRhcmQgdmVyc2lvbiBmaWxlIHN0cnVjdHVyZXM6JHtDb2xvcl9PZmZ9IgogIGVjaG8gLWUgIiAgTUFJQVNTX1ZFUlNJT05fUFJJTUFSWV9GSUxFICAgICAgICBQcmltYXJ5IHZlcnNpb24gZmlsZSBwYXRoIgogIGVjaG8gLWUgIiAgTUFJQVNTX1ZFUlNJT05fUFJJTUFSWV9UWVBFICAgICAgICAke0dyYXl9KCd0eHQnKSR7Q29sb3JfT2ZmfSAnanNvbicsICdwaHAnIG9yICd0eHQnIG9yICdwYXR0ZXJuJyIKICBlY2hvIC1lICIgIE1BSUFTU19WRVJTSU9OX1BSSU1BUllfTElORV9TVEFSVCAgTGluZSBwcmVmaXggZm9yIHR4dCBmaWxlcyIKICBlY2hvIC1lICIgIE1BSUFTU19WRVJTSU9OX1NFQ09OREFSWV9GSUxFUyAgICAgU2Vjb25kYXJ5IGZpbGVzIChwaXBlLXNlcGFyYXRlZCkiCiAgZWNobyAtZSAiICBNQUlBU1NfQ0hBTkdFTE9HX0lOVEVSTkFMX05BTUUgICAgIGFsdGVybmF0ZSBuYW1lIGZvciB5b3VyIGludGVybmFsIGNoYW5nZWxvZ1xuIgoKICBlY2hvIC1lICIgICR7QlllbGxvd31FeGFtcGxlczoke0NvbG9yX09mZn0iCiAgZWNobyAtZSAiICAgICR7R3JheX0jIFdvcmRQcmVzcyB0aGVtZSB3aXRoIHN0eWxlLmNzcyB2ZXJzaW9uJHtDb2xvcl9PZmZ9IgogIGVjaG8gLWUgIiAgICBNQUlBU1NfVkVSU0lPTl9QUklNQVJZX0ZJTEU9XCJzdHlsZS5jc3NcIiIKICBlY2hvIC1lICIgICAgTUFJQVNTX1ZFUlNJT05fUFJJTUFSWV9UWVBFPVwidHh0XCIiCiAgZWNobyAtZSAiICAgIE1BSUFTU19WRVJTSU9OX1BSSU1BUllfTElORV9TVEFSVD1cIlZlcnNpb246IFwiXG4iCiAgZWNobyAtZSAiICAgICR7R3JheX0jIFBIUCBjb25zdGFudCB3aXRoIHBhdHRlcm4gbWF0Y2hpbmcke0NvbG9yX09mZn0iCiAgZWNobyAtZSAiICAgIE1BSUFTU19WRVJTSU9OX1BSSU1BUllfRklMRT1cImZ1bmN0aW9ucy5waHBcIiIKICBlY2hvIC1lICIgICAgTUFJQVNTX1ZFUlNJT05fUFJJTUFSWV9UWVBFPVwicGF0dGVyblwiIgogIGVjaG8gLWUgIiAgICBNQUlBU1NfVkVSU0lPTl9QUklNQVJZX0xJTkVfU1RBUlQ9XCJkZWZpbmUoJ1ZFUlNJT04nLCd7dmVyc2lvbn0nKTtcIlxuIgogIGVjaG8gLWUgIiR7QlJlZH3ilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEke0NvbG9yX09mZn0iCiAgZWNobyAtZSAiJHtCUmVkfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGRUFUVVJFUyAmIENPTVBBVElCSUxJVFkke0NvbG9yX09mZn0iCiAgZWNobyAtZSAiJHtCUmVkfeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSR7Q29sb3JfT2ZmfVxuIgoKICBlY2hvIC1lICIke0JXaGl0ZX3inKggS0VZIEZFQVRVUkVTOiR7Q29sb3JfT2ZmfSIKICBlY2hvIC1lICIgIOKAoiAke0JHcmVlbn1BSS1wb3dlcmVkIGNvbW1pdCBtZXNzYWdlcyR7Q29sb3JfT2ZmfSB2aWEgQUkgaW50ZWdyYXRpb24iCiAgZWNobyAtZSAiICDigKIgJHtCR3JlZW59QXV0b21hdGljIGNoYW5nZWxvZyBnZW5lcmF0aW9uJHtDb2xvcl9PZmZ9IGFuZCBtYW5hZ2VtZW50IgogIGVjaG8gLWUgIiAg4oCiICR7QkdyZWVufU11bHRpLXJlcG9zaXRvcnkgc3VwcG9ydCR7Q29sb3JfT2ZmfSAoV29yZFByZXNzLCBDcmFmdCwgYmVzcG9rZSBwcm9qZWN0cykiCiAgZWNobyAtZSAiICDigKIgJHtCR3JlZW59R2l0IHdvcmtmbG93IGF1dG9tYXRpb24ke0NvbG9yX09mZn0gKGNvbW1pdCwgdGFnLCBtZXJnZSwgcHVzaCkiCiAgZWNobyAtZSAiICDigKIgJHtCR3JlZW59SW50ZWxsaWdlbnQgdmVyc2lvbiBtYW5hZ2VtZW50JHtDb2xvcl9PZmZ9IGZvciBkaXZlcnNlIGZpbGUgc3RydWN0dXJlcyIKICBlY2hvIC1lICIgIOKAoiAke0JHcmVlbn1KaXJhIHRpY2tldCBkZXRlY3Rpb24ke0NvbG9yX09mZn0gZnJvbSBicmFuY2ggbmFtZXNcbiIKCiAgZWNobyAtZSAiJHtCV2hpdGV98J+UhCBSRVBPU0lUT1JZIENPTVBBVElCSUxJVFk6JHtDb2xvcl9PZmZ9IgogIGVjaG8gLWUgIiAgJHtCWWVsbG93fUF1dG9tYXRpY2FsbHkgYWRhcHRzIHRvIHlvdXIgcmVwb3NpdG9yeSBzdHJ1Y3R1cmU6JHtDb2xvcl9PZmZ9IgogIGVjaG8gLWUgIiAgJHtCR3JlZW594pyTJHtDb2xvcl9PZmZ9IEZ1bGwgR2l0IEZsb3cgKGRldmVsb3Ag4oaSIHN0YWdpbmcg4oaSIG1hc3RlcikiCiAgZWNobyAtZSAiICAke0JHcmVlbn3inJMke0NvbG9yX09mZn0gU2ltcGxlIHdvcmtmbG93IChmZWF0dXJlIOKGkiBtYXN0ZXIpIgogIGVjaG8gLWUgIiAgJHtCR3JlZW594pyTJHtDb2xvcl9PZmZ9IExvY2FsLW9ubHkgcmVwb3NpdG9yaWVzIChubyByZW1vdGUgcmVxdWlyZWQpIgogIGVjaG8gLWUgIiAgJHtCR3JlZW594pyTJHtDb2xvcl9PZmZ9IFNpbmdsZSBicmFuY2ggd29ya2Zsb3dzIgogIGVjaG8gLWUgIiAgJHtCR3JlZW594pyTJHtDb2xvcl9PZmZ9IFByb2plY3RzIHdpdGhvdXQgdmVyc2lvbiBmaWxlcyAoZ2l0LW9ubHkgbW9kZSlcbiIKCiAgZWNobyAtZSAiJHtCV2hpdGV94pqZ77iPIFNZU1RFTSBSRVFVSVJFTUVOVFM6JHtDb2xvcl9PZmZ9IgogIGVjaG8gLWUgIiAgJHtCR3JlZW594pyTJHtDb2xvcl9PZmZ9IFVuaXgtbGlrZSBzeXN0ZW0gKG1hY09TLCBMaW51eCwgV1NMKSIKICBlY2hvIC1lICIgICR7QkdyZWVufeKckyR7Q29sb3JfT2ZmfSBCYXNoIDMuMisgKG1hY09TIGRlZmF1bHQgc3VwcG9ydGVkKSIKICBlY2hvIC1lICIgICR7QkdyZWVufeKckyR7Q29sb3JfT2ZmfSBHaXQgY29tbWFuZC1saW5lIHRvb2xzIgogIGVjaG8gLWUgIiAgJHtCWWVsbG93feKckyR7Q29sb3JfT2ZmfSBqcSAoSlNPTiBwcm9jZXNzb3IpICR7R3JheX0tIHJlcXVpcmVkJHtDb2xvcl9PZmZ9XG4iCgogIGVjaG8gLWUgIiAgJHtCWWVsbG93fUluc3RhbGwganE6JHtDb2xvcl9PZmZ9ICR7R3JheX1icmV3IGluc3RhbGwganEke0NvbG9yX09mZn0gKG1hY09TKSB8ICR7R3JheX1zdWRvIGFwdCBpbnN0YWxsIGpxJHtDb2xvcl9PZmZ9IChVYnVudHUpXG4iCgogIGVjaG8gLWUgIiR7QldoaXRlffCfk50gQ09ORklHVVJBVElPTjoke0NvbG9yX09mZn0iCiAgZWNobyAtZSAiICBHbG9iYWwgY29uZmlndXJhdGlvbiBsb2FkZWQgZnJvbSBzeXN0ZW0iCiAgZWNobyAtZSAiICBHbG9iYWwgb3ZlcnJpZGRlbiBieSBDb25maWd1cmF0aW9uIGxvYWRlZCBmcm9tICR7QkN5YW59Lm1haWFzcy5lbnYke0NvbG9yX09mZn0gZmlsZXMgaW4gY3VycmVudCBkaXJlY3RvcnkuIgogIGVjaG8gLWUgIiAgJHtHcmF5fU1vc3Qgc2V0dGluZ3MgYXJlIG9wdGlvbmFsIHdpdGggc2Vuc2libGUgZGVmYXVsdHMhJHtDb2xvcl9PZmZ9XG4iCgogIGVjaG8gLWUgIiR7QkdyZWVufVJlYWR5IHRvIGdldCBzdGFydGVkPyBKdXN0IHJ1bjoke0NvbG9yX09mZn0gJHtCQ3lhbn1tYWlhc3Mke0NvbG9yX09mZn0iCn0KCiMgRnVuY3Rpb24gdG8gZGlzcGxheSBoZWxwIGluZm9ybWF0aW9uIGZvciBjb21taXR0aGlzCnNob3dfaGVscF9jb21taXR0aGlzKCkgewogICAgICAgICAgICAgICAgICAgICAgbG9jYWwgQkJsdWU9J1wwMzNbMTszNG0nCiAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBCV2hpdGU9J1wwMzNbMTszN20nCiAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBCR3JlZW49J1wwMzNbMTszMm0nCiAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBCWWVsbG93PSdcMDMzWzE7MzNtJwogICAgICAgICAgICAgICAgICAgICAgbG9jYWwgQkN5YW49J1wwMzNbMTszNm0nCiAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBDb2xvcl9PZmY9J1wwMzNbMG0nCgogICAgICAgICAgICAgICAgICAgICAgZWNobyAtZSAiJHtCQmx1ZX1jb21taXR0aGlzIC0gQUktcG93ZXJlZCBHaXQgY29tbWl0IG1lc3NhZ2UgZ2VuZXJhdG9yJHtDb2xvcl9PZmZ9IgogICAgICAgICAgICAgICAgICAgICAgZWNobwogICAgICAgICAgICAgICAgICAgICAgZWNobyAtZSAiJHtCV2hpdGV9VXNhZ2U6JHtDb2xvcl9PZmZ9IgogICAgICAgICAgICAgICAgICAgICAgZWNobyAtZSAiICAke0JHcmVlbn1jb21taXR0aGlzJHtDb2xvcl9PZmZ9IgogICAgICAgICAgICAgICAgICAgICAgZWNobwogICAgICAgICAgICAgICAgICAgICAgZWNobyAtZSAiJHtCV2hpdGV9RW52aXJvbm1lbnQgQ29uZmlndXJhdGlvbjoke0NvbG9yX09mZn0iCiAgICAgICAgICAgICAgICAgICAgICBlY2hvIC1lICIgICR7QkN5YW59TUFJQVNTX0FJX1RPS0VOJHtDb2xvcl9PZmZ9ICAgICAgWW91ciBBSSBBUEkgdG9rZW4gKHJlcXVpcmVkKSIKICAgICAgICAgICAgICAgICAgICAgIGVjaG8gLWUgIiAgJHtCQ3lhbn1NQUlBU1NfQUlfTU9ERSR7Q29sb3JfT2ZmfSAgICAgICBDb21taXQgbW9kZToiCiAgICAgICAgICAgICAgICAgICAgICBlY2hvIC1lICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc2sgKGRlZmF1bHQpLCBhdXRvc3VnZ2VzdCwgb2ZmIgogICAgICAgICAgICAgICAgICAgICAgZWNobyAtZSAiICAke0JDeWFufU1BSUFTU19BSV9DT01NSVRfTUVTU0FHRV9TVFlMRSR7Q29sb3JfT2ZmfSIKICAgICAgICAgICAgICAgICAgICAgIGVjaG8gLWUgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2Ugc3R5bGU6IGJ1bGxldCAoZGVmYXVsdCksIGNvbnZlbnRpb25hbCwgc2ltcGxlIgogICAgICAgICAgICAgICAgICAgICAgZWNobyAtZSAiICAke0JDeWFufU1BSUFTU19BSV9FTkRQT0lOVCR7Q29sb3JfT2ZmfSAgIEN1c3RvbSBBSSBlbmRwb2ludCAob3B0aW9uYWwpIgogICAgICAgICAgICAgICAgICAgICAgZWNobwogICAgICAgICAgICAgICAgICAgICAgZWNobyAtZSAiJHtCV2hpdGV9RmlsZXMgKG9wdGlvbmFsKToke0NvbG9yX09mZn0iCiAgICAgICAgICAgICAgICAgICAgICBlY2hvIC1lICIgICR7QkdyZWVufS5lbnYke0NvbG9yX09mZn0gICAgICAgICAgICAgICAgICAgICBDYW4gZGVmaW5lIHRoZSB2YXJpYWJsZXMgYWJvdmUiCiAgICAgICAgICAgICAgICAgICAgICBlY2hvIC1lICIgICR7QkdyZWVufS5tYWlhc3MucHJvbXB0JHtDb2xvcl9PZmZ9ICAgICAgICAgICBDdXN0b20gQUkgcHJvbXB0IG92ZXJyaWRlIgogICAgICAgICAgICAgICAgICAgICAgZWNobwogICAgICAgICAgICAgICAgICAgICAgZWNobyAtZSAiY29tbWl0dGhpcyBhbmFseXplcyB5b3VyIHN0YWdlZCBjaGFuZ2VzIGFuZCBzdWdnZXN0cyBhbiBpbnRlbGxpZ2VudCBjb21taXQgbWVzc2FnZS4iCiAgICAgICAgICAgICAgICAgICAgICBlY2hvIC1lICJZb3UgY2FuIGFjY2VwdCwgcmVqZWN0LCBvciBlZGl0IGl0IGJlZm9yZSBjb21taXR0aW5nLiIKICAgICAgICAgICAgICAgICAgICAgIGVjaG8KICAgICAgICAgICAgICAgICAgICAgIGVjaG8gLWUgIlRoaXMgc2NyaXB0IGRvZXMgbm90IG1hbmFnZSB2ZXJzaW9ucywgY2hhbmdlbG9ncywgb3IgYnJhbmNoZXMuIgogICAgICAgICAgICAgICAgICAgIH0KCmZpICMgX19TUkNfX1ZvbHVtZXNfZW5pZ21hZGV2X2VuaWdtYWRldl9zdGF0aWNfbWFpYXNzX3dob2xlX2Jhc2htYWlhc3NfbGliX3V0aWxzX2hlbHBfc2gKIyAtLS0gRW5kIGlubGluZWQ6IC9Wb2x1bWVzL2VuaWdtYWRldi9lbmlnbWFkZXYvc3RhdGljL21haWFzcy13aG9sZS9iYXNobWFpYXNzL2xpYi91dGlscy9oZWxwLnNoIC0tLQoKZnVuY3Rpb24gaW5pdGlhbGlzZUJ1bXAoKSB7CgogIHByaW50X2hlYWRlciAiJGhlYWRlciIKICBwcmludF9pbmZvICJUaGlzIHNjcmlwdCB3aWxsIGhlbHAgeW91IGJ1bXAgdGhlIHZlcnNpb24gbnVtYmVyIGFuZCBtYW5hZ2UgeW91ciBnaXQgd29ya2Zsb3ciICJicmllZiIKICBwcmludF9pbmZvICJQcmVzcyAke0JXaGl0ZX1jdHJsK2Mke0NvbG9yX09mZn0gdG8gYWJvcnQgYXQgYW55IHRpbWVcbiIgImJyaWVmIgoKICAjIExvYWQgTUFJQVNTXyogdmFyaWFibGVzIGZyb20gLmVudiAodGhlc2Ugb3ZlcnJpZGUgZW52aXJvbm1lbnQgdmFyaWFibGVzKQogIGxvYWRfYnVtcHNjcmlwdF9lbnYKCiAgIyBJbml0aWFsaXplIGFsbCB2YXJpYWJsZXMgYWZ0ZXIgbG9hZGluZyBlbnYKICBzZXR1cF9idW1wc2NyaXB0X3ZhcmlhYmxlcwoKICAjIENoZWNrIGFuZCBoYW5kbGUgLmdpdGlnbm9yZSBmb3IgbG9nIGZpbGVzIGlmIGxvZ2dpbmcgaXMgZW5hYmxlZAogIGNoZWNrX2dpdGlnbm9yZV9mb3JfbG9ncwogIAogICMgQ2hlY2sgYW5kIGhhbmRsZSAuZ2l0aWdub3JlIGZvciBlbnZpcm9ubWVudCBmaWxlcwogIGNoZWNrX2dpdGlnbm9yZV9mb3JfZW52CgogICMgRW5zdXJlIHdlJ3JlIGluIGEgZ2l0IHJlcG9zaXRvcnkKICBjaGVja19naXRfcmVwb3NpdG9yeQoKICAjIEJvb3RzdHJhcCBwcm9qZWN0IGlmIG5lZWRlZCAoaW50ZXJhY3RpdmUgc2V0dXAgZm9yIG5ldyBwcm9qZWN0cykKICBib290c3RyYXBfcHJvamVjdAoKICBleHBvcnQgR0lUX01FUkdFX0FVVE9FRElUPW5vCiAgCiAgIyBIYW5kbGUgZW1wdHkgcmVwb3NpdG9yeSBjYXNlIChubyBjb21taXRzIHlldCkKICBpZiBnaXQgcmV2LXBhcnNlIC0tdmVyaWZ5IEhFQUQgPi9kZXYvbnVsbCAyPiYxOyB0aGVuCiAgICB0YWdtZXNzYWdlPSQoZ2l0IGxvZyAtMSAtLXByZXR0eT0lQikKICAgIGJyYW5jaF9uYW1lPSQoZ2l0IHJldi1wYXJzZSAtLWFiYnJldi1yZWYgSEVBRCkKICBlbHNlCiAgICB0YWdtZXNzYWdlPSIiCiAgICAjIEdldCBicmFuY2ggbmFtZSBldmVuIHdpdGhvdXQgY29tbWl0cwogICAgYnJhbmNoX25hbWU9JChnaXQgc3ltYm9saWMtcmVmIC0tc2hvcnQgSEVBRCAyPi9kZXYvbnVsbCB8fCBlY2hvICJtYWluIikKICBmaQogIAogIGV4cG9ydCB0YWdtZXNzYWdlCiAgZXhwb3J0IGJyYW5jaF9uYW1lCiAgaHVtYW5kYXRlPSQoZGF0ZSArIiVkICVCICVZIikKICBsb25naHVtYW5kYXRlPSQoZGF0ZSArIiVkICVCICVZICglQSkiKQogIGV4cG9ydCBodW1hbmRhdGUKICBleHBvcnQgbG9uZ2h1bWFuZGF0ZQoKICAjIENoZWNrIGZvciBlbnYgdmFyIG92ZXJyaWRlIEJFRk9SRSBicmFuY2ggZGV0ZWN0aW9uCiAgaWYgW1sgIiRNQUlBU1NfTU9ERSIgPT0gImFpX29ubHkiIF1dOyB0aGVuCiAgICAgIGV4cG9ydCBhaV9jb21taXRzX29ubHk9dHJ1ZQogIGZpCgogIGJyYW5jaERldGVjdGlvbgoKICAjIEluaXRpYWxpemUgcGF0aCB2YXJpYWJsZXMgd2l0aCBkZWZhdWx0IHZhbHVlcyBmb3IgdmVyc2lvbiBmaWxlIGRldGVjdGlvbgogIGV4cG9ydCBwYWNrYWdlX2pzb25fcGF0aD0iJHtNQUlBU1NfUEFDS0FHRV9QQVRIOi0ufSIKICBleHBvcnQgdmVyc2lvbl9maWxlX3BhdGg9IiR7TUFJQVNTX1ZFUlNJT05fUEFUSDotLn0iCgogICMgQ2hlY2sgaWYgdmVyc2lvbiBmaWxlcyBleGlzdCBiZWZvcmUgcnVubmluZyB2ZXJzaW9uIG1hbmFnZW1lbnQKICBsb2NhbCBoYXNfdmVyc2lvbl9maWxlcz1mYWxzZQoKICAjIENoZWNrIGZvciBjdXN0b20gcHJpbWFyeSB2ZXJzaW9uIGZpbGUgZmlyc3QKICBpZiBbWyAtbiAiJHZlcnNpb25fcHJpbWFyeV9maWxlIiAmJiAtZiAiJHZlcnNpb25fcHJpbWFyeV9maWxlIiBdXTsgdGhlbgogICAgaGFzX3ZlcnNpb25fZmlsZXM9dHJ1ZQogICMgQ2hlY2sgZm9yIGRlZmF1bHQgdmVyc2lvbiBmaWxlcwogIGVsaWYgW1sgLWYgIiR7cGFja2FnZV9qc29uX3BhdGh9L3BhY2thZ2UuanNvbiIgXV0gfHwgW1sgLWYgIiR7dmVyc2lvbl9maWxlX3BhdGh9L1ZFUlNJT04iIF1dOyB0aGVuCiAgICBoYXNfdmVyc2lvbl9maWxlcz10cnVlCiAgZmkKCiAgcHJpbnRfZGVidWcgIlZlcmlvbiBwcmltYXJ5IGZpbGU6ICR7QlllbGxvd30ke3ZlcnNpb25fcHJpbWFyeV9maWxlfSR7Q29sb3JfT2ZmfSIgCiAgZWNobwogIHByaW50X2RlYnVnICJoYXMgdmVyc2lvbiBmaWxlczogJHtCWWVsbG93fSRoYXNfdmVyc2lvbl9maWxlcyR7Q29sb3JfT2ZmfSIgCgogICMgaWYgJGFpX2NvbW1pdHNfb25seSBleGl0IDAKICBpZiBbWyAiJGFpX2NvbW1pdHNfb25seSIgPT0gInRydWUiIF1dOyB0aGVuCiAgICBjaGVja1VuY29tbWl0dGVkQ2hhbmdlcwogICAgZWNobyAtZSAiJHtCQXF1YX1Nb2RlIGlzIGNvbW1pdHMgb25seS4gXG5XZSBhcmUgZG9uZSBhbmQgb24gJGJyYW5jaF9uYW1lIGJyYW5jaC4ke0NvbG9yX09mZn0iCiAgICBwcmludF9zaWdub2ZmX3dpdGhfdG9wdXAKICAgIGV4aXQgMAogIGZpCgogIGlmIFtbICIkaGFzX3ZlcnNpb25fZmlsZXMiID09ICJ0cnVlIiBdXTsgdGhlbgogICAgY2hhbmdlTWFuYWdlbWVudAogIGVsc2UKICAgIHByaW50X3dhcm5pbmcgIk5vIHZlcnNpb24gZmlsZXMgZm91bmQgKHBhY2thZ2UuanNvbiBvciBWRVJTSU9OKSIKICAgIHByaW50X2luZm8gIlNraXBwaW5nIHZlcnNpb24gYnVtcGluZyBhbmQgY2hhbmdlbG9nIG1hbmFnZW1lbnQiCiAgICBwcmludF9pbmZvICJXaWxsIHByb2NlZWQgd2l0aCBnaXQgd29ya2Zsb3cgb25seVxuIgogICAgIyBTdGlsbCBjaGVjayBmb3IgdW5jb21taXR0ZWQgY2hhbmdlcyBldmVuIHdpdGhvdXQgdmVyc2lvbiBmaWxlcwogICAgY2hlY2tVbmNvbW1pdHRlZENoYW5nZXMKICBmaQoKICBtZXJnZURldmVsb3AgIiRoYXNfdmVyc2lvbl9maWxlcyIgIiRAIgogIGRlcGxveU9wdGlvbnMKfQoKIyBQYXJzZSBjb21tYW5kIGxpbmUgYXJndW1lbnRzCgojIFRva2VuIG1hbmFnZW1lbnQgc3dpdGNoZXMKZm9yIGFyZyBpbiAiJEAiOyBkbwogIGNhc2UgJGFyZyBpbgogICAgLWh8LS1oZWxwKQogICAgICBzaG93X2hlbHAKICAgICAgZXhpdCAwCiAgICAgIGV4aXQgMAogICAgICA7OwogICAgLXZ8LS12ZXJzaW9uKQogICAgICB2ZXJzaW9uPSIkTUFJQVNTX0NMSUVOVF9WRVJTSU9OIgogICAgICBlY2hvICJNSUFTUyB2JHZlcnNpb24iCiAgICAgIGV4aXQgMAogICAgICA7OwogICAgLS1kZWxldGUtdG9rZW4pCiAgICAgIHByaW50X2luZm8gIkRlbGV0aW5nIHN0b3JlZCBBSSB0b2tlbi4uLiIgImFsd2F5cyIKICAgICAgcmVtb3ZlX3NlY3VyZV92YXJpYWJsZSAiTUFJQVNTX0FJX1RPS0VOIgogICAgICBwcmludF9zdWNjZXNzICJBSSB0b2tlbiBkZWxldGVkIGZyb20gc2VjdXJlIHN0b3JhZ2UgKGlmIGl0IGV4aXN0ZWQpLiIgImFsd2F5cyIKICAgICAgZXhpdCAwCiAgICAgIDs7CiAgICAtLXVwZGF0ZS10b2tlbikKICAgICAgcHJpbnRfaW5mbyAiVXBkYXRpbmcgc3RvcmVkIEFJIHRva2VuLi4uIiAiYWx3YXlzIgogICAgICByZW1vdmVfc2VjdXJlX3ZhcmlhYmxlICJNQUlBU1NfQUlfVE9LRU4iCiAgICAgIGVjaG8gLW4gIkVudGVyIG5ldyBBSSB0b2tlbjogIgogICAgICByZWFkIC1zIG5ld190b2tlbgogICAgICBlY2hvCiAgICAgIGlmIFtbIC1uICIkbmV3X3Rva2VuIiBdXTsgdGhlbgogICAgICAgIHN0b3JlX3NlY3VyZV92YXJpYWJsZSAiTUFJQVNTX0FJX1RPS0VOIiAiJG5ld190b2tlbiIKICAgICAgICBwcmludF9zdWNjZXNzICJOZXcgQUkgdG9rZW4gc3RvcmVkIHNlY3VyZWx5LiIgImFsd2F5cyIKICAgICAgZWxzZQogICAgICAgIHByaW50X3dhcm5pbmcgIk5vIHRva2VuIGVudGVyZWQuIE5vdGhpbmcgc3RvcmVkLiIgImFsd2F5cyIKICAgICAgZmkKICAgICAgZXhpdCAwCiAgICAgIDs7CiAgICAtLWFjY291bnQtaW5mbykKICAgICAgIyBRdWVyeSBhY2NvdW50IGluZm8gZnJvbSBtYWlhc3MtcHJveHkKICAgICAgIyBFbnN1cmUgc2VjdXJlIHZhcmlhYmxlcyBhcmUgbG9hZGVkIChpbmNsdWRpbmcgdG9rZW4gYWNxdWlzaXRpb24gaWYgbmVlZGVkKQogICAgICBsb2FkX3NlY3VyZV92YXJpYWJsZXMKICAgICAgCiAgICAgICMgQ2hlY2sgaWYgd2UgbmVlZCB0byBjcmVhdGUgYW4gYW5vbnltb3VzIHRva2VuCiAgICAgIGlmIFtbICIkX01BSUFTU19ORUVEX0FOT05fVE9LRU4iID09ICJ0cnVlIiBdXTsgdGhlbgoKIyAtLS0gQmVnaW4gaW5saW5lZDogL1ZvbHVtZXMvZW5pZ21hZGV2L2VuaWdtYWRldi9zdGF0aWMvbWFpYXNzLXdob2xlL2Jhc2htYWlhc3MvbGliL2NvcmUvYWkuc2ggLS0tCmlmIFtbIC16ICIke19fU1JDX19Wb2x1bWVzX2VuaWdtYWRldl9lbmlnbWFkZXZfc3RhdGljX21haWFzc193aG9sZV9iYXNobWFpYXNzX2xpYl9jb3JlX2FpX3NoOi19IiBdXTsgdGhlbiBfX1NSQ19fVm9sdW1lc19lbmlnbWFkZXZfZW5pZ21hZGV2X3N0YXRpY19tYWlhc3Nfd2hvbGVfYmFzaG1haWFzc19saWJfY29yZV9haV9zaD0xCgpmaSAjIF9fU1JDX19Wb2x1bWVzX2VuaWdtYWRldl9lbmlnbWFkZXZfc3RhdGljX21haWFzc193aG9sZV9iYXNobWFpYXNzX2xpYl9jb3JlX2FpX3NoCiMgLS0tIEVuZCBpbmxpbmVkOiAvVm9sdW1lcy9lbmlnbWFkZXYvZW5pZ21hZGV2L3N0YXRpYy9tYWlhc3Mtd2hvbGUvYmFzaG1haWFzcy9saWIvY29yZS9haS5zaCAtLS0KCiAgICAgICAgaWYgY3JlYXRlX2Fub255bW91c19zdWJzY3JpcHRpb247IHRoZW4KICAgICAgICAgIHByaW50X2luZm8gIkFub255bW91cyBzdWJzY3JpcHRpb24gY3JlYXRlZCBzdWNjZXNzZnVsbHkuIgogICAgICAgICAgZXhwb3J0IF9NQUlBU1NfTkVFRF9BTk9OX1RPS0VOPSIiCiAgICAgICAgZWxzZQogICAgICAgICAgcHJpbnRfd2FybmluZyAiRmFpbGVkIHRvIGNyZWF0ZSBhbm9ueW1vdXMgc3Vic2NyaXB0aW9uLiIKICAgICAgICAgIGV4aXQgMQogICAgICAgIGZpCiAgICAgIGZpCiAgICAgIAogICAgICBhcGlfa2V5PSIke01BSUFTU19BSV9UT0tFTjotfSIKICAgICAgaWYgW1sgLXogIiRhcGlfa2V5IiB8fCAiJGFwaV9rZXkiID09ICJESVNBQkxFRCIgXV07IHRoZW4KICAgICAgICBpZiBbWyAiJHthaV9tb2RlOi1hc2t9IiAhPSAib2ZmIiBdXTsgdGhlbgogICAgICAgICAgcHJpbnRfZGVidWcgIk5vIEFJIHRva2VuIGZvdW5kLCBleHBvcnRpbmcgX01BSUFTU19ORUVEX0FOT05fVE9LRU49dHJ1ZSBmb3IgZmFsbGJhY2sgaW4gY29tbWl0IGxvZ2ljLi4uIiAiYWx3YXlzIgogICAgICAgICAgZXhwb3J0IF9NQUlBU1NfTkVFRF9BTk9OX1RPS0VOPSJ0cnVlIgogICAgICAgIGVsc2UKICAgICAgICAgIHByaW50X3dhcm5pbmcgIkFJIG1vZGUgaXMgb2ZmLiBTa2lwcGluZyBBSSB0b2tlbiBzZXR1cC4iICJhbHdheXMiCiAgICAgICAgZmkKICAgICAgZmkKCiAgICAgICMgRGVidWc6IHByaW50IF9NQUlBU1NfTkVFRF9BTk9OX1RPS0VOIGJlZm9yZSBjb21taXQgbG9naWMKICAgICAgcHJpbnRfZGVidWcgIkRFQlVHOiBfTUFJQVNTX05FRURfQU5PTl9UT0tFTiBpcyAnJChfTUFJQVNTX05FRURfQU5PTl9UT0tFTiknIGp1c3QgYmVmb3JlIGNvbW1pdCBsb2dpYyIKICAgICAgIyBEZXRlcm1pbmUgY2xpZW50IHZlcnNpb24gZnJvbSBzY3JpcHQgaGVhZGVyCiAgICAgIGNsaWVudF92ZXJzaW9uPSQoZ3JlcCAtbTEgJ14jIE1BSUFTUycgIiR7QkFTSF9TT1VSQ0VbMF19IiB8IHNlZCAtRSAncy8uKiB2KFswLTldK1wuWzAtOV0rXC5bMC05XSspLiovXDEvJykKICAgICAgW1sgLXogIiRjbGllbnRfdmVyc2lvbiIgXV0gJiYgY2xpZW50X3ZlcnNpb249IjAuMC4wIgogICAgICBjbGllbnRfbmFtZT0iYmFzaG1haWFzcyIKICAgICAgIyBVc2UgbmV3IC9hY2NvdW50LWluZm8gZW5kcG9pbnQgKEdFVCBwcmVmZXJyZWQpCiAgICAgIGJhc2VfaG9zdD0iJHtNQUlBU1NfQUlfSE9TVDotJHtNQUlBU1NfSE9TVDotaHR0cHM6Ly9wb3VuZC5tYWlhc3MubmV0fX0iCiAgICAgIGVuZHBvaW50PSIke2Jhc2VfaG9zdH0vYWNjb3VudC1pbmZvIgogICAgICBlY2hvICJbSU5GT10gUXVlcnlpbmcgYWNjb3VudCBpbmZvIGF0OiAkZW5kcG9pbnQiID4mMgogICAgICByZXNwb25zZT0kKGN1cmwgLXMgLXcgIlxuSFRUUF9TVEFUVVM6JXtodHRwX2NvZGV9XG4iIFwKICAgICAgICAtSCAiQXV0aG9yaXphdGlvbjogQmVhcmVyICRhcGlfa2V5IiBcCiAgICAgICAgLUggIlgtQ2xpZW50LU5hbWU6ICRjbGllbnRfbmFtZSIgXAogICAgICAgIC1IICJYLUNsaWVudC1WZXJzaW9uOiAkY2xpZW50X3ZlcnNpb24iIFwKICAgICAgICAiJGVuZHBvaW50IikKICAgICAgaHR0cF9zdGF0dXM9JChlY2hvICIkcmVzcG9uc2UiIHwgYXdrIC1GJ0hUVFBfU1RBVFVTOicgJ05GPjF7cHJpbnQgJDJ9JyB8IHRhaWwgLW4xKQogICAgICByZXNwb25zZV9ib2R5PSQoZWNobyAiJHJlc3BvbnNlIiB8IHNlZCAnL15IVFRQX1NUQVRVUzovZCcpCiAgICAgIGxhc3RfZW5kcG9pbnQ9IiRlbmRwb2ludCIKICAgICAgbGFzdF9zdGF0dXM9IiRodHRwX3N0YXR1cyIKICAgICAgIyBJZiBlcnJvciBvciBtaXNzaW5nIGZpZWxkcywgdHJ5IFBPU1QgZmFsbGJhY2sKICAgICAgaWYgW1sgLXogIiRyZXNwb25zZV9ib2R5IiB8fCAiJHJlc3BvbnNlX2JvZHkiID09IConZXJyb3InKiB8fCAiJGh0dHBfc3RhdHVzIiA9PSAiNDA0IiBdXTsgdGhlbgogICAgICAgIGVjaG8gIltJTkZPXSBSZXRyeWluZyB3aXRoIFBPU1QgdG8gJGVuZHBvaW50IiA+JjIKICAgICAgICByZXNwb25zZT0kKGN1cmwgLXMgLXcgIlxuSFRUUF9TVEFUVVM6JXtodHRwX2NvZGV9XG4iIC1YIFBPU1QgIiRlbmRwb2ludCIgXAogICAgICAgICAgLUggIkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvbiIgXAogICAgICAgICAgLUggIlgtQ2xpZW50LU5hbWU6ICRjbGllbnRfbmFtZSIgXAogICAgICAgICAgLUggIlgtQ2xpZW50LVZlcnNpb246ICRjbGllbnRfdmVyc2lvbiIgXAogICAgICAgICAgLWQgIntcImFwaV9rZXlcIjpcIiRhcGlfa2V5XCJ9IikKICAgICAgICBodHRwX3N0YXR1cz0kKGVjaG8gIiRyZXNwb25zZSIgfCBhd2sgLUYnSFRUUF9TVEFUVVM6JyAnTkY+MXtwcmludCAkMn0nIHwgdGFpbCAtbjEpCiAgICAgICAgcmVzcG9uc2VfYm9keT0kKGVjaG8gIiRyZXNwb25zZSIgfCBzZWQgJy9eSFRUUF9TVEFUVVM6L2QnKQogICAgICAgIGxhc3RfZW5kcG9pbnQ9IiRlbmRwb2ludCAoUE9TVCkiCiAgICAgICAgbGFzdF9zdGF0dXM9IiRodHRwX3N0YXR1cyIKICAgICAgZmkKICAgICAgIyBJZiBzdGlsbCBub3QgSlNPTiBvciA0MDQsIHRyeSB2ZXJzaW9uZWQgcGF0aAogICAgICBpZiBbWyAteiAiJHJlc3BvbnNlX2JvZHkiIHx8ICIkcmVzcG9uc2VfYm9keSIgPT0gKidOb3QgRm91bmQnKiBdXTsgdGhlbgogICAgICAgIGVuZHBvaW50X3YxPSIke2Jhc2VfaG9zdH0vdjEvYWNjb3VudC1pbmZvIgogICAgICAgIGVjaG8gIltJTkZPXSBGYWxsYmFjayB0bzogJGVuZHBvaW50X3YxIiA+JjIKICAgICAgICByZXNwb25zZT0kKGN1cmwgLXMgLXcgIlxuSFRUUF9TVEFUVVM6JXtodHRwX2NvZGV9XG4iIFwKICAgICAgICAgIC1IICJBdXRob3JpemF0aW9uOiBCZWFyZXIgJGFwaV9rZXkiIFwKICAgICAgICAgIC1IICJYLUNsaWVudC1OYW1lOiAkY2xpZW50X25hbWUiIFwKICAgICAgICAgIC1IICJYLUNsaWVudC1WZXJzaW9uOiAkY2xpZW50X3ZlcnNpb24iIFwKICAgICAgICAgICIkZW5kcG9pbnRfdjEiKQogICAgICAgIGh0dHBfc3RhdHVzPSQoZWNobyAiJHJlc3BvbnNlIiB8IGF3ayAtRidIVFRQX1NUQVRVUzonICdORj4xe3ByaW50ICQyfScgfCB0YWlsIC1uMSkKICAgICAgICByZXNwb25zZV9ib2R5PSQoZWNobyAiJHJlc3BvbnNlIiB8IHNlZCAnL15IVFRQX1NUQVRVUzovZCcpCiAgICAgICAgbGFzdF9lbmRwb2ludD0iJGVuZHBvaW50X3YxIgogICAgICAgIGxhc3Rfc3RhdHVzPSIkaHR0cF9zdGF0dXMiCiAgICAgICAgaWYgW1sgLXogIiRyZXNwb25zZV9ib2R5IiB8fCAiJHJlc3BvbnNlX2JvZHkiID09IConZXJyb3InKiB8fCAiJGh0dHBfc3RhdHVzIiA9PSAiNDA0IiBdXTsgdGhlbgogICAgICAgICAgZWNobyAiW0lORk9dIFJldHJ5aW5nIHdpdGggUE9TVCB0byAkZW5kcG9pbnRfdjEiID4mMgogICAgICAgICAgcmVzcG9uc2U9JChjdXJsIC1zIC13ICJcbkhUVFBfU1RBVFVTOiV7aHR0cF9jb2RlfVxuIiAtWCBQT1NUICIkZW5kcG9pbnRfdjEiIFwKICAgICAgICAgICAgLUggIkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvbiIgXAogICAgICAgICAgICAtSCAiWC1DbGllbnQtTmFtZTogJGNsaWVudF9uYW1lIiBcCiAgICAgICAgICAgIC1IICJYLUNsaWVudC1WZXJzaW9uOiAkY2xpZW50X3ZlcnNpb24iIFwKICAgICAgICAgICAgLWQgIntcImFwaV9rZXlcIjpcIiRhcGlfa2V5XCJ9IikKICAgICAgICAgIGh0dHBfc3RhdHVzPSQoZWNobyAiJHJlc3BvbnNlIiB8IGF3ayAtRidIVFRQX1NUQVRVUzonICdORj4xe3ByaW50ICQyfScgfCB0YWlsIC1uMSkKICAgICAgICAgIHJlc3BvbnNlX2JvZHk9JChlY2hvICIkcmVzcG9uc2UiIHwgc2VkICcvXkhUVFBfU1RBVFVTOi9kJykKICAgICAgICAgIGxhc3RfZW5kcG9pbnQ9IiRlbmRwb2ludF92MSAoUE9TVCkiCiAgICAgICAgICBsYXN0X3N0YXR1cz0iJGh0dHBfc3RhdHVzIgogICAgICAgIGZpCiAgICAgIGZpCiAgICAgICMgSGVscGVyOiBtYXNrIGEgc2Vuc2l0aXZlIHRva2VuIChzaG93IHN0YXJ0IGFuZCBlbmQgb25seSkKICAgICAgbWFza190b2tlbigpIHsKICAgICAgICBsb2NhbCBzPSIkMSI7IGxvY2FsIG49JHsjc30KICAgICAgICBpZiAoKCBuIDw9IDEwICkpOyB0aGVuIGVjaG8gIiR7czowOjF9KioqJHtzOiAtMX0iOyBlbHNlIGVjaG8gIiR7czowOjZ9KioqJHtzOiAtNH0iOyBmaQogICAgICB9CgogICAgICAjIElmIEpTT04gcmVxdWVzdGVkIGV4cGxpY2l0bHksIHByaW50IEpTT04gKHdpdGhvdXQgZXhwb3NpbmcgZnVsbCB0b2tlbikKICAgICAgaWYgW1sgIiR7TUFJQVNTX0FDQ09VTlRfSU5GT19KU09OOi0wfSIgPT0gIjEiIF1dOyB0aGVuCiAgICAgICAgaWYgY29tbWFuZCAtdiBqcSA+L2Rldi9udWxsIDI+JjEgJiYgW1sgIiRyZXNwb25zZV9ib2R5IiA9fiBeXHsgXV07IHRoZW4KICAgICAgICAgIGVjaG8gIiRyZXNwb25zZV9ib2R5IiB8IGpxICd7CiAgICAgICAgICAgIHRva2Vuc191c2VkOiAudG9rZW5zX3VzZWQsCiAgICAgICAgICAgIHRva2Vuc19yZW1haW5pbmc6IC50b2tlbnNfcmVtYWluaW5nLAogICAgICAgICAgICBxdW90YTogLnF1b3RhLAogICAgICAgICAgICBzdWJzY3JpcHRpb25fdHlwZTogLnN1YnNjcmlwdGlvbl90eXBlLAogICAgICAgICAgICBjdXN0b21lcl9lbWFpbDogLmN1c3RvbWVyX2VtYWlsLAogICAgICAgICAgICBzdGF0dXM6IC5zdGF0dXMKICAgICAgICAgIH0nCiAgICAgICAgICBleGl0IDAKICAgICAgICBlbHNlCiAgICAgICAgICBlY2hvICJbRVJST1JdIEpTT04gbW9kZSByZXF1ZXN0ZWQgYnV0IHJlc3BvbnNlIGlzIG5vdCB2YWxpZCBKU09OIChzdGF0dXM6ICR7bGFzdF9zdGF0dXM6LXVua25vd259KS4iID4mMgogICAgICAgICAgW1sgLW4gIiRyZXNwb25zZV9ib2R5IiBdXSAmJiBlY2hvICIkcmVzcG9uc2VfYm9keSIgPiYyCiAgICAgICAgICBleGl0IDIKICAgICAgICBmaQogICAgICBmaQoKICAgICAgIyBIdW1hbi1yZWFkYWJsZSBzdW1tYXJ5IChkZWZhdWx0KQogICAgICBpZiBjb21tYW5kIC12IGpxID4vZGV2L251bGwgMj4mMSAmJiBbWyAiJHJlc3BvbnNlX2JvZHkiID1+IF5ceyBdXTsgdGhlbgogICAgICAgICMgRXh0cmFjdCBmaWVsZHMgc2FmZWx5CiAgICAgICAgdG9rZW5zX3VzZWQ9JChlY2hvICIkcmVzcG9uc2VfYm9keSIgfCBqcSAtciAnLnRva2Vuc191c2VkIC8vICItIicpCiAgICAgICAgdG9rZW5zX3JlbWFpbmluZz0kKGVjaG8gIiRyZXNwb25zZV9ib2R5IiB8IGpxIC1yICcudG9rZW5zX3JlbWFpbmluZyAvLyAiLSInKQogICAgICAgIHF1b3RhPSQoZWNobyAiJHJlc3BvbnNlX2JvZHkiIHwganEgLXIgJy5xdW90YSAvLyAiLSInKQogICAgICAgIHN1Yl90eXBlPSQoZWNobyAiJHJlc3BvbnNlX2JvZHkiIHwganEgLXIgJy5zdWJzY3JpcHRpb25fdHlwZSAvLyAiLSInKQogICAgICAgIGN1c3RfZW1haWw9JChlY2hvICIkcmVzcG9uc2VfYm9keSIgfCBqcSAtciAnLmN1c3RvbWVyX2VtYWlsIC8vICItIicpCiAgICAgICAgc3RhdHVzX2ZpZWxkPSQoZWNobyAiJHJlc3BvbnNlX2JvZHkiIHwganEgLXIgJy5zdGF0dXMgLy8gIi0iJykKICAgICAgZWxzZQogICAgICAgICMgRmFsbGJhY2sgcGFyc2luZyB3aGVuIGpxIG1pc3Npbmcgb3Igbm9uLUpTT04KICAgICAgICB0b2tlbnNfdXNlZD0iLSI7IHRva2Vuc19yZW1haW5pbmc9Ii0iOyBxdW90YT0iLSI7IHN1Yl90eXBlPSItIjsgY3VzdF9lbWFpbD0iLSI7IHN0YXR1c19maWVsZD0iJHtsYXN0X3N0YXR1czotdW5rbm93bn0iCiAgICAgIGZpCgogICAgICBtYXNrZWRfa2V5PSQobWFza190b2tlbiAiJGFwaV9rZXkiKQogICAgICBlY2hvICIiCiAgICAgIGVjaG8gIkFjY291bnQgSW5mbyIKICAgICAgZWNobyAiLS0tLS0tLS0tLS0tIgogICAgICBlY2hvICJBUEkgVG9rZW46ICAgICAgICAkbWFza2VkX2tleSIKICAgICAgaWYgW1sgLW4gIiR7TUFJQVNTX1NVQlNDUklQVElPTl9JRDotfSIgXV07IHRoZW4KICAgICAgICBlY2hvICJTdWJzY3JpcHRpb24gSUQ6ICAke01BSUFTU19TVUJTQ1JJUFRJT05fSUR9IgogICAgICBmaQogICAgICBlY2hvICJUeXBlOiAgICAgICAgICAgICAke3N1Yl90eXBlfSIKICAgICAgZWNobyAiRW1haWw6ICAgICAgICAgICAgJHtjdXN0X2VtYWlsfSIKICAgICAgZWNobyAtZSAiJHtjcmVkaXR9cyBVc2VkOiAgICAgJHt0b2tlbnNfdXNlZH0iCiAgICAgIGVjaG8gLWUgIiR7Y3JlZGl0fXMgUmVtYWluaW5nOiR7dG9rZW5zX3JlbWFpbmluZ30iCiAgICAgIGVjaG8gLWUgIlF1b3RhOiAgICAgICAgICAgICR7cXVvdGF9IgogICAgICAjIEV4cGxhaW4gc3RhdHVzIGNvZGVzIGNsZWFybHkKICAgICAgaWYgW1sgIiR7bGFzdF9zdGF0dXM6LX0iID09ICI0MDMiIHx8ICIkc3RhdHVzX2ZpZWxkIiA9PSAiNDAzIiBdXTsgdGhlbgogICAgICAgIGVjaG8gIlN0YXR1czogICAgICAgICAgNDAzIEZvcmJpZGRlbiIKICAgICAgICBlY2hvICJFeHBsYW5hdGlvbjogICAgIFlvdXIgdG9rZW4gd2FzIHJlamVjdGVkLiBFbnN1cmUgaXQgaXMgY29ycmVjdCwgbm90IGV4cGlyZWQsIGFuZCBhc3NvY2lhdGVkIHdpdGggYW4gYWN0aXZlIHN1YnNjcmlwdGlvbi4iCiAgICAgIGVsaWYgW1sgIiR7bGFzdF9zdGF0dXM6LX0iID09ICI0MDEiIHx8ICIkc3RhdHVzX2ZpZWxkIiA9PSAiNDAxIiBdXTsgdGhlbgogICAgICAgIGVjaG8gIlN0YXR1czogICAgICAgICAgNDAxIFVuYXV0aG9yaXplZCIKICAgICAgICBlY2hvICJFeHBsYW5hdGlvbjogICAgIE1pc3Npbmcgb3IgaW52YWxpZCBjcmVkZW50aWFscy4gVHJ5IHVwZGF0aW5nIHlvdXIgdG9rZW4gd2l0aCAnLS11cGRhdGUtdG9rZW4nLiIKICAgICAgZWxpZiBbWyAiJHtsYXN0X3N0YXR1czotfSIgPX4gXjIgJiYgIiR7bGFzdF9zdGF0dXM6LX0iICE9ICIiIF1dOyB0aGVuCiAgICAgICAgZWNobyAiU3RhdHVzOiAgICAgICAgICAke2xhc3Rfc3RhdHVzfSBPSyIKICAgICAgZWxzZQogICAgICAgIGVjaG8gIlN0YXR1czogICAgICAgICAgJHtsYXN0X3N0YXR1czotdW5rbm93bn0iCiAgICAgIGZpCiAgICAgIGVjaG8gIiIKICAgICAgZXhpdCAwCiAgICAgIAogICAgICA7OwogICAgLWFpaGVscHwtLWNvbW1pdHRoaXMtaGVscCkKICAgICAgZWNobyAiVXNhZ2U6IGJtYSBbb3B0aW9uc10iCiAgICAgIGVjaG8gIkNvbW1vbiBvcHRpb25zOiIKICAgICAgZWNobyAiICAtLWFjY291bnQtaW5mbyAgICAgICAgU2hvdyB5b3VyIGFjY291bnQgc3RhdHVzIChtYXNrZWQgdG9rZW4pIgogICAgICBlY2hvICIgIC0tdXBkYXRlLXRva2VuICAgICAgICBQcm9tcHQgdG8gdXBkYXRlIGFuZCBzdG9yZSB5b3VyIEFQSSB0b2tlbiIKICAgICAgZWNobyAiICAtLWRlbGV0ZS10b2tlbiAgICAgICAgUmVtb3ZlIHN0b3JlZCBBUEkgdG9rZW4iCiAgICAgIGVjaG8gIiAgLXYsIC0tdmVyc2lvbiAgICAgICAgIFNob3cgdmVyc2lvbiIKICAgICAgZWNobyAiICAtaCwgLS1oZWxwICAgICAgICAgICAgU2hvdyBoZWxwIgogICAgICBleGl0IDAKICAgICAgOzsKICAgIC1haWN2fC0tY29tbWl0dGhpcy12ZXJzaW9uKQogICAgICB2ZXJzaW9uPSJVbmtub3duIgogICAgICBzY3JpcHRfZGlyPSIkKGNkICIkKGRpcm5hbWUgIiR7QkFTSF9TT1VSQ0VbMF19IikiICYmIHB3ZCkiCiAgICAgIHNjcmlwdF9maWxlPSIke0JBU0hfU09VUkNFWzBdfSIKICAgICAgdmVyc2lvbj0kKGdyZXAgLW0xICdeIyBNQUlBU1MnICIkc2NyaXB0X2ZpbGUiIHwgc2VkIC1FICdzLy4qIHYoWzAtOV0rXC5bMC05XStcLlswLTldKykuKi9cMS8nKQogICAgICBlY2hvICJDT01NSVRUSElTIHYkdmVyc2lvbiIKICAgICAgZXhpdCAwCiAgICAgIDs7CiAgICAtY298LWN8LS1jb21taXRzLW9ubHkpCiAgICAgIGV4cG9ydCBhaV9jb21taXRzX29ubHk9dHJ1ZQogICAgICA7OwogICAgLWFpLWNvbW1pdHMtb25seSkKICAgICAgZXhwb3J0IGFpX2NvbW1pdHNfb25seT10cnVlCiAgICAgIGV4cG9ydCBicmFuZD0iY29tbWl0dGhpcyIKICAgICAgOzsKICAgIC0tYm9vdHN0cmFwfC0tc2V0dXApCiAgICAgICMgRm9yY2UgYm9vdHN0cmFwIG1vZGUgLSB3aWxsIHJ1biBzZXR1cCBldmVuIGlmIC5lbnYubWFpYXNzIGV4aXN0cwogICAgICBleHBvcnQgTUFJQVNTX0ZPUkNFX0JPT1RTVFJBUD10cnVlCiAgICAgIDs7CiAgZXNhYwpkb25lCgojIFJlbW92ZSBkdXBsaWNhdGUgLSBhbHJlYWR5IGhhbmRsZWQgYWJvdmUgYmVmb3JlIGJyYW5jaERldGVjdGlvbgoKW1sgIiR7QkFTSF9TT1VSQ0VbMF19IiA9PSAiJHswfSIgXV0gJiYgaW5pdGlhbGlzZUJ1bXAgIiRAIgo=
__PAYLOAD__
)"
